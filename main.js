(()=>{"use strict";var e={name:".profile__user",about:".profile__user-job",avatar:".profile__avatar",avatarWrapper:".profile__img-wrapper",userNameInput:"name-input",jobInputName:"job-input",avatarInputName:"url-avatar-input"},t=".pop-up__form",n=".pop-up__button-save",r="pop-up_active",o="card__button-like_active",i={formSelector:".pop-up__form",inputSelector:".pop-up__input",submitButtonSelector:".pop-up__button",inactiveButtonClass:"pop-up__button_inactive",inputErrorClass:"pop-up__input_type_error",errorClass:"pop-up__error_visible"};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))},(n="_checkResponseError")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this.url=t.url,this._headers=t.headers}var t,n;return t=e,(n=[{key:"getUserInfoApi",value:function(){return fetch("".concat(this.url,"/users/me"),{method:"GET",headers:this._headers}).then(this._checkResponseError)}},{key:"getInitialCards",value:function(){return fetch("".concat(this.url,"/cards"),{method:"GET",headers:this._headers}).then(this._checkResponseError)}},{key:"setUserInfoApi",value:function(e){return fetch("".concat(this.url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e["name-input"],about:e["job-input"]})}).then(this._checkResponseError)}},{key:"setUserAvatarApi",value:function(e){return fetch("".concat(this.url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e["url-avatar-input"]})}).then(this._checkResponseError)}},{key:"addCard",value:function(e){return fetch("".concat(this.url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkResponseError)}},{key:"deleteCard",value:function(e){return fetch("".concat(this.url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponseError)}},{key:"likesCard",value:function(e){return fetch("".concat(this.url,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then(this._checkResponseError)}},{key:"dislikesCard",value:function(e){return fetch("".concat(this.url,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then(this._checkResponseError)}},{key:"getAllPromise",value:function(){return Promise.all([this.getUserInfoApi(),this.getInitialCards()])}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){function e(t,n,r,o,i,a){var u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"_getTemplate",(function(){return document.querySelector(u._selectorTemplate).content.querySelector(".card").cloneNode(!0)})),s(this,"generateCard",(function(){return u._element=u._getTemplate(),u._buttonLikeCard=u._element.querySelector(".card__button-like"),u._buttonDeleteCard=u._element.querySelector(".card__button-delete"),u._counterLike=u._element.querySelector(".card__like-counter"),u._imgCard=u._element.querySelector(".card__image"),u._element.querySelector(".card__title").textContent=u._title,u._imgCard.alt=u._title,u._imgCard.src=u._src,u._setEventListeners(),u._checkIdCard(),u.setLikes(),u._element})),s(this,"_checkIdCard",(function(){u._idOwner&&u._idOwner!==u._userId&&u._buttonDeleteCard.classList.add("card__button-delete_inactive")})),s(this,"_setEventListeners",(function(){u._buttonDeleteCard.addEventListener("click",(function(){return u._handleCardDelete(u._idCard)})),u._buttonLikeCard.addEventListener("click",(function(){return u._handleLike()})),u._imgCard.addEventListener("click",(function(){return u._handleCardClick(u._item)}))})),s(this,"_handleLike",(function(){u._handleLikeCard(u._buttonLikeCard,u._idCard,u._counterLike)})),this._item=t,this._title=this._item.name,this._alt=this._item.name,this._src=this._item.link,this._idOwner=this._item.idOwner,this._idCard=this._item.idCard,this._likes=this._item.likes,this._selectorTemplate=n,this._handleCardClick=r,this._handleCardDelete=o,this._handleLikeCard=i,this._userId=a}var t,n;return t=e,(n=[{key:"setLikes",value:function(){var e=this;this._likes&&(this._counterLike.textContent=this._likes.length,this._likes.forEach((function(t){t._id===e._userId&&e._buttonLikeCard.classList.add(o)})))}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),f(this,"_handleClickIconClose",(function(e){(e.target.classList.contains("pop-up")||e.target.classList.contains("pop-up__close-icon"))&&n.close()})),this._popup=document.querySelector("".concat(t)),this._closeIcon=this._popup.querySelector(".pop-up__close-icon")}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add(r),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove(r),document.removeEventListener("keyup",this._handleEscClose)}},{key:"setEventListeners",value:function(){this._popup.addEventListener("click",this._handleClickIconClose)}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=b(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},y.apply(this,arguments)}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function v(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(c,e);var r,o,i,a,u=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(i);if(a){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function c(e,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(o=u.call(this,e)).submitHandler=r,o.form=o._popup.querySelector(t),o._inputList=o._popup.querySelectorAll(".pop-up__input"),o._inputName=o._popup.querySelector(".pop-up__input_user-name"),o._inputUserInfo=o._popup.querySelector(".pop-up__input_user-job"),o._popUpButtonSave=o._popup.querySelector(n),o._popUpButtonTextContent=o._popUpButtonSave.textContent,o}return r=c,(o=[{key:"close",value:function(){this.form.reset(),y(g(c.prototype),"close",this).call(this)}},{key:"getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"renderLoading",value:function(e){this._popUpButtonSave.textContent=e?"Сохранение...":this._popUpButtonTextContent}},{key:"setEventListeners",value:function(){var e=this;y(g(c.prototype),"setEventListeners",this).call(this),this.form.addEventListener("submit",(function(t){t.preventDefault(),e.submitHandler(e.getInputValues())}))}}])&&_(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),c}(d);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=O(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},C.apply(this,arguments)}function O(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function L(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(r);if(o){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return L(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._popupImage=t._popup.querySelector(".pop-up__view-img"),t._imageName=t._popup.querySelector(".pop-up__title-view-img"),t}return t=a,(n=[{key:"open",value:function(e,t){this._popupImage.src=e,this._popupImage.alt=t,this._imageName.textContent=t,C(j(a.prototype),"open",this).call(this)}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d);function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"prependItem",value:function(e){this._container.prepend(e)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(e){var t=this;this.clear(),e.forEach((function(e){t._renderer(e)}))}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t,n){return t&&T(e.prototype,t),n&&T(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=U((function e(t){var n=this,r=t.selectorsUser;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),q(this,"getUserInfo",(function(){var e;return q(e={},n._nameInputName,n._userName.textContent),q(e,n._jobInputName,n._userJob.textContent),e})),q(this,"setUserInfo",(function(e){n._userName.textContent=e[n._nameInputName]||e.name,n._userJob.textContent=e[n._jobInputName]||e.about})),q(this,"setUserAvatar",(function(e){n._userAvatar.src=e.avatar||e[n._avatarInputName]})),this._selectorsUser=r,this._userName=document.querySelector(this._selectorsUser.name),this._userJob=document.querySelector(this._selectorsUser.about),this._userAvatar=document.querySelector(this._selectorsUser.avatar),this._nameInputName=this._selectorsUser.userNameInput,this._jobInputName=this._selectorsUser.jobInputName,this._avatarInputName=this._selectorsUser.avatarInputName}));function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),x(this,"_showInputError",(function(){r._inputElement.classList.add(r._selectors.inputErrorClass),r._errorElement.textContent=r._errorMessage,r._errorElement.classList.add(r._selectors.errorClass)})),x(this,"_hideInputError",(function(){r._inputElement.classList.remove(r._selectors.inputErrorClass),r._errorElement.classList.remove(r._selectors.errorClass),r._errorElement.textContent=""})),x(this,"_isValid",(function(){r._inputElement.validity.valid?r._hideInputError():r._showInputError()})),x(this,"_hasInvalidInput",(function(){return r._inputList.some((function(e){return!e.validity.valid}))})),x(this,"_enableSubmitButton",(function(){r._buttonElement.classList.add(r._selectors.inactiveButtonClass),r._buttonElement.setAttribute("disabled","disabled")})),x(this,"_disableSubmitButton",(function(){r._buttonElement.classList.remove(r._selectors.inactiveButtonClass),r._buttonElement.removeAttribute("disabled")})),x(this,"_toggleButtonState",(function(){r._hasInvalidInput()?r._enableSubmitButton():r._disableSubmitButton()})),x(this,"_setEventListeners",(function(){r._toggleButtonState(),r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._inputElement=e,r._errorElement=r._formElement.querySelector(".".concat(r._inputElement.name,"-error")),r._errorMessage=r._inputElement.validationMessage,r._isValid(),r._toggleButtonState()}))}))})),x(this,"enableValidation",(function(){r._setEventListeners()})),this._formElement=t,this._selectors=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._selectors.inputSelector)),this._buttonElement=this._formElement.querySelector(n.submitButtonSelector)}var t,n;return t=e,(n=[{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._inputElement=t,e._errorElement=e._formElement.querySelector(".".concat(e._inputElement.name,"-error")),e._hideInputError()}))}}])&&A(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(){return H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=J(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},H.apply(this,arguments)}function J(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=W(e)););return e}function M(e,t){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},M(e,t)}function G(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(c,e);var r,o,i,a,u=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=W(i);if(a){var n=W(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return G(this,e)});function c(e,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(o=u.call(this,e)).form=o._popup.querySelector(t),o._popUpButtonSave=o._popup.querySelector(n),o._popUpButtonTextContent=o._popUpButtonSave.textContent,o.submitHandler=r,o}return r=c,(o=[{key:"renderLoading",value:function(e){this._popUpButtonSave.textContent=e?"Сохранение...":this._popUpButtonTextContent}},{key:"setEventListeners",value:function(e){var t=this;H(W(c.prototype),"setEventListeners",this).call(this),this.form.addEventListener("submit",(function(n){n.preventDefault(),t.submitHandler(e)}))}}])&&D(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),c}(d);function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F=document.querySelector(e.avatarWrapper),K=document.querySelector(".profile__button_edit"),Q=document.querySelector(".profile__button_add"),X=document.querySelector(".pop-up__form-edit-profile"),Y=document.querySelector(".pop-up__form-add-card"),Z=document.querySelector(".pop-up__form-edit-avatar"),ee=null,te=new N(X,i);te.enableValidation();var ne=new N(Y,i);ne.enableValidation();var re=new N(Z,i);re.enableValidation();var oe=new B({selectorsUser:e}),ie=new u({url:"https://mesto.nomoreparties.co/v1/cohort-51",headers:{authorization:"d4c4166d-7da1-41e5-9c12-6ada905232af","Content-Type":"application/json"}}),ae=new R({renderer:function(e){var t,n=(t={name:e.name,link:e.link,idOwner:e.owner._id,idCard:e._id,likes:e.likes},new l(t,"#template-card",ye,_e,he,ee).generateCard());ae.addItem(n)}},".cards"),ue=new z(".pop-up_delete-card",(function(e){!function(e){ue.renderLoading(!0),ie.deleteCard(e).then((function(){return de()})).finally((function(){ue.close(),ue.renderLoading(!1)})).catch((function(e){console.log(e)}))}(e)})),ce=new P(".pop-up_view-card");function se(e,t,n){return t=new E(e,(function(e){t.renderLoading(!0),ie[n](e).then((function(){return de()})).then(t.close()).catch((function(e){console.log(e)})).finally((function(){t.renderLoading(!1)}))}))}var le=se(".pop-up_edit-profile",le,"setUserInfoApi"),pe=se(".pop-up_edit-avatar",pe,"setUserAvatarApi"),fe=new E(".pop-up_add-card",(function(e){fe.renderLoading(!0);var t={name:e["name-card-input"],link:e["url-input"]};ie.addCard(t).then((function(){de()})).then((function(){return fe.close()})).finally((function(){fe.renderLoading(!1)}))}));function de(){ie.getAllPromise().then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];oe.setUserInfo(o),oe.setUserAvatar(o),ee=o._id,ae.renderItems(i)})).catch((function(e){console.log(e)}))}function he(e,t,n){e.classList.contains(o)?ie.dislikesCard(t).then((function(t){e.classList.remove(o),n.textContent=t.likes.length})).catch((function(e){console.log(e)})):ie.likesCard(t).then((function(t){e.classList.add(o),n.textContent=t.likes.length})).catch((function(e){console.log(e)}))}function _e(e){ue.open(),ue.setEventListeners(e)}function ye(e){ce.open(e.link,e.name)}de(),Q.addEventListener("click",(function(){fe.open(),ne.resetValidation()})),K.addEventListener("click",(function(){var e=oe.getUserInfo();le.setInputValues(e),te.resetValidation(),le.open()})),F.addEventListener("click",(function(){pe.open(),re.resetValidation()})),pe.setEventListeners(),fe.setEventListeners(),le.setEventListeners(),ue.setEventListeners(),ce.setEventListeners()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFtQjhCLGtCQUFrQnBMLEVBQ3RDLENBZUQsU0FBU21KLEdBQVU3SSxHQUNqQjBKLEdBQWVtQixLQUFLN0ssRUFBS1AsS0FBTU8sRUFBSzdDLEtBQ3JDLENBNUNEZ00sS0E4Q0FyQixFQUFpQmpHLGlCQUFpQixTQUFTLFdBQ3pDb0ksR0FBYVksT0FDYnpDLEdBQWMyQyxpQkFDZixJQUVEbEQsRUFBa0JoRyxpQkFBaUIsU0FBUyxXQUMxQyxJQUFNbUosRUFBVzFDLEdBQVkyQyxjQUM3QmxCLEdBQWFtQixlQUFlRixHQUM1QjlDLEdBQWlCNkMsa0JBQ2pCaEIsR0FBYWMsTUFDZCxJQUVEakQsRUFBVy9GLGlCQUFpQixTQUFTLFdBQ25DbUksR0FBWWEsT0FDWnhDLEdBQXVCMEMsaUJBQ3hCLElBQ0RmLEdBQVljLG9CQUNaYixHQUFhYSxvQkFDYmYsR0FBYWUsb0JBQ2I5QixHQUFtQjhCLG9CQUNuQnBCLEdBQWVvQixtQiIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIid1c2Ugc3RyaWN0J1xuXG5pbXBvcnQgYnJlc3RJbWcgZnJvbSAnLi4vaW1hZ2VzL2JyZXN0LmpwZyc7XG5pbXBvcnQgdml0ZWJza0ltZyBmcm9tICcuLi9pbWFnZXMvdml0ZWJzay5qcGcnO1xuaW1wb3J0IGhvbWVsSW1nIGZyb20gJy4uL2ltYWdlcy9nb21lbC5qcGcnO1xuaW1wb3J0IGhyb2Rub0ltZyBmcm9tICcuLi9pbWFnZXMvaHJvZG5vLmpwZyc7XG5pbXBvcnQgbW9naWxldkltZyBmcm9tICcuLi9pbWFnZXMvbW9naWxldi5qcGcnO1xuaW1wb3J0IG1pbnNrSW1nIGZyb20gJy4uL2ltYWdlcy9taW5zay5qcGcnO1xuXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW3tcbiAgICBuYW1lOiAn0JHRgNC10YHRgicsXG4gICAgbGluazogYnJlc3RJbWdcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQktC40YLQtdCx0YHQuicsXG4gICAgbGluazogdml0ZWJza0ltZ1xuICB9LFxuICB7XG4gICAgbmFtZTogJ9CT0L7QvNC10LvRjCcsXG4gICAgbGluazogaG9tZWxJbWdcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQk9GA0L7QtNC90L4nLFxuICAgIGxpbms6IGhyb2Rub0ltZ1xuICB9LFxuICB7XG4gICAgbmFtZTogJ9Cc0L7Qs9C40LvQtdCyJyxcbiAgICBsaW5rOiBtb2dpbGV2SW1nXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JzQuNC90YHQuicsXG4gICAgbGluazogbWluc2tJbWdcbiAgfVxuXTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdG9yc1VzZXIgPSB7XG4gIG5hbWU6ICcucHJvZmlsZV9fdXNlcicsXG4gIGFib3V0OiAnLnByb2ZpbGVfX3VzZXItam9iJyxcbiAgYXZhdGFyOiAnLnByb2ZpbGVfX2F2YXRhcicsXG4gIGF2YXRhcldyYXBwZXI6ICcucHJvZmlsZV9faW1nLXdyYXBwZXInLFxuICB1c2VyTmFtZUlucHV0OiAnbmFtZS1pbnB1dCcsXG4gIGpvYklucHV0TmFtZTogJ2pvYi1pbnB1dCcsXG4gIGF2YXRhcklucHV0TmFtZTogJ3VybC1hdmF0YXItaW5wdXQnXG59XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XG4gIGJ1dHRvbkFkZE5ld0NhcmQ6ICcucHJvZmlsZV9fYnV0dG9uX2FkZCcsXG4gIHBvcFVwRWRpdFByb2ZpbGU6ICcucG9wLXVwX2VkaXQtcHJvZmlsZScsXG4gIGZvcm1FZGl0UHJvZmlsZTogJy5wb3AtdXBfX2Zvcm0tZWRpdC1wcm9maWxlJyxcbiAgZm9ybUFkZENhcmQ6ICcucG9wLXVwX19mb3JtLWFkZC1jYXJkJyxcbiAgcHJvZmlsZUJ1dHRvbkVkaXQ6ICcucHJvZmlsZV9fYnV0dG9uX2VkaXQnLFxuICBwb3BVcEFkZENhcmQ6ICcucG9wLXVwX2FkZC1jYXJkJyxcbiAgcG9wVXBGb3JtOiAnLnBvcC11cF9fZm9ybScsXG4gIHBvcFVwQnV0dG9uU2F2ZTogJy5wb3AtdXBfX2J1dHRvbi1zYXZlJyxcbiAgcG9wVXBJbnB1dDogJy5wb3AtdXBfX2lucHV0JyxcbiAgcG9wVXBJbnB1dFVzZXJOYW1lOiAnLnBvcC11cF9faW5wdXRfdXNlci1uYW1lJyxcbiAgcG9wVXBJbnB1dFVzZXJJbmZvOiAnLnBvcC11cF9faW5wdXRfdXNlci1qb2InLFxuICB1c2VyTmFtZUlucHV0OiAnbmFtZS1pbnB1dCcsXG4gIHVzZXJJbmZvSW5wdXQ6ICdqb2ItaW5wdXQnLFxuICBjYXJkTmFtZUlucHV0OiAnbmFtZS1jYXJkLWlucHV0JyxcbiAgY2FyZExpbmtJbnB1dDogJ3VybC1pbnB1dCcsXG4gIHBvcFVwQXZhdGFyOiAnLnBvcC11cF9lZGl0LWF2YXRhcicsXG4gIGZvcm1BdmF0YXJQcm9maWxlOiAnLnBvcC11cF9fZm9ybS1lZGl0LWF2YXRhcicsXG4gIHBvcHVwQ29uZmlybTogJy5wb3AtdXBfZGVsZXRlLWNhcmQnXG59XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RvcnNQb3B1cCA9IHtcbiAgcG9wdXBBY3RpdmU6ICdwb3AtdXBfYWN0aXZlJyxcbiAgcG9wdXA6ICdwb3AtdXAnLFxuICBwb3BVcENsb3NlSWNvbjogJ3BvcC11cF9fY2xvc2UtaWNvbicsXG59XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RvcnNDYXJkcyA9IHtcbiAgdGVtcGxhdGVDYXJkOiAnI3RlbXBsYXRlLWNhcmQnLFxuICBhcnRpY2xlQ2FyZDogJy5jYXJkJyxcbiAgc2VjdGlvbkNhcmRzOiAnLmNhcmRzJyxcbiAgaW1nQ2FyZDogJy5jYXJkX19pbWFnZScsXG4gIHRpdGxlQ2FyZDogJy5jYXJkX190aXRsZScsXG4gIGJ1dHRvbkRlbGV0ZUNhcmQ6ICcuY2FyZF9fYnV0dG9uLWRlbGV0ZScsXG4gIGJ1dHRvbkRlbGV0ZUNhcmRJbmFjdGl2ZTogJ2NhcmRfX2J1dHRvbi1kZWxldGVfaW5hY3RpdmUnLFxuICBidXR0b25MaWtlQ2FyZDogJy5jYXJkX19idXR0b24tbGlrZScsXG4gIGNvdW50ZXJMaWtlOiAnLmNhcmRfX2xpa2UtY291bnRlcicsXG4gIGJ1dHRvbkxpa2VBY3RpdmVDYXJkOiAnY2FyZF9fYnV0dG9uLWxpa2VfYWN0aXZlJyxcbiAgZm9ybUFkZENhcmQ6ICcucG9wLXVwX19mb3JtLWFkZC1jYXJkJyxcbiAgcG9wVXBWaWV3Q2FyZDogJy5wb3AtdXBfdmlldy1jYXJkJyxcbiAgcG9wVXBWaWV3SW1nOiAnLnBvcC11cF9fdmlldy1pbWcnLFxuICBwb3BVcFZpZXdDYXJkVGl0bGU6ICcucG9wLXVwX190aXRsZS12aWV3LWltZycsXG4gIHBvcFVwQ2xvc2VJY29uczogJy5wb3AtdXBfX2Nsb3NlLWljb24nLFxuICBpbnB1dE5hbWVDYXJkOiAnLnBvcC11cF9faW5wdXRfY2FyZC1uYW1lJyxcbiAgaW5wdXRVcmxDYXJkOiAnLnBvcC11cF9faW5wdXRfY2FyZC11cmwnLFxufVxuXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzVmFsaWRhdGlvbiA9IHtcbiAgZm9ybVNlbGVjdG9yOiAnLnBvcC11cF9fZm9ybScsXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wLXVwX19pbnB1dCcsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcC11cF9fYnV0dG9uJyxcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcC11cF9fYnV0dG9uX2luYWN0aXZlJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wLXVwX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ3BvcC11cF9fZXJyb3JfdmlzaWJsZSdcbn1cbiIsImV4cG9ydCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy51cmwgPSBvcHRpb25zLnVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuICB9XG5cbiAgX2NoZWNrUmVzcG9uc2VFcnJvciA9IChyZXMpID0+IHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvQXBpKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnVybH0vdXNlcnMvbWVgLCB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICB9KVxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZUVycm9yKVxuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnVybH0vY2FyZHNgLCB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlRXJyb3IpXG4gIH1cblxuICBzZXRVc2VySW5mb0FwaSh1c2VyRGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnVybH0vdXNlcnMvbWVgLCB7XG4gICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIG5hbWU6IHVzZXJEYXRhWyduYW1lLWlucHV0J10sXG4gICAgICAgICAgYWJvdXQ6IHVzZXJEYXRhWydqb2ItaW5wdXQnXVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2VFcnJvcilcbiAgfVxuXG4gIHNldFVzZXJBdmF0YXJBcGkodXNlckRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgYXZhdGFyOiB1c2VyRGF0YVsndXJsLWF2YXRhci1pbnB1dCddXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZUVycm9yKVxuICB9XG5cbiAgYWRkQ2FyZChkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS9jYXJkc2AsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgICAgbGluazogZGF0YS5saW5rXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZUVycm9yKVxuICB9XG5cbiAgZGVsZXRlQ2FyZChpZENhcmREZWxldGUpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L2NhcmRzLyR7aWRDYXJkRGVsZXRlfWAsIHtcbiAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlRXJyb3IpXG4gIH1cblxuICBsaWtlc0NhcmQoaWRDYXJkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS9jYXJkcy8ke2lkQ2FyZH0vbGlrZXNgLCB7XG4gICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICB9KVxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZUVycm9yKVxuICB9XG5cbiAgZGlzbGlrZXNDYXJkKGlkQ2FyZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnVybH0vY2FyZHMvJHtpZENhcmR9L2xpa2VzYCwge1xuICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2VFcnJvcilcbiAgfVxuICBnZXRBbGxQcm9taXNlKCkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5nZXRVc2VySW5mb0FwaSgpLCB0aGlzLmdldEluaXRpYWxDYXJkcygpXSlcbiAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnXG5cbmltcG9ydCB7XG4gIHNlbGVjdG9yc0NhcmRzXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuZXhwb3J0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihpdGVtLCBzZWxlY3RvclRlbXBsYXRlLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZUNhcmREZWxldGUsIGhhbmRsZUxpa2VDYXJkLCB1c2VySUQpIHtcbiAgICB0aGlzLl9pdGVtID0gaXRlbTtcbiAgICB0aGlzLl90aXRsZSA9IHRoaXMuX2l0ZW0ubmFtZTtcbiAgICB0aGlzLl9hbHQgPSB0aGlzLl9pdGVtLm5hbWU7XG4gICAgdGhpcy5fc3JjID0gdGhpcy5faXRlbS5saW5rO1xuICAgIHRoaXMuX2lkT3duZXIgPSB0aGlzLl9pdGVtLmlkT3duZXI7XG4gICAgdGhpcy5faWRDYXJkID0gdGhpcy5faXRlbS5pZENhcmRcbiAgICB0aGlzLl9saWtlcyA9IHRoaXMuX2l0ZW0ubGlrZXM7XG4gICAgdGhpcy5fc2VsZWN0b3JUZW1wbGF0ZSA9IHNlbGVjdG9yVGVtcGxhdGU7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUNhcmREZWxldGUgPSBoYW5kbGVDYXJkRGVsZXRlO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VDYXJkID0gaGFuZGxlTGlrZUNhcmQ7XG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklEO1xuICB9XG4gIF9nZXRUZW1wbGF0ZSA9ICgpID0+IHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3JUZW1wbGF0ZSkuY29udGVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yc0NhcmRzLmFydGljbGVDYXJkKS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9XG4gIGdlbmVyYXRlQ2FyZCA9ICgpID0+IHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9idXR0b25MaWtlQ2FyZCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnNDYXJkcy5idXR0b25MaWtlQ2FyZCk7XG4gICAgdGhpcy5fYnV0dG9uRGVsZXRlQ2FyZCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnNDYXJkcy5idXR0b25EZWxldGVDYXJkKTtcbiAgICB0aGlzLl9jb3VudGVyTGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnNDYXJkcy5jb3VudGVyTGlrZSk7XG4gICAgdGhpcy5faW1nQ2FyZCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnNDYXJkcy5pbWdDYXJkKTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzQ2FyZHMudGl0bGVDYXJkKS50ZXh0Q29udGVudCA9IHRoaXMuX3RpdGxlO1xuICAgIHRoaXMuX2ltZ0NhcmQuYWx0ID0gdGhpcy5fdGl0bGU7XG4gICAgdGhpcy5faW1nQ2FyZC5zcmMgPSB0aGlzLl9zcmM7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9jaGVja0lkQ2FyZCgpO1xuICAgIHRoaXMuc2V0TGlrZXMoKTtcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuXG4gIF9jaGVja0lkQ2FyZCA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5faWRPd25lciAmJiAodGhpcy5faWRPd25lciAhPT0gdGhpcy5fdXNlcklkKSkge1xuICAgICAgdGhpcy5fYnV0dG9uRGVsZXRlQ2FyZC5jbGFzc0xpc3QuYWRkKHNlbGVjdG9yc0NhcmRzLmJ1dHRvbkRlbGV0ZUNhcmRJbmFjdGl2ZSlcbiAgICB9XG4gIH1cblxuICBzZXRMaWtlcygpIHtcbiAgICBpZiAodGhpcy5fbGlrZXMpIHtcbiAgICAgIHRoaXMuX2NvdW50ZXJMaWtlLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgICAgdGhpcy5fbGlrZXMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICBpZiAoZWxlbWVudC5faWQgPT09IHRoaXMuX3VzZXJJZCkge1xuICAgICAgICAgIHRoaXMuX2J1dHRvbkxpa2VDYXJkLmNsYXNzTGlzdC5hZGQoc2VsZWN0b3JzQ2FyZHMuYnV0dG9uTGlrZUFjdGl2ZUNhcmQpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIHRoaXMuX2J1dHRvbkRlbGV0ZUNhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlKHRoaXMuX2lkQ2FyZCkpO1xuICAgIHRoaXMuX2J1dHRvbkxpa2VDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlTGlrZSgpKTtcbiAgICB0aGlzLl9pbWdDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX2l0ZW0pKTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlID0gKCkgPT4ge1xuICAgIHRoaXMuX2hhbmRsZUxpa2VDYXJkKHRoaXMuX2J1dHRvbkxpa2VDYXJkLCB0aGlzLl9pZENhcmQsIHRoaXMuX2NvdW50ZXJMaWtlKVxuICB9XG59XG4iLCIndXNlIHN0cmljdCdcbmltcG9ydCB7XG4gIHNlbGVjdG9yc0NhcmRzLFxuICBzZWxlY3RvcnNQb3B1cFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7cG9wdXBTZWxlY3Rvcn1gKTtcbiAgICB0aGlzLl9jbG9zZUljb24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yc0NhcmRzLnBvcFVwQ2xvc2VJY29ucyk7XG4gIH1cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKHNlbGVjdG9yc1BvcHVwLnBvcHVwQWN0aXZlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKHNlbGVjdG9yc1BvcHVwLnBvcHVwQWN0aXZlKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuICBfaGFuZGxlQ2xpY2tJY29uQ2xvc2UgPSAoZXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhzZWxlY3RvcnNQb3B1cC5wb3B1cCkgfHwgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhzZWxlY3RvcnNQb3B1cC5wb3BVcENsb3NlSWNvbikpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9O1xuXG4gIH1cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVDbGlja0ljb25DbG9zZSk7XG4gIH1cbn1cbiIsIid1c2Ugc3RyaWN0J1xuXG5pbXBvcnQge1xuICBQb3B1cFxufSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuaW1wb3J0IHtcbiAgc2VsZWN0b3JzXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yTmFtZSwgc3VibWl0SGFuZGxlcikge1xuICAgIHN1cGVyKHNlbGVjdG9yTmFtZSk7XG4gICAgdGhpcy5zdWJtaXRIYW5kbGVyID0gc3VibWl0SGFuZGxlcjtcbiAgICB0aGlzLmZvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wb3BVcEZvcm0pO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JzLnBvcFVwSW5wdXQpO1xuICAgIHRoaXMuX2lucHV0TmFtZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvcFVwSW5wdXRVc2VyTmFtZSk7XG4gICAgdGhpcy5faW5wdXRVc2VySW5mbyA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvcFVwSW5wdXRVc2VySW5mbyk7XG5cbiAgICB0aGlzLl9wb3BVcEJ1dHRvblNhdmUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wb3BVcEJ1dHRvblNhdmUpO1xuICAgIHRoaXMuX3BvcFVwQnV0dG9uVGV4dENvbnRlbnQgPSB0aGlzLl9wb3BVcEJ1dHRvblNhdmUudGV4dENvbnRlbnQ7XG5cbiAgfVxuICBjbG9zZSgpIHtcbiAgICB0aGlzLmZvcm0ucmVzZXQoKTtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG4gIGdldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gIH1cbiAgc2V0SW5wdXRWYWx1ZXModmFsdWVzKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICAvLyDRgtGD0YIg0LLRgdGC0LDQstC70Y/QtdC8INCyIGB2YWx1ZWAg0LjQvdC/0YPRgtCwINC00LDQvdC90YvQtSDQuNC3INC+0LHRitC10LrRgtCwINC/0L4g0LDRgtGA0LjQsdGD0YLRgyBgbmFtZWAg0Y3RgtC+0LPQviDQuNC90L/Rg9GC0LBcbiAgICAgIGlucHV0LnZhbHVlID0gdmFsdWVzW2lucHV0Lm5hbWVdO1xuICAgIH0pO1xuICB9XG5cblxuXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nKSB7XG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgdGhpcy5fcG9wVXBCdXR0b25TYXZlLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcG9wVXBCdXR0b25TYXZlLnRleHRDb250ZW50ID0gdGhpcy5fcG9wVXBCdXR0b25UZXh0Q29udGVudDtcbiAgICB9XG4gIH1cblxuXG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLmZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnN1Ym1pdEhhbmRsZXIodGhpcy5nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgfVxuXG59XG4iLCIndXNlIHN0cmljdCdcblxuaW1wb3J0IHtcbiAgUG9wdXBcbn0gZnJvbSBcIi4vUG9wdXAuanNcIjtcbmltcG9ydCB7XG4gIHNlbGVjdG9yc0NhcmRzXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xuICAgIHN1cGVyKHNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihzZWxlY3RvcnNDYXJkcy5wb3BVcFZpZXdJbWcpO1xuICAgIHRoaXMuX2ltYWdlTmFtZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzQ2FyZHMucG9wVXBWaWV3Q2FyZFRpdGxlKTtcbiAgfVxuXG4gIG9wZW4obGluaywgbmFtZSkge1xuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IG5hbWU7XG4gICAgdGhpcy5faW1hZ2VOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKClcbiAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnXG5cbmV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIHJlbmRlcmVyXG4gIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIGFkZEl0ZW0oY2FyZCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoY2FyZCk7XG4gIH1cblxuICBwcmVwZW5kSXRlbShjYXJkKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoY2FyZCk7XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gIH1cblxuICByZW5kZXJJdGVtcyhjYXJkcykge1xuICAgIHRoaXMuY2xlYXIoKTtcbiAgICBjYXJkcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsIid1c2Ugc3RyaWN0J1xuZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIHNlbGVjdG9yc1VzZXJcbiAgfSkge1xuICAgIHRoaXMuX3NlbGVjdG9yc1VzZXIgPSBzZWxlY3RvcnNVc2VyO1xuICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcnNVc2VyLm5hbWUpO1xuICAgIHRoaXMuX3VzZXJKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9yc1VzZXIuYWJvdXQpO1xuICAgIHRoaXMuX3VzZXJBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9yc1VzZXIuYXZhdGFyKTtcbiAgICB0aGlzLl9uYW1lSW5wdXROYW1lID0gdGhpcy5fc2VsZWN0b3JzVXNlci51c2VyTmFtZUlucHV0O1xuICAgIHRoaXMuX2pvYklucHV0TmFtZSA9IHRoaXMuX3NlbGVjdG9yc1VzZXIuam9iSW5wdXROYW1lO1xuICAgIHRoaXMuX2F2YXRhcklucHV0TmFtZSA9IHRoaXMuX3NlbGVjdG9yc1VzZXIuYXZhdGFySW5wdXROYW1lO1xuICB9XG4gIGdldFVzZXJJbmZvID0gKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBbdGhpcy5fbmFtZUlucHV0TmFtZV06IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50LFxuICAgICAgW3RoaXMuX2pvYklucHV0TmFtZV06IHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnRcbiAgICB9XG4gIH1cblxuICBzZXRVc2VySW5mbyA9ICh2YWx1ZXMpID0+IHtcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IHZhbHVlc1t0aGlzLl9uYW1lSW5wdXROYW1lXSB8fCB2YWx1ZXNbJ25hbWUnXTtcbiAgICB0aGlzLl91c2VySm9iLnRleHRDb250ZW50ID0gdmFsdWVzW3RoaXMuX2pvYklucHV0TmFtZV0gfHwgdmFsdWVzWydhYm91dCddO1xuICB9XG5cbiAgc2V0VXNlckF2YXRhciA9IChkYXRhKSA9PiB7XG4gICAgdGhpcy5fdXNlckF2YXRhci5zcmMgPSBkYXRhLmF2YXRhciB8fCBkYXRhW3RoaXMuX2F2YXRhcklucHV0TmFtZV07XG4gIH1cbn1cbiIsIid1c2Ugc3RyaWN0J1xuXG5leHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGZvcm1FbGVtZW50LCBzZWxlY3RvcnMpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX3NlbGVjdG9ycyA9IHNlbGVjdG9ycztcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2VsZWN0b3JzLmlucHV0U2VsZWN0b3IpKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG4gIF9zaG93SW5wdXRFcnJvciA9ICgpID0+IHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZWxlY3RvcnMuaW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl9lcnJvck1lc3NhZ2U7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2VsZWN0b3JzLmVycm9yQ2xhc3MpO1xuICB9O1xuICBfaGlkZUlucHV0RXJyb3IgPSAoKSA9PiB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2VsZWN0b3JzLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2VsZWN0b3JzLmVycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICB9O1xuICBfaXNWYWxpZCA9ICgpID0+IHtcbiAgICBpZiAoIXRoaXMuX2lucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoKTtcbiAgICB9XG4gIH07XG4gIF9oYXNJbnZhbGlkSW5wdXQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9O1xuICBfZW5hYmxlU3VibWl0QnV0dG9uID0gKCkgPT4ge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZWxlY3RvcnMuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gIH1cbiAgX2Rpc2FibGVTdWJtaXRCdXR0b24gPSAoKSA9PiB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NlbGVjdG9ycy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgfVxuICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9lbmFibGVTdWJtaXRCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICAgIH1cbiAgfVxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9pbnB1dEVsZW1lbnQgPSBpbnB1dEVsZW1lbnQ7XG4gICAgICB0aGlzLl9lcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLl9pbnB1dEVsZW1lbnQubmFtZX0tZXJyb3JgKTtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKCk7XG4gICAgfSk7XG4gIH1cbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLl9pbnB1dEVsZW1lbnQgPSBpbnB1dEVsZW1lbnQ7XG4gICAgICAgIHRoaXMuX2Vycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke3RoaXMuX2lucHV0RWxlbWVudC5uYW1lfS1lcnJvcmApO1xuICAgICAgICB0aGlzLl9lcnJvck1lc3NhZ2UgPSB0aGlzLl9pbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgICAgIHRoaXMuX2lzVmFsaWQoKTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pXG4gIH07XG4gIGVuYWJsZVZhbGlkYXRpb24gPSAoKSA9PiB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnXG5cbmltcG9ydCB7XG4gIFBvcHVwXG59IGZyb20gXCIuL1BvcHVwLmpzXCI7XG5pbXBvcnQge1xuICBzZWxlY3RvcnNcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihzZWxlY3Rvck5hbWUsIHN1Ym1pdEhhbmRsZXIpIHtcbiAgICBzdXBlcihzZWxlY3Rvck5hbWUpO1xuICAgIHRoaXMuZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvcFVwRm9ybSk7XG4gICAgdGhpcy5fcG9wVXBCdXR0b25TYXZlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMucG9wVXBCdXR0b25TYXZlKTtcbiAgICB0aGlzLl9wb3BVcEJ1dHRvblRleHRDb250ZW50ID0gdGhpcy5fcG9wVXBCdXR0b25TYXZlLnRleHRDb250ZW50O1xuICAgIHRoaXMuc3VibWl0SGFuZGxlciA9IHN1Ym1pdEhhbmRsZXI7XG4gIH1cblxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX3BvcFVwQnV0dG9uU2F2ZS50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3BvcFVwQnV0dG9uU2F2ZS50ZXh0Q29udGVudCA9IHRoaXMuX3BvcFVwQnV0dG9uVGV4dENvbnRlbnQ7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoaWRDYXJkRGVsZXRlKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLmZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnN1Ym1pdEhhbmRsZXIoaWRDYXJkRGVsZXRlKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgc2VsZWN0b3JzLFxuICBzZWxlY3RvcnNDYXJkcyxcbiAgc2VsZWN0b3JzVXNlcixcbiAgc2VsZWN0b3JzVmFsaWRhdGlvblxufSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xuaW1wb3J0IHtcbiAgQXBpXG59IGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcbmltcG9ydCB7XG4gIENhcmRcbn0gZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcbmltcG9ydCB7XG4gIFBvcHVwV2l0aEZvcm1cbn0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCB7XG4gIFBvcHVwV2l0aEltYWdlXG59IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xuaW1wb3J0IHtcbiAgU2VjdGlvblxufSBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IHtcbiAgVXNlckluZm9cbn0gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQge1xuICBGb3JtVmFsaWRhdG9yXG59IGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQge1xuICBQb3B1cFdpdGhDb25maXJtYXRpb25cbn0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMnO1xuXG5pbXBvcnQgJy4vaW5kZXguY3NzJztcblxuY29uc3QgdXNlckF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzVXNlci5hdmF0YXJXcmFwcGVyKTtcbmNvbnN0IHByb2ZpbGVCdXR0b25FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMucHJvZmlsZUJ1dHRvbkVkaXQpO1xuY29uc3QgYnV0dG9uQWRkTmV3Q2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmJ1dHRvbkFkZE5ld0NhcmQpO1xuY29uc3QgZm9ybUVkaXRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuZm9ybUVkaXRQcm9maWxlKTtcbmNvbnN0IGZvcm1BZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuZm9ybUFkZENhcmQpO1xuY29uc3QgZm9ybUVkaXRBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5mb3JtQXZhdGFyUHJvZmlsZSk7XG5cbmxldCB1c2VySUQgPSBudWxsO1xuXG5jb25zdCBwcm9maWxlVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUVkaXRQcm9maWxlLCBzZWxlY3RvcnNWYWxpZGF0aW9uKTtcbnByb2ZpbGVWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBjYXJkVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUFkZENhcmQsIHNlbGVjdG9yc1ZhbGlkYXRpb24pO1xuY2FyZFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGF2YXRhclByb2ZpbGVWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtRWRpdEF2YXRhciwgc2VsZWN0b3JzVmFsaWRhdGlvbik7XG5hdmF0YXJQcm9maWxlVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgcHJvZmlsZUluZm8gPSBuZXcgVXNlckluZm8oe1xuICBzZWxlY3RvcnNVc2VyXG59KTtcblxuY29uc3Qgb3B0aW9ucyA9IHtcbiAgdXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC01MScsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiAnZDRjNDE2NmQtN2RhMS00MWU1LTljMTItNmFkYTkwNTIzMmFmJyxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhQ2FyZCkge1xuICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoZGF0YUNhcmQsIHNlbGVjdG9yc0NhcmRzLnRlbXBsYXRlQ2FyZCwgb3BlbkltYWdlLCBoYW5kbGVDYXJkRGVsZXRlLCBoYW5kbGVMaWtlQ2FyZCwgdXNlcklEKVxuICByZXR1cm4gbmV3Q2FyZC5nZW5lcmF0ZUNhcmQoKTtcbn1cblxuY29uc3QgZGF0YUFwaSA9IG5ldyBBcGkob3B0aW9ucyk7XG5cbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oe1xuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgbmV3Q2FyZEFwaSA9IGNyZWF0ZUNhcmQoe1xuICAgICAgICBuYW1lOiBpdGVtLm5hbWUsXG4gICAgICAgIGxpbms6IGl0ZW0ubGluayxcbiAgICAgICAgaWRPd25lcjogaXRlbS5vd25lci5faWQsXG4gICAgICAgIGlkQ2FyZDogaXRlbS5faWQsXG4gICAgICAgIGxpa2VzOiBpdGVtLmxpa2VzXG4gICAgICB9KTtcbiAgICAgIGNhcmRMaXN0LmFkZEl0ZW0obmV3Q2FyZEFwaSk7XG4gICAgfVxuICB9LFxuICBzZWxlY3RvcnNDYXJkcy5zZWN0aW9uQ2FyZHNcbik7XG5cbmNvbnN0IHBvcHVwQ29uZmlybURlbGV0ZSA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oc2VsZWN0b3JzLnBvcHVwQ29uZmlybSwgKGlkQ2FyZERlbGV0ZSkgPT4ge1xuICBoYW5kbGVDb25maXJtQ2FyZERlbGV0ZShpZENhcmREZWxldGUpXG59KTtcblxuY29uc3QgcG9wVXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uoc2VsZWN0b3JzQ2FyZHMucG9wVXBWaWV3Q2FyZCk7XG5cbmZ1bmN0aW9uIG5ld1BvcHVwV2l0aEZvcm0oc2VsZWN0b3JzLCBwb3BVcCwgYXBpTWV0aG9kKSB7XG4gIHBvcFVwID0gbmV3IFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JzLCAoaW5wdXRWYWx1ZXMpID0+IHtcbiAgICBwb3BVcC5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICAgIGRhdGFBcGlbYXBpTWV0aG9kXShpbnB1dFZhbHVlcylcbiAgICAgIC50aGVuKCgpID0+IGdldERhdGFBbGxQcm9taXNlKCkpXG4gICAgICAudGhlbihwb3BVcC5jbG9zZSgpKVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8g0LLRi9Cy0LXQtNC10Lwg0L7RiNC40LHQutGDINCyINC60L7QvdGB0L7Qu9GMXG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBwb3BVcC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIHBvcFVwXG59XG5jb25zdCBwcm9maWxlUG9wVXAgPSBuZXdQb3B1cFdpdGhGb3JtKHNlbGVjdG9ycy5wb3BVcEVkaXRQcm9maWxlLCBwcm9maWxlUG9wVXAsICdzZXRVc2VySW5mb0FwaScpO1xuY29uc3QgYXZhdGFyUG9wVXAgPSBuZXdQb3B1cFdpdGhGb3JtKHNlbGVjdG9ycy5wb3BVcEF2YXRhciwgYXZhdGFyUG9wVXAsICdzZXRVc2VyQXZhdGFyQXBpJyk7XG5jb25zdCBhZGRDYXJkUG9wVXAgPSBuZXcgUG9wdXBXaXRoRm9ybShzZWxlY3RvcnMucG9wVXBBZGRDYXJkLCAoZGF0YSkgPT4ge1xuICBhZGRDYXJkUG9wVXAucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgY29uc3QgbmV3RGF0YSA9IHtcbiAgICBuYW1lOiBkYXRhW3NlbGVjdG9ycy5jYXJkTmFtZUlucHV0XSxcbiAgICBsaW5rOiBkYXRhW3NlbGVjdG9ycy5jYXJkTGlua0lucHV0XVxuICB9O1xuICBkYXRhQXBpLmFkZENhcmQobmV3RGF0YSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBnZXREYXRhQWxsUHJvbWlzZSgpXG4gICAgfSlcbiAgICAudGhlbigoKSA9PiBhZGRDYXJkUG9wVXAuY2xvc2UoKSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBhZGRDYXJkUG9wVXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgfSk7XG59KTtcblxuZnVuY3Rpb24gZ2V0RGF0YUFsbFByb21pc2UoKSB7XG4gIGRhdGFBcGkuZ2V0QWxsUHJvbWlzZSgpXG4gICAgLnRoZW4oKFtkYXRhLCBkYXRhQ2FyZHNdKSA9PiB7XG4gICAgICBwcm9maWxlSW5mby5zZXRVc2VySW5mbyhkYXRhKTtcbiAgICAgIHByb2ZpbGVJbmZvLnNldFVzZXJBdmF0YXIoZGF0YSk7XG4gICAgICB1c2VySUQgPSBkYXRhLl9pZDtcbiAgICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKGRhdGFDYXJkcyk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KVxufVxuZ2V0RGF0YUFsbFByb21pc2UoKTtcblxuZnVuY3Rpb24gaGFuZGxlTGlrZUNhcmQoYnV0dG9uLCBpZENhcmQsIGNvdW50ZXJMaWtlKSB7XG4gIGlmIChidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKHNlbGVjdG9yc0NhcmRzLmJ1dHRvbkxpa2VBY3RpdmVDYXJkKSkge1xuICAgIGRhdGFBcGkuZGlzbGlrZXNDYXJkKGlkQ2FyZClcbiAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShzZWxlY3RvcnNDYXJkcy5idXR0b25MaWtlQWN0aXZlQ2FyZCk7XG4gICAgICAgIGNvdW50ZXJMaWtlLnRleHRDb250ZW50ID0gZGF0YS5saWtlcy5sZW5ndGg7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8g0LLRi9Cy0LXQtNC10Lwg0L7RiNC40LHQutGDINCyINC60L7QvdGB0L7Qu9GMXG4gICAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBkYXRhQXBpLmxpa2VzQ2FyZChpZENhcmQpXG4gICAgICAudGhlbihkYXRhID0+IHtcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoc2VsZWN0b3JzQ2FyZHMuYnV0dG9uTGlrZUFjdGl2ZUNhcmQpO1xuICAgICAgICBjb3VudGVyTGlrZS50ZXh0Q29udGVudCA9IGRhdGEubGlrZXMubGVuZ3RoO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7IC8vINCy0YvQstC10LTQtdC8INC+0YjQuNCx0LrRgyDQsiDQutC+0L3RgdC+0LvRjFxuICAgICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlQ2FyZERlbGV0ZShpZENhcmREZWxldGUpIHtcbiAgcG9wdXBDb25maXJtRGVsZXRlLm9wZW4oKTtcbiAgcG9wdXBDb25maXJtRGVsZXRlLnNldEV2ZW50TGlzdGVuZXJzKGlkQ2FyZERlbGV0ZSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNvbmZpcm1DYXJkRGVsZXRlKGlkQ2FyZERlbGV0ZSkge1xuICBwb3B1cENvbmZpcm1EZWxldGUucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgZGF0YUFwaS5kZWxldGVDYXJkKGlkQ2FyZERlbGV0ZSlcbiAgICAudGhlbigoKSA9PiBnZXREYXRhQWxsUHJvbWlzZSgpKVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHBvcHVwQ29uZmlybURlbGV0ZS5jbG9zZSgpO1xuICAgICAgcG9wdXBDb25maXJtRGVsZXRlLnJlbmRlckxvYWRpbmcoZmFsc2UpXG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8g0LLRi9Cy0LXQtNC10Lwg0L7RiNC40LHQutGDINCyINC60L7QvdGB0L7Qu9GMXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIG9wZW5JbWFnZShpdGVtKSB7XG4gIHBvcFVwV2l0aEltYWdlLm9wZW4oaXRlbS5saW5rLCBpdGVtLm5hbWUpO1xufVxuXG5idXR0b25BZGROZXdDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBhZGRDYXJkUG9wVXAub3BlbigpO1xuICBjYXJkVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xufSk7XG5cbnByb2ZpbGVCdXR0b25FZGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBjb25zdCB1c2VySW5mbyA9IHByb2ZpbGVJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVQb3BVcC5zZXRJbnB1dFZhbHVlcyh1c2VySW5mbyk7XG4gIHByb2ZpbGVWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIHByb2ZpbGVQb3BVcC5vcGVuKCk7XG59KTtcblxudXNlckF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgYXZhdGFyUG9wVXAub3BlbigpO1xuICBhdmF0YXJQcm9maWxlVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpXG59KVxuYXZhdGFyUG9wVXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmFkZENhcmRQb3BVcC5zZXRFdmVudExpc3RlbmVycygpO1xucHJvZmlsZVBvcFVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cENvbmZpcm1EZWxldGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcFVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4iXSwibmFtZXMiOlsic2VsZWN0b3JzVXNlciIsIm5hbWUiLCJhYm91dCIsImF2YXRhciIsImF2YXRhcldyYXBwZXIiLCJ1c2VyTmFtZUlucHV0Iiwiam9iSW5wdXROYW1lIiwiYXZhdGFySW5wdXROYW1lIiwic2VsZWN0b3JzIiwic2VsZWN0b3JzUG9wdXAiLCJzZWxlY3RvcnNDYXJkcyIsInNlbGVjdG9yc1ZhbGlkYXRpb24iLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIkFwaSIsIm9wdGlvbnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwidGhpcyIsInVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsIl9jaGVja1Jlc3BvbnNlRXJyb3IiLCJ1c2VyRGF0YSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsImxpbmsiLCJpZENhcmREZWxldGUiLCJpZENhcmQiLCJhbGwiLCJnZXRVc2VySW5mb0FwaSIsImdldEluaXRpYWxDYXJkcyIsIkNhcmQiLCJpdGVtIiwic2VsZWN0b3JUZW1wbGF0ZSIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUNhcmREZWxldGUiLCJoYW5kbGVMaWtlQ2FyZCIsInVzZXJJRCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIl9zZWxlY3RvclRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2J1dHRvbkxpa2VDYXJkIiwiX2J1dHRvbkRlbGV0ZUNhcmQiLCJfY291bnRlckxpa2UiLCJfaW1nQ2FyZCIsInRleHRDb250ZW50IiwiX3RpdGxlIiwiYWx0Iiwic3JjIiwiX3NyYyIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jaGVja0lkQ2FyZCIsInNldExpa2VzIiwiX2lkT3duZXIiLCJfdXNlcklkIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVDYXJkRGVsZXRlIiwiX2lkQ2FyZCIsIl9oYW5kbGVMaWtlIiwiX2hhbmRsZUNhcmRDbGljayIsIl9pdGVtIiwiX2hhbmRsZUxpa2VDYXJkIiwiX2FsdCIsImlkT3duZXIiLCJfbGlrZXMiLCJsaWtlcyIsImxlbmd0aCIsImZvckVhY2giLCJlbGVtZW50IiwiX2lkIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiZXZlbnQiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwiX3BvcHVwIiwiX2Nsb3NlSWNvbiIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlQ2xpY2tJY29uQ2xvc2UiLCJQb3B1cFdpdGhGb3JtIiwic2VsZWN0b3JOYW1lIiwic3VibWl0SGFuZGxlciIsImZvcm0iLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9pbnB1dE5hbWUiLCJfaW5wdXRVc2VySW5mbyIsIl9wb3BVcEJ1dHRvblNhdmUiLCJfcG9wVXBCdXR0b25UZXh0Q29udGVudCIsInJlc2V0IiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwidmFsdWVzIiwiaXNMb2FkaW5nIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJnZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aEltYWdlIiwic2VsZWN0b3IiLCJfcG9wdXBJbWFnZSIsIl9pbWFnZU5hbWUiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJjYXJkIiwiYXBwZW5kIiwicHJlcGVuZCIsImlubmVySFRNTCIsImNhcmRzIiwiY2xlYXIiLCJVc2VySW5mbyIsIl9uYW1lSW5wdXROYW1lIiwiX3VzZXJOYW1lIiwiX2pvYklucHV0TmFtZSIsIl91c2VySm9iIiwiX3VzZXJBdmF0YXIiLCJfYXZhdGFySW5wdXROYW1lIiwiX3NlbGVjdG9yc1VzZXIiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRFbGVtZW50IiwiX3NlbGVjdG9ycyIsIl9lcnJvckVsZW1lbnQiLCJfZXJyb3JNZXNzYWdlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInNvbWUiLCJpbnB1dEVsZW1lbnQiLCJfYnV0dG9uRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfZW5hYmxlU3VibWl0QnV0dG9uIiwiX2Rpc2FibGVTdWJtaXRCdXR0b24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfZm9ybUVsZW1lbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9pc1ZhbGlkIiwiQXJyYXkiLCJmcm9tIiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwidXNlckF2YXRhciIsInByb2ZpbGVCdXR0b25FZGl0IiwiYnV0dG9uQWRkTmV3Q2FyZCIsImZvcm1FZGl0UHJvZmlsZSIsImZvcm1BZGRDYXJkIiwiZm9ybUVkaXRBdmF0YXIiLCJwcm9maWxlVmFsaWRhdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsImNhcmRWYWxpZGF0b3IiLCJhdmF0YXJQcm9maWxlVmFsaWRhdG9yIiwicHJvZmlsZUluZm8iLCJkYXRhQXBpIiwiYXV0aG9yaXphdGlvbiIsImNhcmRMaXN0IiwiZGF0YUNhcmQiLCJuZXdDYXJkQXBpIiwib3duZXIiLCJvcGVuSW1hZ2UiLCJnZW5lcmF0ZUNhcmQiLCJhZGRJdGVtIiwicG9wdXBDb25maXJtRGVsZXRlIiwicmVuZGVyTG9hZGluZyIsImRlbGV0ZUNhcmQiLCJnZXREYXRhQWxsUHJvbWlzZSIsImZpbmFsbHkiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJoYW5kbGVDb25maXJtQ2FyZERlbGV0ZSIsInBvcFVwV2l0aEltYWdlIiwibmV3UG9wdXBXaXRoRm9ybSIsInBvcFVwIiwiYXBpTWV0aG9kIiwiaW5wdXRWYWx1ZXMiLCJwcm9maWxlUG9wVXAiLCJhdmF0YXJQb3BVcCIsImFkZENhcmRQb3BVcCIsIm5ld0RhdGEiLCJhZGRDYXJkIiwiZ2V0QWxsUHJvbWlzZSIsImRhdGFDYXJkcyIsInNldFVzZXJJbmZvIiwic2V0VXNlckF2YXRhciIsInJlbmRlckl0ZW1zIiwiYnV0dG9uIiwiY291bnRlckxpa2UiLCJkaXNsaWtlc0NhcmQiLCJsaWtlc0NhcmQiLCJvcGVuIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJyZXNldFZhbGlkYXRpb24iLCJ1c2VySW5mbyIsImdldFVzZXJJbmZvIiwic2V0SW5wdXRWYWx1ZXMiXSwic291cmNlUm9vdCI6IiJ9