(()=>{"use strict";var e={name:".profile__user",about:".profile__user-job",avatar:".profile__avatar",avatarWrapper:".profile__img-wrapper"},t=".pop-up__form",n=".pop-up__button-save",r="pop-up_active",o=".cards",i=".card__button-delete",u=".card__button-like",a="card__button-like_active",c={formSelector:".pop-up__form",inputSelector:".pop-up__input",submitButtonSelector:".pop-up__button",inactiveButtonClass:"pop-up__button_inactive",inputErrorClass:"pop-up__input_type_error",errorClass:"pop-up__error_visible"};function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))},(n="_checkResponseError")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this.url=t.url,this._headers=t.headers}var t,n;return t=e,(n=[{key:"getUserInfoApi",value:function(){var e=this;return fetch(this.url+"/users/me",{method:"GET",headers:this._headers}).then((function(t){return e._checkResponseError(t)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this.url,"/cards"),{method:"GET",headers:this._headers}).then((function(t){return e._checkResponseError(t)}))}},{key:"setUserInfoApi",value:function(e){var t=this;return fetch("".concat(this.url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e["name-input"],about:e["job-input"]})}).then((function(e){return t._checkResponseError(e)}))}},{key:"setUserAvatarApi",value:function(e){var t=this;return fetch("".concat(this.url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e["url-avatar-input"]})}).then((function(e){return t._checkResponseError(e)}))}},{key:"addCard",value:function(e){var t=this;return fetch("".concat(this.url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t._checkResponseError(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this.url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._checkResponseError(e)}))}},{key:"likesCard",value:function(e){var t=this;return fetch("".concat(this.url,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then((function(e){return t._checkResponseError(e)}))}},{key:"dislikesCard",value:function(e){var t=this;return fetch("".concat(this.url,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then((function(e){return t._checkResponseError(e)}))}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=f((function e(t,n,r,o,c,s){var l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"_getTemplate",(function(){return document.querySelector(l._selectorTemplate).content.querySelector(".card").cloneNode(!0)})),d(this,"generateCard",(function(){return l._element=l._getTemplate(),l._buttonLikeCard=l._element.querySelector(u),l._counterLike=l._element.querySelector(".card__like-counter"),l._imgCard=l._element.querySelector(".card__image"),l._element.querySelector(".card__title").textContent=l._title,l._imgCard.alt=l._title,l._imgCard.src=l._src,l._buttonLikeCard=l._element.querySelector(u),l._setEventListeners(),l._likes&&(l._counterLike.textContent=l._likes.length,l._likes.forEach((function(e){if(e._id===l._userId)return l._buttonLikeCard.classList.add(a)}))),l._idOwner!==l._userId&&l._element.querySelector(i).classList.add("card__button-delete_inactive"),l._element})),d(this,"_setEventListeners",(function(){l._element.querySelector(i).addEventListener("click",(function(){return l._handleCardDelete(l._element,l._idCard)})),l._buttonLikeCard.addEventListener("click",(function(){return l._handleLike()})),l._imgCard.addEventListener("click",(function(){return l._handleCardClick(l._item)}))})),d(this,"_handleLike",(function(){l._buttonLikeCard.classList.contains(a)?l._dataApi.dislikesCard(l._idCard).then((function(e){l._buttonLikeCard.classList.remove(a),l._counterLike.textContent=e.likes.length})).catch((function(e){console.log(e)})):l._dataApi.likesCard(l._idCard).then((function(e){l._buttonLikeCard.classList.add(a),l._counterLike.textContent=e.likes.length})).catch((function(e){console.log(e)}))})),this._item=t,this._title=this._item.name,this._alt=this._item.name,this._src=this._item.link,this._idOwner=this._item.idOwner,this._idCard=this._item.idCard,this._likes=this._item.likes,this._selectorTemplate=n,this._handleCardClick=r,this._handleCardDelete=o,this._userId=s,this._dataApi=c}));function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),y(this,"_handleClickIconClose",(function(e){(e.target.classList.contains("pop-up")||e.target.classList.contains("pop-up__close-icon"))&&n.close()})),this._popup=document.querySelector("".concat(t)),this._closeIcon=this._popup.querySelector(".pop-up__close-icon")}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add(r),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove(r),document.removeEventListener("keyup",this._handleEscClose)}},{key:"setEventListeners",value:function(){this._popup.addEventListener("click",this._handleClickIconClose)}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=E(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},g.apply(this,arguments)}function E(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function w(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(c,e);var r,o,i,u,a=(i=c,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(i);if(u){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function c(e,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(o=a.call(this,e)).submitHandler=r,o.form=o._popup.querySelector(t),o._inputList=o._popup.querySelectorAll(".pop-up__input"),o._inputName=o._popup.querySelector(".pop-up__input_user-name"),o._inputUserInfo=o._popup.querySelector(".pop-up__input_user-job"),o._popUpButtonSave=o._popup.querySelector(n),o._popUpButtonTextContent=o._popUpButtonSave.textContent,o}return r=c,(o=[{key:"close",value:function(){this.form.reset(),g(C(c.prototype),"close",this).call(this)}},{key:"getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"renderLoading",value:function(e){this._popUpButtonSave.textContent=e?"Сохранение...":this._popUpButtonTextContent}},{key:"setEventListeners",value:function(){var e=this;g(C(c.prototype),"setEventListeners",this).call(this),this.form.addEventListener("submit",(function(t){t.preventDefault(),e.submitHandler(e.getInputValues())}))}}])&&v(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),c}(b);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=P(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},j.apply(this,arguments)}function P(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}function R(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(r);if(o){var n=q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return R(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._popupImage=t._popup.querySelector(".pop-up__view-img"),t._imageName=t._popup.querySelector(".pop-up__title-view-img"),t}return t=u,(n=[{key:"open",value:function(e,t){this._popupImage.src=e,this._popupImage.alt=t,this._imageName.textContent=t,j(q(u.prototype),"open",this).call(this)}}])&&L(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(b);function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"prependItem",value:function(e){this._container.prepend(e)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(){var e=this;this.clear(),this._renderedItems.forEach((function(t){e._renderer(t)}))}}])&&U(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t,n){return t&&x(e.prototype,t),n&&x(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=A((function e(t){var n=this,r=t.selectorsUser;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),V(this,"getUserInfo",(function(){return{"name-input":n._userName.textContent,"job-input":n._userJob.textContent}})),V(this,"setUserInfo",(function(e){n._userName.textContent=e["name-input"]||e.name,n._userJob.textContent=e["job-input"]||e.about})),V(this,"setUserAvatar",(function(e){n._userAvatar.src=e.avatar||e["url-avatar-input"]})),this._selectorsUser=r,this._userName=document.querySelector(this._selectorsUser.name),this._userJob=document.querySelector(this._selectorsUser.about),this._userAvatar=document.querySelector(this._selectorsUser.avatar)}));function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),H(this,"_showInputError",(function(){r._inputElement.classList.add(r._selectors.inputErrorClass),r._errorElement.textContent=r._errorMessage,r._errorElement.classList.add(r._selectors.errorClass)})),H(this,"_hideInputError",(function(){r._inputElement.classList.remove(r._selectors.inputErrorClass),r._errorElement.classList.remove(r._selectors.errorClass),r._errorElement.textContent=""})),H(this,"_isValid",(function(){r._inputElement.validity.valid?r._hideInputError():r._showInputError()})),H(this,"_hasInvalidInput",(function(){return r._inputList.some((function(e){return!e.validity.valid}))})),H(this,"_enableSubmitButton",(function(){r._buttonElement.classList.add(r._selectors.inactiveButtonClass),r._buttonElement.setAttribute("disabled","disabled")})),H(this,"_disableSubmitButton",(function(){r._buttonElement.classList.remove(r._selectors.inactiveButtonClass),r._buttonElement.removeAttribute("disabled")})),H(this,"_toggleButtonState",(function(){r._hasInvalidInput()?r._enableSubmitButton():r._disableSubmitButton()})),H(this,"_setEventListeners",(function(){r._toggleButtonState(),r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._inputElement=e,r._errorElement=r._formElement.querySelector(".".concat(r._inputElement.name,"-error")),r._errorMessage=r._inputElement.validationMessage,r._isValid(),r._toggleButtonState()}))}))})),H(this,"enableValidation",(function(){r._setEventListeners()})),this._formElement=t,this._selectors=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._selectors.inputSelector)),this._buttonElement=this._formElement.querySelector(n.submitButtonSelector)}var t,n;return t=e,(n=[{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._inputElement=t,e._errorElement=e._formElement.querySelector(".".concat(e._inputElement.name,"-error")),e._hideInputError()}))}}])&&N(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(){return W="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=z(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},W.apply(this,arguments)}function z(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Q(e)););return e}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}function K(e,t){if(t&&("object"===M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(c,e);var r,o,i,u,a=(i=c,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Q(i);if(u){var n=Q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return K(this,e)});function c(e,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(o=a.call(this,e)).form=o._popup.querySelector(t),o._popUpButtonSave=o._popup.querySelector(n),o._popUpButtonTextContent=o._popUpButtonSave.textContent,o.submitHandler=r,o}return r=c,(o=[{key:"renderLoading",value:function(e){this._popUpButtonSave.textContent=e?"Сохранение...":this._popUpButtonTextContent}},{key:"setEventListeners",value:function(){var e=this;W(Q(c.prototype),"setEventListeners",this).call(this),this.form.addEventListener("submit",(function(t){t.preventDefault(),e.submitHandler()}))}}])&&G(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),c}(b),Y=document.querySelector(e.avatarWrapper),Z=document.querySelector(".profile__button_edit"),$=document.querySelector(".profile__button_add"),ee=document.querySelector(".pop-up__form-edit-profile"),te=document.querySelector(".pop-up__form-add-card"),ne=document.querySelector(".pop-up__form-edit-avatar"),re=new J(ee,c);re.enableValidation();var oe=new J(te,c);oe.enableValidation();var ie=new J(ne,c);ie.enableValidation();var ue=new D({selectorsUser:e}),ae=null,ce=new l({url:"https://mesto.nomoreparties.co/v1/cohort-51",headers:{authorization:"d4c4166d-7da1-41e5-9c12-6ada905232af","Content-Type":"application/json"}});function se(e){return new _(e,"#template-card",he,pe,ce,ae).generateCard()}ce.getUserInfoApi().then((function(e){ue.setUserInfo(e),ue.setUserAvatar(e),ae=e._id})).catch((function(e){console.log(e)}));var le={};function pe(e,t){return fe.open(),fe.setEventListeners(),le.element=e,le.idCardDelete=t,le}var fe=new X(".pop-up_delete-card",(function(){fe.renderLoading(!0),ce.deleteCard(le.idCardDelete).finally((function(){return fe.renderLoading(!1)})).catch((function(e){console.log(e)})),fe.close(),le.element.remove()})),de=new B({items:se,renderer:function(e){return se(e)}},o),_e=new O(".pop-up_add-card",(function(e){_e.renderLoading(!0);var t={name:e["name-card-input"],link:e["url-input"]},n=se(t);ce.addCard(t).finally((function(){return _e.renderLoading(!1)})),_e.close(),de.prependItem(n)}));function he(e){ye.open(e.link,e.name)}_e.setEventListeners(),$.addEventListener("click",(function(){_e.open(),oe.resetValidation()}));var ye=new T(".pop-up_view-card");ye.setEventListeners();var be=new O(".pop-up_edit-profile",(function(e){be.renderLoading(!0),ce.setUserInfoApi(e).finally((function(){return be.renderLoading(!1)})),ue.setUserInfo(e),be.close()}));be.setEventListeners(),Z.addEventListener("click",(function(){be.open();var e=ue.getUserInfo();be.setInputValues(e),re.resetValidation()}));var me=new O(".pop-up_edit-avatar",(function(e){me.renderLoading(!0),ce.setUserAvatarApi(e).finally((function(){return fe.renderLoading(!1)})).catch((function(e){console.log(e)})),ue.setUserAvatar(e),me.close()}));Y.addEventListener("click",(function(){me.open(),ie.resetValidation()})),me.setEventListeners(),ce.getInitialCards().then((function(e){var t=new B({items:e,renderer:function(e){var n=se({name:e.name,link:e.link,idOwner:e.owner._id,idCard:e._id,likes:e.likes});t.addItem(n)}},o);t.renderItems(e)})).catch((function(e){console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0ssaUJBQWlCTixHQUN0QlQsU0FBUSxrQkFBTUwsR0FBbUJHLGVBQWMsRUFBdkMsSUFDUnpHLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsRUFDYixJQUNINEYsR0FBWU8sY0FBY2dCLEdBQzFCSyxHQUFZOUcsT0FDYixJQUVEd0UsRUFBVzlGLGlCQUFpQixTQUFTLFdBQ25Db0ksR0FBWWxCLE9BQ1pYLEdBQXVCc0IsaUJBQ3hCLElBQ0RPLEdBQVlqQixvQkFFWjlJLEdBQVFpSyxrQkFDTGhMLE1BQUssU0FBQWlMLEdBQ0osSUFBTUMsRUFBbUIsSUFBSXBGLEVBQVEsQ0FDakNFLE1BQU9pRixFQUNQaEYsU0FBVSxTQUFDdEYsR0FDVCxJQUFNd0ssRUFBYS9CLEdBQVcsQ0FDNUJoTCxLQUFNdUMsRUFBS3ZDLEtBQ1htQyxLQUFNSSxFQUFLSixLQUNYb0QsUUFBU2hELEVBQUt5SyxNQUFNL0ksSUFDcEI1QixPQUFRRSxFQUFLMEIsSUFDYmUsTUFBT3pDLEVBQUt5QyxRQUVkOEgsRUFBaUJHLFFBQVFGLEVBQzFCLEdBRUh6TSxHQUVGd00sRUFBaUJJLFlBQVlMLEVBQzlCLElBQ0E1SCxPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUlGLEVBQ2IsRyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIid1c2Ugc3RyaWN0J1xuXG5pbXBvcnQgYnJlc3RJbWcgZnJvbSAnLi4vaW1hZ2VzL2JyZXN0LmpwZyc7XG5pbXBvcnQgdml0ZWJza0ltZyBmcm9tICcuLi9pbWFnZXMvdml0ZWJzay5qcGcnO1xuaW1wb3J0IGhvbWVsSW1nIGZyb20gJy4uL2ltYWdlcy9nb21lbC5qcGcnO1xuaW1wb3J0IGhyb2Rub0ltZyBmcm9tICcuLi9pbWFnZXMvaHJvZG5vLmpwZyc7XG5pbXBvcnQgbW9naWxldkltZyBmcm9tICcuLi9pbWFnZXMvbW9naWxldi5qcGcnO1xuaW1wb3J0IG1pbnNrSW1nIGZyb20gJy4uL2ltYWdlcy9taW5zay5qcGcnO1xuXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW3tcbiAgICBuYW1lOiAn0JHRgNC10YHRgicsXG4gICAgbGluazogYnJlc3RJbWdcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQktC40YLQtdCx0YHQuicsXG4gICAgbGluazogdml0ZWJza0ltZ1xuICB9LFxuICB7XG4gICAgbmFtZTogJ9CT0L7QvNC10LvRjCcsXG4gICAgbGluazogaG9tZWxJbWdcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQk9GA0L7QtNC90L4nLFxuICAgIGxpbms6IGhyb2Rub0ltZ1xuICB9LFxuICB7XG4gICAgbmFtZTogJ9Cc0L7Qs9C40LvQtdCyJyxcbiAgICBsaW5rOiBtb2dpbGV2SW1nXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JzQuNC90YHQuicsXG4gICAgbGluazogbWluc2tJbWdcbiAgfVxuXTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdG9yc1VzZXIgPSB7XG4gIG5hbWU6ICcucHJvZmlsZV9fdXNlcicsXG4gIGFib3V0OiAnLnByb2ZpbGVfX3VzZXItam9iJyxcbiAgYXZhdGFyOiAnLnByb2ZpbGVfX2F2YXRhcicsXG4gIGF2YXRhcldyYXBwZXI6ICcucHJvZmlsZV9faW1nLXdyYXBwZXInXG59XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XG4gIGJ1dHRvbkFkZE5ld0NhcmQ6ICcucHJvZmlsZV9fYnV0dG9uX2FkZCcsXG4gIHBvcFVwRWRpdFByb2ZpbGU6ICcucG9wLXVwX2VkaXQtcHJvZmlsZScsXG4gIGZvcm1FZGl0UHJvZmlsZTogJy5wb3AtdXBfX2Zvcm0tZWRpdC1wcm9maWxlJyxcbiAgZm9ybUFkZENhcmQ6ICcucG9wLXVwX19mb3JtLWFkZC1jYXJkJyxcbiAgcHJvZmlsZUJ1dHRvbkVkaXQ6ICcucHJvZmlsZV9fYnV0dG9uX2VkaXQnLFxuICBwb3BVcEFkZENhcmQ6ICcucG9wLXVwX2FkZC1jYXJkJyxcbiAgcG9wVXBGb3JtOiAnLnBvcC11cF9fZm9ybScsXG4gIHBvcFVwQnV0dG9uU2F2ZTogJy5wb3AtdXBfX2J1dHRvbi1zYXZlJyxcbiAgcG9wVXBJbnB1dDogJy5wb3AtdXBfX2lucHV0JyxcbiAgcG9wVXBJbnB1dFVzZXJOYW1lOiAnLnBvcC11cF9faW5wdXRfdXNlci1uYW1lJyxcbiAgcG9wVXBJbnB1dFVzZXJJbmZvOiAnLnBvcC11cF9faW5wdXRfdXNlci1qb2InLFxuICB1c2VyTmFtZUlucHV0OiAnbmFtZS1pbnB1dCcsXG4gIHVzZXJJbmZvSW5wdXQ6ICdqb2ItaW5wdXQnLFxuICBjYXJkTmFtZUlucHV0OiAnbmFtZS1jYXJkLWlucHV0JyxcbiAgY2FyZExpbmtJbnB1dDogJ3VybC1pbnB1dCcsXG4gIHBvcFVwQXZhdGFyOiAnLnBvcC11cF9lZGl0LWF2YXRhcicsXG4gIGZvcm1BdmF0YXJQcm9maWxlOiAnLnBvcC11cF9fZm9ybS1lZGl0LWF2YXRhcicsXG4gIHBvcHVwQ29uZmlybTogJy5wb3AtdXBfZGVsZXRlLWNhcmQnXG59XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RvcnNQb3B1cCA9IHtcbiAgcG9wdXBBY3RpdmU6ICdwb3AtdXBfYWN0aXZlJyxcbiAgcG9wdXA6ICdwb3AtdXAnLFxuICBwb3BVcENsb3NlSWNvbjogJ3BvcC11cF9fY2xvc2UtaWNvbicsXG59XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RvcnNDYXJkcyA9IHtcbiAgdGVtcGxhdGVDYXJkOiAnI3RlbXBsYXRlLWNhcmQnLFxuICBhcnRpY2xlQ2FyZDogJy5jYXJkJyxcbiAgc2VjdGlvbkNhcmRzOiAnLmNhcmRzJyxcbiAgaW1nQ2FyZDogJy5jYXJkX19pbWFnZScsXG4gIHRpdGxlQ2FyZDogJy5jYXJkX190aXRsZScsXG4gIGJ1dHRvbkRlbGV0ZUNhcmQ6ICcuY2FyZF9fYnV0dG9uLWRlbGV0ZScsXG4gIGJ1dHRvbkRlbGV0ZUNhcmRJbmFjdGl2ZTogJ2NhcmRfX2J1dHRvbi1kZWxldGVfaW5hY3RpdmUnLFxuICBidXR0b25MaWtlQ2FyZDogJy5jYXJkX19idXR0b24tbGlrZScsXG4gIGNvdW50ZXJMaWtlOiAnLmNhcmRfX2xpa2UtY291bnRlcicsXG4gIGJ1dHRvbkxpa2VBY3RpdmVDYXJkOiAnY2FyZF9fYnV0dG9uLWxpa2VfYWN0aXZlJyxcbiAgZm9ybUFkZENhcmQ6ICcucG9wLXVwX19mb3JtLWFkZC1jYXJkJyxcbiAgcG9wVXBWaWV3Q2FyZDogJy5wb3AtdXBfdmlldy1jYXJkJyxcbiAgcG9wVXBWaWV3SW1nOiAnLnBvcC11cF9fdmlldy1pbWcnLFxuICBwb3BVcFZpZXdDYXJkVGl0bGU6ICcucG9wLXVwX190aXRsZS12aWV3LWltZycsXG4gIHBvcFVwQ2xvc2VJY29uczogJy5wb3AtdXBfX2Nsb3NlLWljb24nLFxuICBpbnB1dE5hbWVDYXJkOiAnLnBvcC11cF9faW5wdXRfY2FyZC1uYW1lJyxcbiAgaW5wdXRVcmxDYXJkOiAnLnBvcC11cF9faW5wdXRfY2FyZC11cmwnLFxufVxuXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzVmFsaWRhdGlvbiA9IHtcbiAgZm9ybVNlbGVjdG9yOiAnLnBvcC11cF9fZm9ybScsXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wLXVwX19pbnB1dCcsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcC11cF9fYnV0dG9uJyxcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcC11cF9fYnV0dG9uX2luYWN0aXZlJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wLXVwX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ3BvcC11cF9fZXJyb3JfdmlzaWJsZSdcbn1cbiIsImV4cG9ydCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy51cmwgPSBvcHRpb25zLnVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuICB9XG5cbiAgX2NoZWNrUmVzcG9uc2VFcnJvciA9IChyZXMpID0+IHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvQXBpKCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLnVybCArIGAvdXNlcnMvbWVgLCB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZUVycm9yKHJlcykpXG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS9jYXJkc2AsIHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2VFcnJvcihyZXMpKVxuICB9XG5cbiAgc2V0VXNlckluZm9BcGkodXNlckRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L3VzZXJzL21lYCwge1xuICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBuYW1lOiB1c2VyRGF0YVsnbmFtZS1pbnB1dCddLFxuICAgICAgICAgIGFib3V0OiB1c2VyRGF0YVsnam9iLWlucHV0J11cbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlRXJyb3IocmVzKSlcbiAgfVxuXG4gIHNldFVzZXJBdmF0YXJBcGkodXNlckRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgYXZhdGFyOiB1c2VyRGF0YVsndXJsLWF2YXRhci1pbnB1dCddXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZUVycm9yKHJlcykpXG4gIH1cblxuICBhZGRDYXJkKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L2NhcmRzYCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgICBsaW5rOiBkYXRhLmxpbmtcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlRXJyb3IocmVzKSlcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoaWRDYXJkRGVsZXRlKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS9jYXJkcy8ke2lkQ2FyZERlbGV0ZX1gLCB7XG4gICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZUVycm9yKHJlcykpXG4gIH1cblxuICBsaWtlc0NhcmQoaWRDYXJkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS9jYXJkcy8ke2lkQ2FyZH0vbGlrZXNgLCB7XG4gICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZUVycm9yKHJlcykpXG4gIH1cblxuICBkaXNsaWtlc0NhcmQoaWRDYXJkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS9jYXJkcy8ke2lkQ2FyZH0vbGlrZXNgLCB7XG4gICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZUVycm9yKHJlcykpXG4gIH1cbn1cbiIsIid1c2Ugc3RyaWN0J1xuXG5pbXBvcnQge1xuICBzZWxlY3RvcnNDYXJkc1xufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoaXRlbSwgc2VsZWN0b3JUZW1wbGF0ZSwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVDYXJkRGVsZXRlLCBkYXRhQXBpLCB1c2VySUQpIHtcbiAgICB0aGlzLl9pdGVtID0gaXRlbTtcbiAgICB0aGlzLl90aXRsZSA9IHRoaXMuX2l0ZW0ubmFtZTtcbiAgICB0aGlzLl9hbHQgPSB0aGlzLl9pdGVtLm5hbWU7XG4gICAgdGhpcy5fc3JjID0gdGhpcy5faXRlbS5saW5rO1xuICAgIHRoaXMuX2lkT3duZXIgPSB0aGlzLl9pdGVtLmlkT3duZXI7XG4gICAgdGhpcy5faWRDYXJkID0gdGhpcy5faXRlbS5pZENhcmRcbiAgICB0aGlzLl9saWtlcyA9IHRoaXMuX2l0ZW0ubGlrZXM7XG4gICAgdGhpcy5fc2VsZWN0b3JUZW1wbGF0ZSA9IHNlbGVjdG9yVGVtcGxhdGU7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUNhcmREZWxldGUgPSBoYW5kbGVDYXJkRGVsZXRlO1xuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJRDtcbiAgICB0aGlzLl9kYXRhQXBpID0gZGF0YUFwaTtcbiAgfVxuICBfZ2V0VGVtcGxhdGUgPSAoKSA9PiB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9yVGVtcGxhdGUpLmNvbnRlbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnNDYXJkcy5hcnRpY2xlQ2FyZCkuY2xvbmVOb2RlKHRydWUpO1xuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuICBnZW5lcmF0ZUNhcmQgPSAoKSA9PiB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fYnV0dG9uTGlrZUNhcmQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzQ2FyZHMuYnV0dG9uTGlrZUNhcmQpO1xuICAgIHRoaXMuX2NvdW50ZXJMaWtlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yc0NhcmRzLmNvdW50ZXJMaWtlKTtcbiAgICB0aGlzLl9pbWdDYXJkID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yc0NhcmRzLmltZ0NhcmQpO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnNDYXJkcy50aXRsZUNhcmQpLnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XG4gICAgdGhpcy5faW1nQ2FyZC5hbHQgPSB0aGlzLl90aXRsZTtcbiAgICB0aGlzLl9pbWdDYXJkLnNyYyA9IHRoaXMuX3NyYztcbiAgICB0aGlzLl9idXR0b25MaWtlQ2FyZCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnNDYXJkcy5idXR0b25MaWtlQ2FyZCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICBpZiAodGhpcy5fbGlrZXMpIHtcbiAgICAgIHRoaXMuX2NvdW50ZXJMaWtlLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgICAgdGhpcy5fbGlrZXMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICBpZiAoZWxlbWVudC5faWQgPT09IHRoaXMuX3VzZXJJZCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9idXR0b25MaWtlQ2FyZC5jbGFzc0xpc3QuYWRkKHNlbGVjdG9yc0NhcmRzLmJ1dHRvbkxpa2VBY3RpdmVDYXJkKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAodGhpcy5faWRPd25lciAhPT0gdGhpcy5fdXNlcklkKSB7XG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzQ2FyZHMuYnV0dG9uRGVsZXRlQ2FyZCkuY2xhc3NMaXN0LmFkZChzZWxlY3RvcnNDYXJkcy5idXR0b25EZWxldGVDYXJkSW5hY3RpdmUpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG4gIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzQ2FyZHMuYnV0dG9uRGVsZXRlQ2FyZCkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlKHRoaXMuX2VsZW1lbnQsIHRoaXMuX2lkQ2FyZCkpO1xuICAgIHRoaXMuX2J1dHRvbkxpa2VDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlTGlrZSgpKTtcbiAgICB0aGlzLl9pbWdDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX2l0ZW0pKTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLl9idXR0b25MaWtlQ2FyZC5jbGFzc0xpc3QuY29udGFpbnMoc2VsZWN0b3JzQ2FyZHMuYnV0dG9uTGlrZUFjdGl2ZUNhcmQpKSB7XG4gICAgICB0aGlzLl9kYXRhQXBpLmRpc2xpa2VzQ2FyZCh0aGlzLl9pZENhcmQpXG4gICAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICAgIHRoaXMuX2J1dHRvbkxpa2VDYXJkLmNsYXNzTGlzdC5yZW1vdmUoc2VsZWN0b3JzQ2FyZHMuYnV0dG9uTGlrZUFjdGl2ZUNhcmQpO1xuICAgICAgICAgIHRoaXMuX2NvdW50ZXJMaWtlLnRleHRDb250ZW50ID0gZGF0YS5saWtlcy5sZW5ndGg7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8g0LLRi9Cy0LXQtNC10Lwg0L7RiNC40LHQutGDINCyINC60L7QvdGB0L7Qu9GMXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9kYXRhQXBpLmxpa2VzQ2FyZCh0aGlzLl9pZENhcmQpXG4gICAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICAgIHRoaXMuX2J1dHRvbkxpa2VDYXJkLmNsYXNzTGlzdC5hZGQoc2VsZWN0b3JzQ2FyZHMuYnV0dG9uTGlrZUFjdGl2ZUNhcmQpO1xuICAgICAgICAgIHRoaXMuX2NvdW50ZXJMaWtlLnRleHRDb250ZW50ID0gZGF0YS5saWtlcy5sZW5ndGg7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8g0LLRi9Cy0LXQtNC10Lwg0L7RiNC40LHQutGDINCyINC60L7QvdGB0L7Qu9GMXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnXG5pbXBvcnQge1xuICBzZWxlY3RvcnNDYXJkcyxcbiAgc2VsZWN0b3JzUG9wdXBcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuZXhwb3J0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgJHtwb3B1cFNlbGVjdG9yfWApO1xuICAgIHRoaXMuX2Nsb3NlSWNvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzQ2FyZHMucG9wVXBDbG9zZUljb25zKTtcbiAgfVxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoc2VsZWN0b3JzUG9wdXAucG9wdXBBY3RpdmUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoc2VsZWN0b3JzUG9wdXAucG9wdXBBY3RpdmUpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG4gIF9oYW5kbGVDbGlja0ljb25DbG9zZSA9IChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKHNlbGVjdG9yc1BvcHVwLnBvcHVwKSB8fCBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKHNlbGVjdG9yc1BvcHVwLnBvcFVwQ2xvc2VJY29uKSkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH07XG5cbiAgfVxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNsaWNrSWNvbkNsb3NlKTtcbiAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnXG5cbmltcG9ydCB7XG4gIFBvcHVwXG59IGZyb20gXCIuL1BvcHVwLmpzXCI7XG5pbXBvcnQge1xuICBzZWxlY3RvcnNcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3JOYW1lLCBzdWJtaXRIYW5kbGVyKSB7XG4gICAgc3VwZXIoc2VsZWN0b3JOYW1lKTtcbiAgICB0aGlzLnN1Ym1pdEhhbmRsZXIgPSBzdWJtaXRIYW5kbGVyO1xuICAgIHRoaXMuZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvcFVwRm9ybSk7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcnMucG9wVXBJbnB1dCk7XG4gICAgdGhpcy5faW5wdXROYW1lID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMucG9wVXBJbnB1dFVzZXJOYW1lKTtcbiAgICB0aGlzLl9pbnB1dFVzZXJJbmZvID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMucG9wVXBJbnB1dFVzZXJJbmZvKTtcblxuICAgIHRoaXMuX3BvcFVwQnV0dG9uU2F2ZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvcFVwQnV0dG9uU2F2ZSk7XG4gICAgdGhpcy5fcG9wVXBCdXR0b25UZXh0Q29udGVudCA9IHRoaXMuX3BvcFVwQnV0dG9uU2F2ZS50ZXh0Q29udGVudDtcblxuICB9XG4gIGNsb3NlKCkge1xuICAgIHRoaXMuZm9ybS5yZXNldCgpO1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cbiAgZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcbiAgfVxuICBzZXRJbnB1dFZhbHVlcyh2YWx1ZXMpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIC8vINGC0YPRgiDQstGB0YLQsNCy0LvRj9C10Lwg0LIgYHZhbHVlYCDQuNC90L/Rg9GC0LAg0LTQsNC90L3Ri9C1INC40Lcg0L7QsdGK0LXQutGC0LAg0L/QviDQsNGC0YDQuNCx0YPRgtGDIGBuYW1lYCDRjdGC0L7Qs9C+INC40L3Qv9GD0YLQsFxuICAgICAgaW5wdXQudmFsdWUgPSB2YWx1ZXNbaW5wdXQubmFtZV07XG4gICAgfSk7XG4gIH1cblxuXG5cbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9wb3BVcEJ1dHRvblNhdmUudGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9wb3BVcEJ1dHRvblNhdmUudGV4dENvbnRlbnQgPSB0aGlzLl9wb3BVcEJ1dHRvblRleHRDb250ZW50O1xuICAgIH1cbiAgfVxuXG5cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuc3VibWl0SGFuZGxlcih0aGlzLmdldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICB9XG5cbn1cbiIsIid1c2Ugc3RyaWN0J1xuXG5pbXBvcnQge1xuICBQb3B1cFxufSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuaW1wb3J0IHtcbiAgc2VsZWN0b3JzQ2FyZHNcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yKSB7XG4gICAgc3VwZXIoc2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yc0NhcmRzLnBvcFVwVmlld0ltZyk7XG4gICAgdGhpcy5faW1hZ2VOYW1lID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihzZWxlY3RvcnNDYXJkcy5wb3BVcFZpZXdDYXJkVGl0bGUpO1xuICB9XG5cbiAgb3BlbihsaW5rLCBuYW1lKSB7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gbmFtZTtcbiAgICB0aGlzLl9pbWFnZU5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKVxuICB9XG59XG4iLCIndXNlIHN0cmljdCdcblxuZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgaXRlbXMsXG4gICAgcmVuZGVyZXJcbiAgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIGFkZEl0ZW0oY2FyZCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoY2FyZCk7XG4gIH1cblxuICBwcmVwZW5kSXRlbShjYXJkKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoY2FyZCk7XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLmNsZWFyKCk7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsIid1c2Ugc3RyaWN0J1xuZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIHNlbGVjdG9yc1VzZXJcbiAgfSkge1xuICAgIHRoaXMuX3NlbGVjdG9yc1VzZXIgPSBzZWxlY3RvcnNVc2VyO1xuICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcnNVc2VyLm5hbWUpO1xuICAgIHRoaXMuX3VzZXJKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9yc1VzZXIuYWJvdXQpO1xuICAgIHRoaXMuX3VzZXJBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9yc1VzZXIuYXZhdGFyKVxuICB9XG4gIGdldFVzZXJJbmZvID0gKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAnbmFtZS1pbnB1dCc6IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50LFxuICAgICAgJ2pvYi1pbnB1dCc6IHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnRcbiAgICB9XG4gIH1cblxuICBzZXRVc2VySW5mbyA9ICh2YWx1ZXMpID0+IHtcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IHZhbHVlc1snbmFtZS1pbnB1dCddIHx8IHZhbHVlc1snbmFtZSddO1xuICAgIHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnQgPSB2YWx1ZXNbJ2pvYi1pbnB1dCddIHx8IHZhbHVlc1snYWJvdXQnXTtcbiAgfVxuXG4gIHNldFVzZXJBdmF0YXIgPSAoZGF0YSkgPT4ge1xuICAgIHRoaXMuX3VzZXJBdmF0YXIuc3JjID0gZGF0YS5hdmF0YXIgfHwgZGF0YVsndXJsLWF2YXRhci1pbnB1dCddO1xuICB9XG59XG4iLCIndXNlIHN0cmljdCdcblxuZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihmb3JtRWxlbWVudCwgc2VsZWN0b3JzKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9zZWxlY3RvcnMgPSBzZWxlY3RvcnM7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NlbGVjdG9ycy5pbnB1dFNlbGVjdG9yKSk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuICBfc2hvd0lucHV0RXJyb3IgPSAoKSA9PiB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2VsZWN0b3JzLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fZXJyb3JNZXNzYWdlO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NlbGVjdG9ycy5lcnJvckNsYXNzKTtcbiAgfTtcbiAgX2hpZGVJbnB1dEVycm9yID0gKCkgPT4ge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NlbGVjdG9ycy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NlbGVjdG9ycy5lcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgfTtcbiAgX2lzVmFsaWQgPSAoKSA9PiB7XG4gICAgaWYgKCF0aGlzLl9pbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKCk7XG4gICAgfVxuICB9O1xuICBfaGFzSW52YWxpZElucHV0ID0gKCkgPT4ge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfTtcbiAgX2VuYWJsZVN1Ym1pdEJ1dHRvbiA9ICgpID0+IHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2VsZWN0b3JzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICB9XG4gIF9kaXNhYmxlU3VibWl0QnV0dG9uID0gKCkgPT4ge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZWxlY3RvcnMuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gIH1cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fZW5hYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2Rpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgICB9XG4gIH1cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faW5wdXRFbGVtZW50ID0gaW5wdXRFbGVtZW50O1xuICAgICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7dGhpcy5faW5wdXRFbGVtZW50Lm5hbWV9LWVycm9yYCk7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcigpO1xuICAgIH0pO1xuICB9XG4gIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5faW5wdXRFbGVtZW50ID0gaW5wdXRFbGVtZW50O1xuICAgICAgICB0aGlzLl9lcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLl9pbnB1dEVsZW1lbnQubmFtZX0tZXJyb3JgKTtcbiAgICAgICAgdGhpcy5fZXJyb3JNZXNzYWdlID0gdGhpcy5faW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgICAgICB0aGlzLl9pc1ZhbGlkKCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KVxuICB9O1xuICBlbmFibGVWYWxpZGF0aW9uID0gKCkgPT4ge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsIid1c2Ugc3RyaWN0J1xuXG5pbXBvcnQge1xuICBQb3B1cFxufSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuaW1wb3J0IHtcbiAgc2VsZWN0b3JzXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3JOYW1lLCBzdWJtaXRIYW5kbGVyKSB7XG4gICAgc3VwZXIoc2VsZWN0b3JOYW1lKTtcbiAgICB0aGlzLmZvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wb3BVcEZvcm0pO1xuICAgIHRoaXMuX3BvcFVwQnV0dG9uU2F2ZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvcFVwQnV0dG9uU2F2ZSk7XG4gICAgdGhpcy5fcG9wVXBCdXR0b25UZXh0Q29udGVudCA9IHRoaXMuX3BvcFVwQnV0dG9uU2F2ZS50ZXh0Q29udGVudDtcbiAgICB0aGlzLnN1Ym1pdEhhbmRsZXIgPSBzdWJtaXRIYW5kbGVyXG4gIH1cbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9wb3BVcEJ1dHRvblNhdmUudGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9wb3BVcEJ1dHRvblNhdmUudGV4dENvbnRlbnQgPSB0aGlzLl9wb3BVcEJ1dHRvblRleHRDb250ZW50O1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5zdWJtaXRIYW5kbGVyKCk7XG4gICAgfSk7XG4gIH1cblxufVxuIiwiaW1wb3J0IHtcbiAgc2VsZWN0b3JzLFxuICBpbml0aWFsQ2FyZHMsXG4gIHNlbGVjdG9yc0NhcmRzLFxuICBzZWxlY3RvcnNVc2VyLFxuICBzZWxlY3RvcnNWYWxpZGF0aW9uXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQge1xuICBBcGlcbn0gZnJvbSAnLi4vY29tcG9uZW50cy9BcGkuanMnO1xuaW1wb3J0IHtcbiAgQ2FyZFxufSBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IHtcbiAgUG9wdXBXaXRoRm9ybVxufSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IHtcbiAgUG9wdXBXaXRoSW1hZ2Vcbn0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQge1xuICBTZWN0aW9uXG59IGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQge1xuICBVc2VySW5mb1xufSBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCB7XG4gIEZvcm1WYWxpZGF0b3Jcbn0gZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCB7XG4gIFBvcHVwV2l0aENvbmZpcm1hdGlvblxufSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyc7XG5cbmltcG9ydCAnLi9pbmRleC5jc3MnO1xuXG5jb25zdCB1c2VyQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnNVc2VyLmF2YXRhcldyYXBwZXIpO1xuY29uc3QgcHJvZmlsZUJ1dHRvbkVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wcm9maWxlQnV0dG9uRWRpdCk7XG5jb25zdCBidXR0b25BZGROZXdDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuYnV0dG9uQWRkTmV3Q2FyZCk7XG5jb25zdCBmb3JtRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5mb3JtRWRpdFByb2ZpbGUpO1xuY29uc3QgZm9ybUFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5mb3JtQWRkQ2FyZCk7XG5jb25zdCBmb3JtRWRpdEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmZvcm1BdmF0YXJQcm9maWxlKTtcblxuY29uc3QgcHJvZmlsZVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1FZGl0UHJvZmlsZSwgc2VsZWN0b3JzVmFsaWRhdGlvbik7XG5wcm9maWxlVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgY2FyZFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1BZGRDYXJkLCBzZWxlY3RvcnNWYWxpZGF0aW9uKTtcbmNhcmRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBhdmF0YXJQcm9maWxlVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUVkaXRBdmF0YXIsIHNlbGVjdG9yc1ZhbGlkYXRpb24pO1xuYXZhdGFyUHJvZmlsZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IHByb2ZpbGVJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgc2VsZWN0b3JzVXNlclxufSk7XG5cbmNvbnN0IG9wdGlvbiA9IHtcbiAgdXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC01MScsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiAnZDRjNDE2NmQtN2RhMS00MWU1LTljMTItNmFkYTkwNTIzMmFmJyxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gIH1cbn1cbmxldCB1c2VySUQgPSBudWxsO1xuY29uc3QgZGF0YUFwaSA9IG5ldyBBcGkob3B0aW9uKVxuZGF0YUFwaS5nZXRVc2VySW5mb0FwaSgpXG4gIC50aGVuKGRhdGEgPT4ge1xuICAgIHByb2ZpbGVJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICAgIHByb2ZpbGVJbmZvLnNldFVzZXJBdmF0YXIoZGF0YSk7XG4gICAgdXNlcklEID0gZGF0YS5faWQ7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyKTsgLy8g0LLRi9Cy0LXQtNC10Lwg0L7RiNC40LHQutGDINCyINC60L7QvdGB0L7Qu9GMXG4gIH0pO1xuXG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSkge1xuICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoaXRlbSwgc2VsZWN0b3JzQ2FyZHMudGVtcGxhdGVDYXJkLCBvcGVuSW1hZ2UsIGhhbmRsZUNhcmREZWxldGUsIGRhdGFBcGksIHVzZXJJRClcbiAgcmV0dXJuIG5ld0NhcmQuZ2VuZXJhdGVDYXJkKCk7XG59XG5cbmxldCBjbG9zZUVsZW1lbnQgPSB7fTtcblxuZnVuY3Rpb24gaGFuZGxlQ2FyZERlbGV0ZShlbGVtZW50LCBpZENhcmREZWxldGUpIHtcbiAgcG9wdXBDb25maXJtRGVsZXRlLm9wZW4oKTtcbiAgcG9wdXBDb25maXJtRGVsZXRlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIGNsb3NlRWxlbWVudC5lbGVtZW50ID0gZWxlbWVudDtcbiAgY2xvc2VFbGVtZW50LmlkQ2FyZERlbGV0ZSA9IGlkQ2FyZERlbGV0ZTtcbiAgcmV0dXJuIGNsb3NlRWxlbWVudFxufVxuXG4vKiBjb25zdCBwb3B1cENvbmZpcm1EZWxldGUgPSBuZXcgUG9wdXBXaXRoRm9ybShzZWxlY3RvcnMucG9wdXBDb25maXJtLCAoKSA9PiB7XG4gIHBvcHVwQ29uZmlybURlbGV0ZS5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICBkYXRhQXBpLmRlbGV0ZUNhcmQoY2xvc2VFbGVtZW50LmlkQ2FyZERlbGV0ZSlcbiAgICAuZmluYWxseSgoKSA9PiBwb3B1cENvbmZpcm1EZWxldGUucmVuZGVyTG9hZGluZyhmYWxzZSkpXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7IC8vINCy0YvQstC10LTQtdC8INC+0YjQuNCx0LrRgyDQsiDQutC+0L3RgdC+0LvRjFxuICAgIH0pO1xuICBwb3B1cENvbmZpcm1EZWxldGUuY2xvc2UoKTtcbiAgY2xvc2VFbGVtZW50LmVsZW1lbnQucmVtb3ZlKCk7XG59KTsgKi9cblxuY29uc3QgcG9wdXBDb25maXJtRGVsZXRlID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihzZWxlY3RvcnMucG9wdXBDb25maXJtLCAoKSA9PiB7XG4gIHBvcHVwQ29uZmlybURlbGV0ZS5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICBkYXRhQXBpLmRlbGV0ZUNhcmQoY2xvc2VFbGVtZW50LmlkQ2FyZERlbGV0ZSlcbiAgICAuZmluYWxseSgoKSA9PiBwb3B1cENvbmZpcm1EZWxldGUucmVuZGVyTG9hZGluZyhmYWxzZSkpXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7IC8vINCy0YvQstC10LTQtdC8INC+0YjQuNCx0LrRgyDQsiDQutC+0L3RgdC+0LvRjFxuICAgIH0pO1xuICBwb3B1cENvbmZpcm1EZWxldGUuY2xvc2UoKTtcbiAgY2xvc2VFbGVtZW50LmVsZW1lbnQucmVtb3ZlKCk7XG59KTtcblxuY29uc3QgY2FyZHNMaXN0ID0gbmV3IFNlY3Rpb24oe1xuICBpdGVtczogY3JlYXRlQ2FyZCxcbiAgcmVuZGVyZXI6IChpdGVtKSA9PiBjcmVhdGVDYXJkKGl0ZW0pXG59LCBzZWxlY3RvcnNDYXJkcy5zZWN0aW9uQ2FyZHMpXG5cbmNvbnN0IGFkZENhcmRQb3BVcCA9IG5ldyBQb3B1cFdpdGhGb3JtKHNlbGVjdG9ycy5wb3BVcEFkZENhcmQsIChkYXRhKSA9PiB7XG4gIGFkZENhcmRQb3BVcC5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICBjb25zdCBuZXdEYXRhID0ge1xuICAgIG5hbWU6IGRhdGFbc2VsZWN0b3JzLmNhcmROYW1lSW5wdXRdLFxuICAgIGxpbms6IGRhdGFbc2VsZWN0b3JzLmNhcmRMaW5rSW5wdXRdXG4gIH07XG4gIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKG5ld0RhdGEpO1xuICBkYXRhQXBpLmFkZENhcmQobmV3RGF0YSlcbiAgICAuZmluYWxseSgoKSA9PiBhZGRDYXJkUG9wVXAucmVuZGVyTG9hZGluZyhmYWxzZSkpO1xuICBhZGRDYXJkUG9wVXAuY2xvc2UoKTtcbiAgY2FyZHNMaXN0LnByZXBlbmRJdGVtKGNhcmQpO1xufSk7XG5cbmFkZENhcmRQb3BVcC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5idXR0b25BZGROZXdDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBhZGRDYXJkUG9wVXAub3BlbigpO1xuICBjYXJkVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xufSk7XG5cbmZ1bmN0aW9uIG9wZW5JbWFnZShpdGVtKSB7XG4gIHBvcFVwV2l0aEltYWdlLm9wZW4oaXRlbS5saW5rLCBpdGVtLm5hbWUpO1xufVxuXG5jb25zdCBwb3BVcFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShzZWxlY3RvcnNDYXJkcy5wb3BVcFZpZXdDYXJkKTtcbnBvcFVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHByb2ZpbGVQb3BVcCA9IG5ldyBQb3B1cFdpdGhGb3JtKHNlbGVjdG9ycy5wb3BVcEVkaXRQcm9maWxlLCAoaW5wdXRWYWx1ZXMpID0+IHtcbiAgcHJvZmlsZVBvcFVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gIGRhdGFBcGkuc2V0VXNlckluZm9BcGkoaW5wdXRWYWx1ZXMpXG4gICAgLmZpbmFsbHkoKCkgPT4gcHJvZmlsZVBvcFVwLnJlbmRlckxvYWRpbmcoZmFsc2UpKTtcbiAgcHJvZmlsZUluZm8uc2V0VXNlckluZm8oaW5wdXRWYWx1ZXMpO1xuICBwcm9maWxlUG9wVXAuY2xvc2UoKTtcbn0pO1xucHJvZmlsZVBvcFVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbnByb2ZpbGVCdXR0b25FZGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBwcm9maWxlUG9wVXAub3BlbigpO1xuICBjb25zdCB1c2VySW5mbyA9IHByb2ZpbGVJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVQb3BVcC5zZXRJbnB1dFZhbHVlcyh1c2VySW5mbyk7XG4gIHByb2ZpbGVWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcblxuY29uc3QgYXZhdGFyUG9wVXAgPSBuZXcgUG9wdXBXaXRoRm9ybShzZWxlY3RvcnMucG9wVXBBdmF0YXIsIChpbnB1dFZhbHVlcykgPT4ge1xuICBhdmF0YXJQb3BVcC5yZW5kZXJMb2FkaW5nKHRydWUpXG4gIGRhdGFBcGkuc2V0VXNlckF2YXRhckFwaShpbnB1dFZhbHVlcylcbiAgICAuZmluYWxseSgoKSA9PiBwb3B1cENvbmZpcm1EZWxldGUucmVuZGVyTG9hZGluZyhmYWxzZSkpXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7IC8vINCy0YvQstC10LTQtdC8INC+0YjQuNCx0LrRgyDQsiDQutC+0L3RgdC+0LvRjFxuICAgIH0pO1xuICBwcm9maWxlSW5mby5zZXRVc2VyQXZhdGFyKGlucHV0VmFsdWVzKTtcbiAgYXZhdGFyUG9wVXAuY2xvc2UoKTtcbn0pO1xuXG51c2VyQXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBhdmF0YXJQb3BVcC5vcGVuKCk7XG4gIGF2YXRhclByb2ZpbGVWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKClcbn0pXG5hdmF0YXJQb3BVcC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5kYXRhQXBpLmdldEluaXRpYWxDYXJkcygpXG4gIC50aGVuKGNhcmRzID0+IHtcbiAgICBjb25zdCBjYXJkc0xpc3RGcm9tQXBpID0gbmV3IFNlY3Rpb24oe1xuICAgICAgICBpdGVtczogY2FyZHMsXG4gICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgICAgIGNvbnN0IG5ld0NhcmRBcGkgPSBjcmVhdGVDYXJkKHtcbiAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgIGxpbms6IGl0ZW0ubGluayxcbiAgICAgICAgICAgIGlkT3duZXI6IGl0ZW0ub3duZXIuX2lkLFxuICAgICAgICAgICAgaWRDYXJkOiBpdGVtLl9pZCxcbiAgICAgICAgICAgIGxpa2VzOiBpdGVtLmxpa2VzXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY2FyZHNMaXN0RnJvbUFwaS5hZGRJdGVtKG5ld0NhcmRBcGkpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2VsZWN0b3JzQ2FyZHMuc2VjdGlvbkNhcmRzXG4gICAgKTtcbiAgICBjYXJkc0xpc3RGcm9tQXBpLnJlbmRlckl0ZW1zKGNhcmRzKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpOyAvLyDQstGL0LLQtdC00LXQvCDQvtGI0LjQsdC60YMg0LIg0LrQvtC90YHQvtC70YxcbiAgfSk7XG4iXSwibmFtZXMiOlsic2VsZWN0b3JzVXNlciIsIm5hbWUiLCJhYm91dCIsImF2YXRhciIsImF2YXRhcldyYXBwZXIiLCJzZWxlY3RvcnMiLCJzZWxlY3RvcnNQb3B1cCIsInNlbGVjdG9yc0NhcmRzIiwic2VsZWN0b3JzVmFsaWRhdGlvbiIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQXBpIiwib3B0aW9ucyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJ0aGlzIiwidXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwiX2NoZWNrUmVzcG9uc2VFcnJvciIsInVzZXJEYXRhIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJkYXRhIiwibGluayIsImlkQ2FyZERlbGV0ZSIsImlkQ2FyZCIsIkNhcmQiLCJpdGVtIiwic2VsZWN0b3JUZW1wbGF0ZSIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUNhcmREZWxldGUiLCJkYXRhQXBpIiwidXNlcklEIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX3NlbGVjdG9yVGVtcGxhdGUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfYnV0dG9uTGlrZUNhcmQiLCJfY291bnRlckxpa2UiLCJfaW1nQ2FyZCIsInRleHRDb250ZW50IiwiX3RpdGxlIiwiYWx0Iiwic3JjIiwiX3NyYyIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlcyIsImxlbmd0aCIsImZvckVhY2giLCJlbGVtZW50IiwiX2lkIiwiX3VzZXJJZCIsImNsYXNzTGlzdCIsImFkZCIsIl9pZE93bmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVDYXJkRGVsZXRlIiwiX2lkQ2FyZCIsIl9oYW5kbGVMaWtlIiwiX2hhbmRsZUNhcmRDbGljayIsIl9pdGVtIiwiY29udGFpbnMiLCJfZGF0YUFwaSIsImRpc2xpa2VzQ2FyZCIsInJlbW92ZSIsImxpa2VzIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwibGlrZXNDYXJkIiwiX2FsdCIsImlkT3duZXIiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJldmVudCIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiX3BvcHVwIiwiX2Nsb3NlSWNvbiIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlQ2xpY2tJY29uQ2xvc2UiLCJQb3B1cFdpdGhGb3JtIiwic2VsZWN0b3JOYW1lIiwic3VibWl0SGFuZGxlciIsImZvcm0iLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9pbnB1dE5hbWUiLCJfaW5wdXRVc2VySW5mbyIsIl9wb3BVcEJ1dHRvblNhdmUiLCJfcG9wVXBCdXR0b25UZXh0Q29udGVudCIsInJlc2V0IiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwidmFsdWVzIiwiaXNMb2FkaW5nIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJnZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aEltYWdlIiwic2VsZWN0b3IiLCJfcG9wdXBJbWFnZSIsIl9pbWFnZU5hbWUiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiY2FyZCIsImFwcGVuZCIsInByZXBlbmQiLCJpbm5lckhUTUwiLCJjbGVhciIsIlVzZXJJbmZvIiwiX3VzZXJOYW1lIiwiX3VzZXJKb2IiLCJfdXNlckF2YXRhciIsIl9zZWxlY3RvcnNVc2VyIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiX2lucHV0RWxlbWVudCIsIl9zZWxlY3RvcnMiLCJfZXJyb3JFbGVtZW50IiwiX2Vycm9yTWVzc2FnZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJzb21lIiwiaW5wdXRFbGVtZW50IiwiX2J1dHRvbkVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfaGFzSW52YWxpZElucHV0IiwiX2VuYWJsZVN1Ym1pdEJ1dHRvbiIsIl9kaXNhYmxlU3VibWl0QnV0dG9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2Zvcm1FbGVtZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaXNWYWxpZCIsIkFycmF5IiwiZnJvbSIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsInVzZXJBdmF0YXIiLCJwcm9maWxlQnV0dG9uRWRpdCIsImJ1dHRvbkFkZE5ld0NhcmQiLCJmb3JtRWRpdFByb2ZpbGUiLCJmb3JtQWRkQ2FyZCIsImZvcm1FZGl0QXZhdGFyIiwicHJvZmlsZVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCJjYXJkVmFsaWRhdG9yIiwiYXZhdGFyUHJvZmlsZVZhbGlkYXRvciIsInByb2ZpbGVJbmZvIiwiYXV0aG9yaXphdGlvbiIsImNyZWF0ZUNhcmQiLCJvcGVuSW1hZ2UiLCJnZW5lcmF0ZUNhcmQiLCJnZXRVc2VySW5mb0FwaSIsInNldFVzZXJJbmZvIiwic2V0VXNlckF2YXRhciIsImNsb3NlRWxlbWVudCIsInBvcHVwQ29uZmlybURlbGV0ZSIsIm9wZW4iLCJzZXRFdmVudExpc3RlbmVycyIsInJlbmRlckxvYWRpbmciLCJkZWxldGVDYXJkIiwiZmluYWxseSIsImNhcmRzTGlzdCIsImFkZENhcmRQb3BVcCIsIm5ld0RhdGEiLCJhZGRDYXJkIiwicHJlcGVuZEl0ZW0iLCJwb3BVcFdpdGhJbWFnZSIsInJlc2V0VmFsaWRhdGlvbiIsInByb2ZpbGVQb3BVcCIsImlucHV0VmFsdWVzIiwic2V0VXNlckluZm9BcGkiLCJ1c2VySW5mbyIsImdldFVzZXJJbmZvIiwic2V0SW5wdXRWYWx1ZXMiLCJhdmF0YXJQb3BVcCIsInNldFVzZXJBdmF0YXJBcGkiLCJnZXRJbml0aWFsQ2FyZHMiLCJjYXJkcyIsImNhcmRzTGlzdEZyb21BcGkiLCJuZXdDYXJkQXBpIiwib3duZXIiLCJhZGRJdGVtIiwicmVuZGVySXRlbXMiXSwic291cmNlUm9vdCI6IiJ9