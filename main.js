(()=>{"use strict";var e={name:".profile__user",about:".profile__user-job",avatar:".profile__avatar",avatarWrapper:".profile__img-wrapper",userNameInput:"name-input",jobInputName:"job-input",avatarInputName:"url-avatar-input"},t=".pop-up__form",n=".pop-up__button-save",r="pop-up_active",o="card__button-like_active",i={formSelector:".pop-up__form",inputSelector:".pop-up__input",submitButtonSelector:".pop-up__button",inactiveButtonClass:"pop-up__button_inactive",inputErrorClass:"pop-up__input_type_error",errorClass:"pop-up__error_visible"};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))},(n="_checkResponseError")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this.url=t.url,this._headers=t.headers}var t,n;return t=e,(n=[{key:"getUserInfoApi",value:function(){return fetch("".concat(this.url,"/users/me"),{method:"GET",headers:this._headers}).then(this._checkResponseError)}},{key:"getInitialCards",value:function(){return fetch("".concat(this.url,"/cards"),{method:"GET",headers:this._headers}).then(this._checkResponseError)}},{key:"setUserInfoApi",value:function(e){return fetch("".concat(this.url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e["name-input"],about:e["job-input"]})}).then(this._checkResponseError)}},{key:"setUserAvatarApi",value:function(e){return fetch("".concat(this.url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e["url-avatar-input"]})}).then(this._checkResponseError)}},{key:"addCard",value:function(e){return fetch("".concat(this.url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkResponseError)}},{key:"deleteCard",value:function(e){return fetch("".concat(this.url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponseError)}},{key:"handleToggleLikeApi",value:function(e){var t,n;return fetch("".concat(this.url,"/cards/").concat((null==e||null===(t=e._item)||void 0===t?void 0:t.idCard)||(null==e||null===(n=e._item)||void 0===n?void 0:n._id),"/likes"),{method:e.isLiked()?"DELETE":"PUT",headers:this._headers}).then(this._checkResponseError)}},{key:"getAllPromise",value:function(){return Promise.all([this.getUserInfoApi(),this.getInitialCards()])}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){function e(t){var n=this,r=t.item,o=t.selectorTemplate,i=t.handleCardClick,a=t.handleCardDelete,u=t.handleLikeCard,c=t.userID;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"_getTemplate",(function(){return document.querySelector(n._selectorTemplate).content.querySelector(".card").cloneNode(!0)})),s(this,"generateCard",(function(){return n._element=n._getTemplate(),n._buttonLikeCard=n._element.querySelector(".card__button-like"),n._buttonDeleteCard=n._element.querySelector(".card__button-delete"),n._counterLike=n._element.querySelector(".card__like-counter"),n._imgCard=n._element.querySelector(".card__image"),n._element.querySelector(".card__title").textContent=n._title,n._imgCard.alt=n._title,n._imgCard.src=n._src,n._updateLikeState(n.isLiked()),n._checkIsCardUser(),n._setEventListeners(),n._element})),s(this,"_checkIsCardUser",(function(){n._idOwner&&n._idOwner!==n._userId&&n._buttonDeleteCard.classList.add("card__button-delete_inactive")})),s(this,"_setEventListeners",(function(){n._buttonDeleteCard.addEventListener("click",(function(){return n._handleCardDelete(n)})),n._buttonLikeCard.addEventListener("click",(function(){return n._handleLikeCard(n)})),n._imgCard.addEventListener("click",(function(){return n._handleCardClick(n._item)}))})),this._item=r,this._title=this._item.name,this._alt=this._item.name,this._src=this._item.link,this._idOwner=this._item.idOwner,this._idCard=this._item.idCard,this._likes=this._item.likes,this._selectorTemplate=o,this._handleCardClick=i,this._handleCardDelete=a,this._handleLikeCard=u,this._userId=c}var t,n;return t=e,(n=[{key:"isLiked",value:function(){var e=this;return this._likes.some((function(t){return e._userId===t._id}))}},{key:"setLike",value:function(e){this._likes=e.likes,this._updateLikeState(this.isLiked())}},{key:"deleteCard",value:function(){this._element.remove()}},{key:"_updateLikeState",value:function(e){e?this._buttonLikeCard.classList.add(o):this._buttonLikeCard.classList.remove(o),this._counterLike.textContent=this._likes.length}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),f(this,"_handleClickIconClose",(function(e){(e.target.classList.contains("pop-up")||e.target.classList.contains("pop-up__close-icon"))&&n.close()})),this._popup=document.querySelector("".concat(t)),this._closeIcon=this._popup.querySelector(".pop-up__close-icon")}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add(r),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove(r),document.removeEventListener("keyup",this._handleEscClose)}},{key:"setEventListeners",value:function(){this._popup.addEventListener("click",this._handleClickIconClose)}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=m(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},y.apply(this,arguments)}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function v(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(c,e);var r,o,i,a,u=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(i);if(a){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function c(e,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(o=u.call(this,e)).submitHandler=r,o.form=o._popup.querySelector(t),o._inputList=o._popup.querySelectorAll(".pop-up__input"),o._inputName=o._popup.querySelector(".pop-up__input_user-name"),o._inputUserInfo=o._popup.querySelector(".pop-up__input_user-job"),o._popUpButtonSave=o._popup.querySelector(n),o._popUpButtonTextContent=o._popUpButtonSave.textContent,o}return r=c,(o=[{key:"close",value:function(){this.form.reset(),y(g(c.prototype),"close",this).call(this)}},{key:"getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"renderLoading",value:function(e){this._popUpButtonSave.textContent=e?"Сохранение...":this._popUpButtonTextContent}},{key:"setEventListeners",value:function(){var e=this;y(g(c.prototype),"setEventListeners",this).call(this),this.form.addEventListener("submit",(function(t){t.preventDefault(),e.submitHandler(e.getInputValues())}))}}])&&h(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),c}(d);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=O(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},C.apply(this,arguments)}function O(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function L(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(r);if(o){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return L(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._popupImage=t._popup.querySelector(".pop-up__view-img"),t._imageName=t._popup.querySelector(".pop-up__title-view-img"),t}return t=a,(n=[{key:"open",value:function(e,t){this._popupImage.src=e,this._popupImage.alt=t,this._imageName.textContent=t,C(j(a.prototype),"open",this).call(this)}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d);function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T=function(){function e(t){var n=t.renderer,r=t.containerSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=n,this._container=document.querySelector(r)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"prependItem",value:function(e){this._container.prepend(e)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(e){var t=this;this.clear(),e.forEach((function(e){return t._renderer(e)}))}}])&&P(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t,n){return t&&U(e.prototype,t),n&&U(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=R((function e(t){var n=this,r=t.selectorsUser;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),q(this,"getUserInfo",(function(){var e;return q(e={},n._nameInputName,n._userName.textContent),q(e,n._jobInputName,n._userJob.textContent),e})),q(this,"setUserInfo",(function(e){n._userName.textContent=e[n._nameInputName]||e.name,n._userJob.textContent=e[n._jobInputName]||e.about,n._userAvatar.src=e.avatar||e[n._avatarInputName]})),this._selectorsUser=r,this._userName=document.querySelector(this._selectorsUser.name),this._userJob=document.querySelector(this._selectorsUser.about),this._userAvatar=document.querySelector(this._selectorsUser.avatar),this._nameInputName=this._selectorsUser.userNameInput,this._jobInputName=this._selectorsUser.jobInputName,this._avatarInputName=this._selectorsUser.avatarInputName}));function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),x(this,"_showInputError",(function(){r._inputElement.classList.add(r._selectors.inputErrorClass),r._errorElement.textContent=r._errorMessage,r._errorElement.classList.add(r._selectors.errorClass)})),x(this,"_hideInputError",(function(){r._inputElement.classList.remove(r._selectors.inputErrorClass),r._errorElement.classList.remove(r._selectors.errorClass),r._errorElement.textContent=""})),x(this,"_isValid",(function(){r._inputElement.validity.valid?r._hideInputError():r._showInputError()})),x(this,"_hasInvalidInput",(function(){return r._inputList.some((function(e){return!e.validity.valid}))})),x(this,"_enableSubmitButton",(function(){r._buttonElement.classList.add(r._selectors.inactiveButtonClass),r._buttonElement.setAttribute("disabled","disabled")})),x(this,"_disableSubmitButton",(function(){r._buttonElement.classList.remove(r._selectors.inactiveButtonClass),r._buttonElement.removeAttribute("disabled")})),x(this,"_toggleButtonState",(function(){r._hasInvalidInput()?r._enableSubmitButton():r._disableSubmitButton()})),x(this,"_setEventListeners",(function(){r._toggleButtonState(),r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._inputElement=e,r._errorElement=r._formElement.querySelector(".".concat(r._inputElement.name,"-error")),r._errorMessage=r._inputElement.validationMessage,r._isValid(),r._toggleButtonState()}))}))})),x(this,"enableValidation",(function(){r._setEventListeners()})),this._formElement=t,this._selectors=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._selectors.inputSelector)),this._buttonElement=this._formElement.querySelector(n.submitButtonSelector)}var t,n;return t=e,(n=[{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._inputElement=t,e._errorElement=e._formElement.querySelector(".".concat(e._inputElement.name,"-error")),e._hideInputError()}))}}])&&A(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(){return H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=J(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},H.apply(this,arguments)}function J(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=W(e)););return e}function M(e,t){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},M(e,t)}function G(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(c,e);var r,o,i,a,u=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=W(i);if(a){var n=W(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return G(this,e)});function c(e,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(o=u.call(this,e)).form=o._popup.querySelector(t),o._popUpButtonSave=o._popup.querySelector(n),o._popUpButtonTextContent=o._popUpButtonSave.textContent,o.submitHandler=r,o}return r=c,(o=[{key:"renderLoading",value:function(e){this._popUpButtonSave.textContent=e?"Сохранение...":this._popUpButtonTextContent}},{key:"setEventListeners",value:function(e){var t=this;H(W(c.prototype),"setEventListeners",this).call(this),this.form.addEventListener("submit",(function(n){n.preventDefault(),t.submitHandler(e)}))}}])&&V(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),c}(d);function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F=document.querySelector(e.avatarWrapper),K=document.querySelector(".profile__button_edit"),Q=document.querySelector(".profile__button_add"),X=document.querySelector(".pop-up__form-edit-profile"),Y=document.querySelector(".pop-up__form-add-card"),Z=document.querySelector(".pop-up__form-edit-avatar"),ee=null,te=new N(X,i);te.enableValidation();var ne=new N(Y,i);ne.enableValidation();var re=new N(Z,i);re.enableValidation();var oe=new B({selectorsUser:e}),ie=new u({url:"https://mesto.nomoreparties.co/v1/cohort-51",headers:{authorization:"d4c4166d-7da1-41e5-9c12-6ada905232af","Content-Type":"application/json"}}),ae=new T({renderer:function(e){var t=ue({name:e.name,link:e.link,idOwner:e.owner._id,idCard:e._id,likes:e.likes});ae.addItem(t)},containerSelector:".cards"});function ue(e){return new l({item:e,selectorTemplate:"#template-card",handleCardClick:ye,handleCardDelete:he,handleLikeCard:_e,userID:ee}).generateCard()}var ce=new z(".pop-up_delete-card",(function(e){var t,n;t=e,ce.renderLoading(!0),ie.deleteCard("".concat((null==t?void 0:t._idCard)||(null==t||null===(n=t._item)||void 0===n?void 0:n._id))).then((function(){return t.deleteCard()})).finally((function(){ce.close(),ce.renderLoading(!1)})).catch((function(e){console.log(e)}))})),se=new I(".pop-up_view-card");function le(e,t,n,r){return t=new k(e,(function(e){t.renderLoading(!0),ie[n](e).then((function(e){oe[r](e)})).catch((function(e){console.log(e)})).finally((function(){t.close(),t.renderLoading(!1)}))}))}var pe=le(".pop-up_edit-profile",pe,"setUserInfoApi","setUserInfo"),fe=le(".pop-up_edit-avatar",fe,"setUserAvatarApi","setUserInfo"),de=new k(".pop-up_add-card",(function(e){de.renderLoading(!0);var t={name:e["name-card-input"],link:e["url-input"]};ie.addCard(t).then((function(e){ae.prependItem(ue(e))})).catch((function(e){console.log(e)})).finally((function(){de.close(),de.renderLoading(!1)}))}));function _e(e){ie.handleToggleLikeApi(e).then((function(t){e.setLike(t)})).catch((function(e){console.log(e)}))}function he(e){ce.open(),ce.setEventListeners(e)}function ye(e){se.open(e.link,e.name)}ie.getAllPromise().then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];oe.setUserInfo(o),ee=o._id,ae.renderItems(i)})).catch((function(e){console.log(e)})),Q.addEventListener("click",(function(){de.open(),ne.resetValidation()})),K.addEventListener("click",(function(){var e=oe.getUserInfo();pe.setInputValues(e),te.resetValidation(),pe.open()})),F.addEventListener("click",(function(){fe.open(),re.resetValidation()})),fe.setEventListeners(),de.setEventListeners(),pe.setEventListeners(),ce.setEventListeners(),se.setEventListeners()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBS2pELEtBQ3JDLENBR0NxTCxHQUFRa0MsZ0JBQ0x4TCxNQUFLLFlBQXVCLEksSUFBQSxHLEVBQUEsRSw0Q0FBQSxJLGd4QkFBckJNLEVBQXFCLEtBQWZtTCxFQUFlLEtBQzNCcEMsR0FBWXFDLFlBQVlwTCxHQUN4QmlCLEdBQVNqQixFQUFLTSxJQUNkNEksR0FBU21DLFlBQVlGLEVBQ3RCLElBQ0FyQixPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUlGLEVBQ2IsSUFJTHhCLEVBQWlCOUYsaUJBQWlCLFNBQVMsV0FDekNpSSxHQUFhTSxPQUNibkMsR0FBY3lDLGlCQUNmLElBRURoRCxFQUFrQjdGLGlCQUFpQixTQUFTLFdBQzFDLElBQU04SSxFQUFXeEMsR0FBWXlDLGNBQzdCaEIsR0FBYWlCLGVBQWVGLEdBQzVCNUMsR0FBaUIyQyxrQkFDakJkLEdBQWFRLE1BQ2QsSUFFRDNDLEVBQVc1RixpQkFBaUIsU0FBUyxXQUNuQ2dJLEdBQVlPLE9BQ1psQyxHQUF1QndDLGlCQUN4QixJQUNEYixHQUFZUSxvQkFDWlAsR0FBYU8sb0JBQ2JULEdBQWFTLG9CQUNieEIsR0FBbUJ3QixvQkFDbkJmLEdBQWVlLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiJ3VzZSBzdHJpY3QnXG5cbmltcG9ydCBicmVzdEltZyBmcm9tICcuLi9pbWFnZXMvYnJlc3QuanBnJztcbmltcG9ydCB2aXRlYnNrSW1nIGZyb20gJy4uL2ltYWdlcy92aXRlYnNrLmpwZyc7XG5pbXBvcnQgaG9tZWxJbWcgZnJvbSAnLi4vaW1hZ2VzL2dvbWVsLmpwZyc7XG5pbXBvcnQgaHJvZG5vSW1nIGZyb20gJy4uL2ltYWdlcy9ocm9kbm8uanBnJztcbmltcG9ydCBtb2dpbGV2SW1nIGZyb20gJy4uL2ltYWdlcy9tb2dpbGV2LmpwZyc7XG5pbXBvcnQgbWluc2tJbWcgZnJvbSAnLi4vaW1hZ2VzL21pbnNrLmpwZyc7XG5cbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbe1xuICAgIG5hbWU6ICfQkdGA0LXRgdGCJyxcbiAgICBsaW5rOiBicmVzdEltZ1xuICB9LFxuICB7XG4gICAgbmFtZTogJ9CS0LjRgtC10LHRgdC6JyxcbiAgICBsaW5rOiB2aXRlYnNrSW1nXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JPQvtC80LXQu9GMJyxcbiAgICBsaW5rOiBob21lbEltZ1xuICB9LFxuICB7XG4gICAgbmFtZTogJ9CT0YDQvtC00L3QvicsXG4gICAgbGluazogaHJvZG5vSW1nXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JzQvtCz0LjQu9C10LInLFxuICAgIGxpbms6IG1vZ2lsZXZJbWdcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQnNC40L3RgdC6JyxcbiAgICBsaW5rOiBtaW5za0ltZ1xuICB9XG5dO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzVXNlciA9IHtcbiAgbmFtZTogJy5wcm9maWxlX191c2VyJyxcbiAgYWJvdXQ6ICcucHJvZmlsZV9fdXNlci1qb2InLFxuICBhdmF0YXI6ICcucHJvZmlsZV9fYXZhdGFyJyxcbiAgYXZhdGFyV3JhcHBlcjogJy5wcm9maWxlX19pbWctd3JhcHBlcicsXG4gIHVzZXJOYW1lSW5wdXQ6ICduYW1lLWlucHV0JyxcbiAgam9iSW5wdXROYW1lOiAnam9iLWlucHV0JyxcbiAgYXZhdGFySW5wdXROYW1lOiAndXJsLWF2YXRhci1pbnB1dCdcbn1cblxuZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcbiAgYnV0dG9uQWRkTmV3Q2FyZDogJy5wcm9maWxlX19idXR0b25fYWRkJyxcbiAgcG9wVXBFZGl0UHJvZmlsZTogJy5wb3AtdXBfZWRpdC1wcm9maWxlJyxcbiAgZm9ybUVkaXRQcm9maWxlOiAnLnBvcC11cF9fZm9ybS1lZGl0LXByb2ZpbGUnLFxuICBmb3JtQWRkQ2FyZDogJy5wb3AtdXBfX2Zvcm0tYWRkLWNhcmQnLFxuICBwcm9maWxlQnV0dG9uRWRpdDogJy5wcm9maWxlX19idXR0b25fZWRpdCcsXG4gIHBvcFVwQWRkQ2FyZDogJy5wb3AtdXBfYWRkLWNhcmQnLFxuICBwb3BVcEZvcm06ICcucG9wLXVwX19mb3JtJyxcbiAgcG9wVXBCdXR0b25TYXZlOiAnLnBvcC11cF9fYnV0dG9uLXNhdmUnLFxuICBwb3BVcElucHV0OiAnLnBvcC11cF9faW5wdXQnLFxuICBwb3BVcElucHV0VXNlck5hbWU6ICcucG9wLXVwX19pbnB1dF91c2VyLW5hbWUnLFxuICBwb3BVcElucHV0VXNlckluZm86ICcucG9wLXVwX19pbnB1dF91c2VyLWpvYicsXG4gIHVzZXJOYW1lSW5wdXQ6ICduYW1lLWlucHV0JyxcbiAgdXNlckluZm9JbnB1dDogJ2pvYi1pbnB1dCcsXG4gIGNhcmROYW1lSW5wdXQ6ICduYW1lLWNhcmQtaW5wdXQnLFxuICBjYXJkTGlua0lucHV0OiAndXJsLWlucHV0JyxcbiAgcG9wVXBBdmF0YXI6ICcucG9wLXVwX2VkaXQtYXZhdGFyJyxcbiAgZm9ybUF2YXRhclByb2ZpbGU6ICcucG9wLXVwX19mb3JtLWVkaXQtYXZhdGFyJyxcbiAgcG9wdXBDb25maXJtOiAnLnBvcC11cF9kZWxldGUtY2FyZCdcbn1cblxuZXhwb3J0IGNvbnN0IHNlbGVjdG9yc1BvcHVwID0ge1xuICBwb3B1cEFjdGl2ZTogJ3BvcC11cF9hY3RpdmUnLFxuICBwb3B1cDogJ3BvcC11cCcsXG4gIHBvcFVwQ2xvc2VJY29uOiAncG9wLXVwX19jbG9zZS1pY29uJyxcbn1cblxuZXhwb3J0IGNvbnN0IHNlbGVjdG9yc0NhcmRzID0ge1xuICB0ZW1wbGF0ZUNhcmQ6ICcjdGVtcGxhdGUtY2FyZCcsXG4gIGFydGljbGVDYXJkOiAnLmNhcmQnLFxuICBzZWN0aW9uQ2FyZHM6ICcuY2FyZHMnLFxuICBpbWdDYXJkOiAnLmNhcmRfX2ltYWdlJyxcbiAgdGl0bGVDYXJkOiAnLmNhcmRfX3RpdGxlJyxcbiAgYnV0dG9uRGVsZXRlQ2FyZDogJy5jYXJkX19idXR0b24tZGVsZXRlJyxcbiAgYnV0dG9uRGVsZXRlQ2FyZEluYWN0aXZlOiAnY2FyZF9fYnV0dG9uLWRlbGV0ZV9pbmFjdGl2ZScsXG4gIGJ1dHRvbkxpa2VDYXJkOiAnLmNhcmRfX2J1dHRvbi1saWtlJyxcbiAgY291bnRlckxpa2U6ICcuY2FyZF9fbGlrZS1jb3VudGVyJyxcbiAgYnV0dG9uTGlrZUFjdGl2ZUNhcmQ6ICdjYXJkX19idXR0b24tbGlrZV9hY3RpdmUnLFxuICBmb3JtQWRkQ2FyZDogJy5wb3AtdXBfX2Zvcm0tYWRkLWNhcmQnLFxuICBwb3BVcFZpZXdDYXJkOiAnLnBvcC11cF92aWV3LWNhcmQnLFxuICBwb3BVcFZpZXdJbWc6ICcucG9wLXVwX192aWV3LWltZycsXG4gIHBvcFVwVmlld0NhcmRUaXRsZTogJy5wb3AtdXBfX3RpdGxlLXZpZXctaW1nJyxcbiAgcG9wVXBDbG9zZUljb25zOiAnLnBvcC11cF9fY2xvc2UtaWNvbicsXG4gIGlucHV0TmFtZUNhcmQ6ICcucG9wLXVwX19pbnB1dF9jYXJkLW5hbWUnLFxuICBpbnB1dFVybENhcmQ6ICcucG9wLXVwX19pbnB1dF9jYXJkLXVybCcsXG59XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RvcnNWYWxpZGF0aW9uID0ge1xuICBmb3JtU2VsZWN0b3I6ICcucG9wLXVwX19mb3JtJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3AtdXBfX2lucHV0JyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wLXVwX19idXR0b24nLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wLXVwX19idXR0b25faW5hY3RpdmUnLFxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3AtdXBfX2lucHV0X3R5cGVfZXJyb3InLFxuICBlcnJvckNsYXNzOiAncG9wLXVwX19lcnJvcl92aXNpYmxlJ1xufVxuIiwiZXhwb3J0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLnVybCA9IG9wdGlvbnMudXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XG4gIH1cblxuICBfY2hlY2tSZXNwb25zZUVycm9yID0gKHJlcykgPT4ge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgZ2V0VXNlckluZm9BcGkoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS91c2Vycy9tZWAsIHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlRXJyb3IpXG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS9jYXJkc2AsIHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2VFcnJvcilcbiAgfVxuXG4gIHNldFVzZXJJbmZvQXBpKHVzZXJEYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS91c2Vycy9tZWAsIHtcbiAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbmFtZTogdXNlckRhdGFbJ25hbWUtaW5wdXQnXSxcbiAgICAgICAgICBhYm91dDogdXNlckRhdGFbJ2pvYi1pbnB1dCddXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZUVycm9yKVxuICB9XG5cbiAgc2V0VXNlckF2YXRhckFwaSh1c2VyRGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBhdmF0YXI6IHVzZXJEYXRhWyd1cmwtYXZhdGFyLWlucHV0J11cbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlRXJyb3IpXG4gIH1cblxuICBhZGRDYXJkKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L2NhcmRzYCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgICBsaW5rOiBkYXRhLmxpbmtcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlRXJyb3IpXG4gIH1cblxuICBkZWxldGVDYXJkKGlkQ2FyZERlbGV0ZSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnVybH0vY2FyZHMvJHtpZENhcmREZWxldGV9YCwge1xuICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2VFcnJvcilcbiAgfVxuXG4gIGhhbmRsZVRvZ2dsZUxpa2VBcGkoZGF0YUNhcmQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L2NhcmRzLyR7KGRhdGFDYXJkPy5faXRlbT8uaWRDYXJkIHx8IGRhdGFDYXJkPy5faXRlbT8uX2lkKX0vbGlrZXNgLCB7XG4gICAgICAgIG1ldGhvZDogZGF0YUNhcmQuaXNMaWtlZCgpID8gXCJERUxFVEVcIiA6IFwiUFVUXCIsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICB9KVxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZUVycm9yKVxuICB9XG4gIGdldEFsbFByb21pc2UoKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldFVzZXJJbmZvQXBpKCksIHRoaXMuZ2V0SW5pdGlhbENhcmRzKCldKVxuICB9XG59XG4iLCIndXNlIHN0cmljdCdcblxuaW1wb3J0IHtcbiAgc2VsZWN0b3JzQ2FyZHNcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5leHBvcnQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBpdGVtLFxuICAgIHNlbGVjdG9yVGVtcGxhdGUsXG4gICAgaGFuZGxlQ2FyZENsaWNrLFxuICAgIGhhbmRsZUNhcmREZWxldGUsXG4gICAgaGFuZGxlTGlrZUNhcmQsXG4gICAgdXNlcklEXG4gIH0pIHtcbiAgICB0aGlzLl9pdGVtID0gaXRlbTtcbiAgICB0aGlzLl90aXRsZSA9IHRoaXMuX2l0ZW0ubmFtZTtcbiAgICB0aGlzLl9hbHQgPSB0aGlzLl9pdGVtLm5hbWU7XG4gICAgdGhpcy5fc3JjID0gdGhpcy5faXRlbS5saW5rO1xuICAgIHRoaXMuX2lkT3duZXIgPSB0aGlzLl9pdGVtLmlkT3duZXI7XG4gICAgdGhpcy5faWRDYXJkID0gdGhpcy5faXRlbS5pZENhcmRcbiAgICB0aGlzLl9saWtlcyA9IHRoaXMuX2l0ZW0ubGlrZXM7XG4gICAgdGhpcy5fc2VsZWN0b3JUZW1wbGF0ZSA9IHNlbGVjdG9yVGVtcGxhdGU7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUNhcmREZWxldGUgPSBoYW5kbGVDYXJkRGVsZXRlO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VDYXJkID0gaGFuZGxlTGlrZUNhcmQ7XG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklEO1xuICB9XG4gIF9nZXRUZW1wbGF0ZSA9ICgpID0+IHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3JUZW1wbGF0ZSkuY29udGVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yc0NhcmRzLmFydGljbGVDYXJkKS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9XG4gIGdlbmVyYXRlQ2FyZCA9ICgpID0+IHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9idXR0b25MaWtlQ2FyZCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnNDYXJkcy5idXR0b25MaWtlQ2FyZCk7XG4gICAgdGhpcy5fYnV0dG9uRGVsZXRlQ2FyZCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnNDYXJkcy5idXR0b25EZWxldGVDYXJkKTtcbiAgICB0aGlzLl9jb3VudGVyTGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnNDYXJkcy5jb3VudGVyTGlrZSk7XG4gICAgdGhpcy5faW1nQ2FyZCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnNDYXJkcy5pbWdDYXJkKTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzQ2FyZHMudGl0bGVDYXJkKS50ZXh0Q29udGVudCA9IHRoaXMuX3RpdGxlO1xuICAgIHRoaXMuX2ltZ0NhcmQuYWx0ID0gdGhpcy5fdGl0bGU7XG4gICAgdGhpcy5faW1nQ2FyZC5zcmMgPSB0aGlzLl9zcmM7XG4gICAgdGhpcy5fdXBkYXRlTGlrZVN0YXRlKHRoaXMuaXNMaWtlZCgpKTtcbiAgICB0aGlzLl9jaGVja0lzQ2FyZFVzZXIoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG5cbiAgX2NoZWNrSXNDYXJkVXNlciA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5faWRPd25lciAmJiAodGhpcy5faWRPd25lciAhPT0gdGhpcy5fdXNlcklkKSkge1xuICAgICAgdGhpcy5fYnV0dG9uRGVsZXRlQ2FyZC5jbGFzc0xpc3QuYWRkKHNlbGVjdG9yc0NhcmRzLmJ1dHRvbkRlbGV0ZUNhcmRJbmFjdGl2ZSlcbiAgICB9XG4gIH1cblxuICBpc0xpa2VkKCkge1xuICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKChpdGVtKSA9PiB7XG4gICAgICByZXR1cm4gKHRoaXMuX3VzZXJJZCA9PT0gaXRlbS5faWQpXG4gICAgfSlcbiAgfVxuXG4gIHNldExpa2UoZGF0YSkge1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcbiAgICB0aGlzLl91cGRhdGVMaWtlU3RhdGUodGhpcy5pc0xpa2VkKCkpO1xuICB9XG5cbiAgZGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICB9XG5cbiAgX3VwZGF0ZUxpa2VTdGF0ZShoYW5kbGVMaWtlKSB7XG4gICAgaWYgKGhhbmRsZUxpa2UpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkxpa2VDYXJkLmNsYXNzTGlzdC5hZGQoc2VsZWN0b3JzQ2FyZHMuYnV0dG9uTGlrZUFjdGl2ZUNhcmQpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvbkxpa2VDYXJkLmNsYXNzTGlzdC5yZW1vdmUoc2VsZWN0b3JzQ2FyZHMuYnV0dG9uTGlrZUFjdGl2ZUNhcmQpXG4gICAgfVxuICAgIHRoaXMuX2NvdW50ZXJMaWtlLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIHRoaXMuX2J1dHRvbkRlbGV0ZUNhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlKHRoaXMpKTtcbiAgICB0aGlzLl9idXR0b25MaWtlQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VDYXJkKHRoaXMpKTtcbiAgICB0aGlzLl9pbWdDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX2l0ZW0pKTtcbiAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnXG5pbXBvcnQge1xuICBzZWxlY3RvcnNDYXJkcyxcbiAgc2VsZWN0b3JzUG9wdXBcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAke3BvcHVwU2VsZWN0b3J9YCk7XG4gICAgdGhpcy5fY2xvc2VJY29uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihzZWxlY3RvcnNDYXJkcy5wb3BVcENsb3NlSWNvbnMpO1xuICB9XG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChzZWxlY3RvcnNQb3B1cC5wb3B1cEFjdGl2ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShzZWxlY3RvcnNQb3B1cC5wb3B1cEFjdGl2ZSk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2ZW50KSA9PiB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cbiAgX2hhbmRsZUNsaWNrSWNvbkNsb3NlID0gKGV2ZW50KSA9PiB7XG4gICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoc2VsZWN0b3JzUG9wdXAucG9wdXApIHx8IGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoc2VsZWN0b3JzUG9wdXAucG9wVXBDbG9zZUljb24pKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfTtcblxuICB9XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2xpY2tJY29uQ2xvc2UpO1xuICB9XG59XG4iLCIndXNlIHN0cmljdCdcblxuaW1wb3J0IHtcbiAgUG9wdXBcbn0gZnJvbSBcIi4vUG9wdXAuanNcIjtcbmltcG9ydCB7XG4gIHNlbGVjdG9yc1xufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihzZWxlY3Rvck5hbWUsIHN1Ym1pdEhhbmRsZXIpIHtcbiAgICBzdXBlcihzZWxlY3Rvck5hbWUpO1xuICAgIHRoaXMuc3VibWl0SGFuZGxlciA9IHN1Ym1pdEhhbmRsZXI7XG4gICAgdGhpcy5mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMucG9wVXBGb3JtKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ycy5wb3BVcElucHV0KTtcbiAgICB0aGlzLl9pbnB1dE5hbWUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wb3BVcElucHV0VXNlck5hbWUpO1xuICAgIHRoaXMuX2lucHV0VXNlckluZm8gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wb3BVcElucHV0VXNlckluZm8pO1xuXG4gICAgdGhpcy5fcG9wVXBCdXR0b25TYXZlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMucG9wVXBCdXR0b25TYXZlKTtcbiAgICB0aGlzLl9wb3BVcEJ1dHRvblRleHRDb250ZW50ID0gdGhpcy5fcG9wVXBCdXR0b25TYXZlLnRleHRDb250ZW50O1xuXG4gIH1cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5mb3JtLnJlc2V0KCk7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxuICBnZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICB9XG4gIHNldElucHV0VmFsdWVzKHZhbHVlcykge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgLy8g0YLRg9GCINCy0YHRgtCw0LLQu9GP0LXQvCDQsiBgdmFsdWVgINC40L3Qv9GD0YLQsCDQtNCw0L3QvdGL0LUg0LjQtyDQvtCx0YrQtdC60YLQsCDQv9C+INCw0YLRgNC40LHRg9GC0YMgYG5hbWVgINGN0YLQvtCz0L4g0LjQvdC/0YPRgtCwXG4gICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlc1tpbnB1dC5uYW1lXTtcbiAgICB9KTtcbiAgfVxuXG5cblxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX3BvcFVwQnV0dG9uU2F2ZS50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3BvcFVwQnV0dG9uU2F2ZS50ZXh0Q29udGVudCA9IHRoaXMuX3BvcFVwQnV0dG9uVGV4dENvbnRlbnQ7XG4gICAgfVxuICB9XG5cblxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5zdWJtaXRIYW5kbGVyKHRoaXMuZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gIH1cblxufVxuIiwiJ3VzZSBzdHJpY3QnXG5cbmltcG9ydCB7XG4gIFBvcHVwXG59IGZyb20gXCIuL1BvcHVwLmpzXCI7XG5pbXBvcnQge1xuICBzZWxlY3RvcnNDYXJkc1xufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcbiAgICBzdXBlcihzZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzQ2FyZHMucG9wVXBWaWV3SW1nKTtcbiAgICB0aGlzLl9pbWFnZU5hbWUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yc0NhcmRzLnBvcFVwVmlld0NhcmRUaXRsZSk7XG4gIH1cblxuICBvcGVuKGxpbmssIG5hbWUpIHtcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX2ltYWdlTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgc3VwZXIub3BlbigpXG4gIH1cbn1cbiIsIid1c2Ugc3RyaWN0J1xuXG5leHBvcnQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICByZW5kZXJlcixcbiAgICBjb250YWluZXJTZWxlY3RvclxuICB9KSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIGFkZEl0ZW0oY2FyZCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoY2FyZCk7XG4gIH1cblxuICBwcmVwZW5kSXRlbShjYXJkKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoY2FyZCk7XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gIH1cblxuICByZW5kZXJJdGVtcyhjYXJkcykge1xuICAgIHRoaXMuY2xlYXIoKTtcbiAgICBjYXJkcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG59XG4iLCIndXNlIHN0cmljdCdcbmV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBzZWxlY3RvcnNVc2VyXG4gIH0pIHtcbiAgICB0aGlzLl9zZWxlY3RvcnNVc2VyID0gc2VsZWN0b3JzVXNlcjtcbiAgICB0aGlzLl91c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3JzVXNlci5uYW1lKTtcbiAgICB0aGlzLl91c2VySm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcnNVc2VyLmFib3V0KTtcbiAgICB0aGlzLl91c2VyQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcnNVc2VyLmF2YXRhcik7XG4gICAgdGhpcy5fbmFtZUlucHV0TmFtZSA9IHRoaXMuX3NlbGVjdG9yc1VzZXIudXNlck5hbWVJbnB1dDtcbiAgICB0aGlzLl9qb2JJbnB1dE5hbWUgPSB0aGlzLl9zZWxlY3RvcnNVc2VyLmpvYklucHV0TmFtZTtcbiAgICB0aGlzLl9hdmF0YXJJbnB1dE5hbWUgPSB0aGlzLl9zZWxlY3RvcnNVc2VyLmF2YXRhcklucHV0TmFtZTtcbiAgfVxuICBnZXRVc2VySW5mbyA9ICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgW3RoaXMuX25hbWVJbnB1dE5hbWVdOiB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCxcbiAgICAgIFt0aGlzLl9qb2JJbnB1dE5hbWVdOiB0aGlzLl91c2VySm9iLnRleHRDb250ZW50XG4gICAgfVxuICB9XG5cbiAgc2V0VXNlckluZm8gPSAodmFsdWVzKSA9PiB7XG4gICAgdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQgPSB2YWx1ZXNbdGhpcy5fbmFtZUlucHV0TmFtZV0gfHwgdmFsdWVzWyduYW1lJ107XG4gICAgdGhpcy5fdXNlckpvYi50ZXh0Q29udGVudCA9IHZhbHVlc1t0aGlzLl9qb2JJbnB1dE5hbWVdIHx8IHZhbHVlc1snYWJvdXQnXTtcbiAgICB0aGlzLl91c2VyQXZhdGFyLnNyYyA9IHZhbHVlcy5hdmF0YXIgfHwgdmFsdWVzW3RoaXMuX2F2YXRhcklucHV0TmFtZV07XG4gIH1cbn1cbiIsIid1c2Ugc3RyaWN0J1xuXG5leHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGZvcm1FbGVtZW50LCBzZWxlY3RvcnMpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX3NlbGVjdG9ycyA9IHNlbGVjdG9ycztcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2VsZWN0b3JzLmlucHV0U2VsZWN0b3IpKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG4gIF9zaG93SW5wdXRFcnJvciA9ICgpID0+IHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZWxlY3RvcnMuaW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl9lcnJvck1lc3NhZ2U7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2VsZWN0b3JzLmVycm9yQ2xhc3MpO1xuICB9O1xuICBfaGlkZUlucHV0RXJyb3IgPSAoKSA9PiB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2VsZWN0b3JzLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2VsZWN0b3JzLmVycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICB9O1xuICBfaXNWYWxpZCA9ICgpID0+IHtcbiAgICBpZiAoIXRoaXMuX2lucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoKTtcbiAgICB9XG4gIH07XG4gIF9oYXNJbnZhbGlkSW5wdXQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9O1xuICBfZW5hYmxlU3VibWl0QnV0dG9uID0gKCkgPT4ge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZWxlY3RvcnMuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gIH1cbiAgX2Rpc2FibGVTdWJtaXRCdXR0b24gPSAoKSA9PiB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NlbGVjdG9ycy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgfVxuICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9lbmFibGVTdWJtaXRCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICAgIH1cbiAgfVxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9pbnB1dEVsZW1lbnQgPSBpbnB1dEVsZW1lbnQ7XG4gICAgICB0aGlzLl9lcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLl9pbnB1dEVsZW1lbnQubmFtZX0tZXJyb3JgKTtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKCk7XG4gICAgfSk7XG4gIH1cbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLl9pbnB1dEVsZW1lbnQgPSBpbnB1dEVsZW1lbnQ7XG4gICAgICAgIHRoaXMuX2Vycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke3RoaXMuX2lucHV0RWxlbWVudC5uYW1lfS1lcnJvcmApO1xuICAgICAgICB0aGlzLl9lcnJvck1lc3NhZ2UgPSB0aGlzLl9pbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgICAgIHRoaXMuX2lzVmFsaWQoKTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pXG4gIH07XG4gIGVuYWJsZVZhbGlkYXRpb24gPSAoKSA9PiB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnXG5cbmltcG9ydCB7XG4gIFBvcHVwXG59IGZyb20gXCIuL1BvcHVwLmpzXCI7XG5pbXBvcnQge1xuICBzZWxlY3RvcnNcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihzZWxlY3Rvck5hbWUsIHN1Ym1pdEhhbmRsZXIpIHtcbiAgICBzdXBlcihzZWxlY3Rvck5hbWUpO1xuICAgIHRoaXMuZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvcFVwRm9ybSk7XG4gICAgdGhpcy5fcG9wVXBCdXR0b25TYXZlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMucG9wVXBCdXR0b25TYXZlKTtcbiAgICB0aGlzLl9wb3BVcEJ1dHRvblRleHRDb250ZW50ID0gdGhpcy5fcG9wVXBCdXR0b25TYXZlLnRleHRDb250ZW50O1xuICAgIHRoaXMuc3VibWl0SGFuZGxlciA9IHN1Ym1pdEhhbmRsZXI7XG4gIH1cblxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX3BvcFVwQnV0dG9uU2F2ZS50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3BvcFVwQnV0dG9uU2F2ZS50ZXh0Q29udGVudCA9IHRoaXMuX3BvcFVwQnV0dG9uVGV4dENvbnRlbnQ7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoY2FyZCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5zdWJtaXRIYW5kbGVyKGNhcmQpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBzZWxlY3RvcnMsXG4gIHNlbGVjdG9yc0NhcmRzLFxuICBzZWxlY3RvcnNVc2VyLFxuICBzZWxlY3RvcnNWYWxpZGF0aW9uXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQge1xuICBBcGlcbn0gZnJvbSAnLi4vY29tcG9uZW50cy9BcGkuanMnO1xuaW1wb3J0IHtcbiAgQ2FyZFxufSBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IHtcbiAgUG9wdXBXaXRoRm9ybVxufSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IHtcbiAgUG9wdXBXaXRoSW1hZ2Vcbn0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQge1xuICBTZWN0aW9uXG59IGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQge1xuICBVc2VySW5mb1xufSBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCB7XG4gIEZvcm1WYWxpZGF0b3Jcbn0gZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCB7XG4gIFBvcHVwV2l0aENvbmZpcm1hdGlvblxufSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyc7XG5cbmltcG9ydCAnLi9pbmRleC5jc3MnO1xuXG5jb25zdCB1c2VyQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnNVc2VyLmF2YXRhcldyYXBwZXIpO1xuY29uc3QgcHJvZmlsZUJ1dHRvbkVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wcm9maWxlQnV0dG9uRWRpdCk7XG5jb25zdCBidXR0b25BZGROZXdDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuYnV0dG9uQWRkTmV3Q2FyZCk7XG5jb25zdCBmb3JtRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5mb3JtRWRpdFByb2ZpbGUpO1xuY29uc3QgZm9ybUFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5mb3JtQWRkQ2FyZCk7XG5jb25zdCBmb3JtRWRpdEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmZvcm1BdmF0YXJQcm9maWxlKTtcblxuY29uc3Qgb3B0aW9ucyA9IHtcbiAgdXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC01MScsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiAnZDRjNDE2NmQtN2RhMS00MWU1LTljMTItNmFkYTkwNTIzMmFmJyxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gIH1cbn1cblxubGV0IHVzZXJJRCA9IG51bGw7XG5cbmNvbnN0IHByb2ZpbGVWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtRWRpdFByb2ZpbGUsIHNlbGVjdG9yc1ZhbGlkYXRpb24pO1xucHJvZmlsZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGNhcmRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtQWRkQ2FyZCwgc2VsZWN0b3JzVmFsaWRhdGlvbik7XG5jYXJkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgYXZhdGFyUHJvZmlsZVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1FZGl0QXZhdGFyLCBzZWxlY3RvcnNWYWxpZGF0aW9uKTtcbmF2YXRhclByb2ZpbGVWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBwcm9maWxlSW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIHNlbGVjdG9yc1VzZXJcbn0pO1xuXG5jb25zdCBkYXRhQXBpID0gbmV3IEFwaShvcHRpb25zKTtcblxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbih7XG4gIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgIGNvbnN0IG5ld0NhcmRBcGkgPSBjcmVhdGVDYXJkKHtcbiAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgIGxpbms6IGl0ZW0ubGluayxcbiAgICAgIGlkT3duZXI6IGl0ZW0ub3duZXIuX2lkLFxuICAgICAgaWRDYXJkOiBpdGVtLl9pZCxcbiAgICAgIGxpa2VzOiBpdGVtLmxpa2VzXG4gICAgfSk7XG4gICAgY2FyZExpc3QuYWRkSXRlbShuZXdDYXJkQXBpKTtcbiAgfSxcbiAgY29udGFpbmVyU2VsZWN0b3I6IHNlbGVjdG9yc0NhcmRzLnNlY3Rpb25DYXJkc1xufSk7XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YUNhcmQpIHtcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKHtcbiAgICBpdGVtOiBkYXRhQ2FyZCxcbiAgICBzZWxlY3RvclRlbXBsYXRlOiBzZWxlY3RvcnNDYXJkcy50ZW1wbGF0ZUNhcmQsXG4gICAgaGFuZGxlQ2FyZENsaWNrOiBvcGVuSW1hZ2UsXG4gICAgaGFuZGxlQ2FyZERlbGV0ZTogaGFuZGxlQ2FyZERlbGV0ZSxcbiAgICBoYW5kbGVMaWtlQ2FyZDogaGFuZGxlTGlrZUNhcmQsXG4gICAgdXNlcklEOiB1c2VySURcbiAgfSlcbiAgcmV0dXJuIG5ld0NhcmQuZ2VuZXJhdGVDYXJkKCk7XG59XG5cbmNvbnN0IHBvcHVwQ29uZmlybURlbGV0ZSA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oc2VsZWN0b3JzLnBvcHVwQ29uZmlybSwgKGNhcmREYXRhKSA9PiB7XG4gIGhhbmRsZUNvbmZpcm1DYXJkRGVsZXRlKGNhcmREYXRhKVxufSk7XG5cbmNvbnN0IHBvcFVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKHNlbGVjdG9yc0NhcmRzLnBvcFVwVmlld0NhcmQpO1xuXG5mdW5jdGlvbiBnZXRQb3B1cFdpdGhGb3JtKHNlbGVjdG9ycywgcG9wVXAsIGFwaU1ldGhvZCwgdXNlck1ldGhvZCkge1xuICByZXR1cm4gcG9wVXAgPSBuZXcgUG9wdXBXaXRoRm9ybShzZWxlY3RvcnMsIChpbnB1dFZhbHVlcykgPT4ge1xuICAgIHBvcFVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gICAgZGF0YUFwaVthcGlNZXRob2RdKGlucHV0VmFsdWVzKVxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgcHJvZmlsZUluZm9bdXNlck1ldGhvZF0oZGF0YSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8g0LLRi9Cy0LXQtNC10Lwg0L7RiNC40LHQutGDINCyINC60L7QvdGB0L7Qu9GMXG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBwb3BVcC5jbG9zZSgpO1xuICAgICAgICBwb3BVcC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0pO1xuICB9KTtcbn1cbmNvbnN0IHByb2ZpbGVQb3BVcCA9IGdldFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JzLnBvcFVwRWRpdFByb2ZpbGUsIHByb2ZpbGVQb3BVcCwgJ3NldFVzZXJJbmZvQXBpJywgJ3NldFVzZXJJbmZvJyk7XG5jb25zdCBhdmF0YXJQb3BVcCA9IGdldFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JzLnBvcFVwQXZhdGFyLCBhdmF0YXJQb3BVcCwgJ3NldFVzZXJBdmF0YXJBcGknLCAnc2V0VXNlckluZm8nKTtcbmNvbnN0IGFkZENhcmRQb3BVcCA9IG5ldyBQb3B1cFdpdGhGb3JtKHNlbGVjdG9ycy5wb3BVcEFkZENhcmQsIChkYXRhKSA9PiB7XG4gIGFkZENhcmRQb3BVcC5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICBjb25zdCBuZXdEYXRhID0ge1xuICAgIG5hbWU6IGRhdGFbc2VsZWN0b3JzLmNhcmROYW1lSW5wdXRdLFxuICAgIGxpbms6IGRhdGFbc2VsZWN0b3JzLmNhcmRMaW5rSW5wdXRdXG4gIH07XG4gIGRhdGFBcGkuYWRkQ2FyZChuZXdEYXRhKVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIGNhcmRMaXN0LnByZXBlbmRJdGVtKGNyZWF0ZUNhcmQocmVzKSk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8g0LLRi9Cy0LXQtNC10Lwg0L7RiNC40LHQutGDINCyINC60L7QvdGB0L7Qu9GMXG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBhZGRDYXJkUG9wVXAuY2xvc2UoKVxuICAgICAgYWRkQ2FyZFBvcFVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgIH0pO1xufSk7XG5cbmZ1bmN0aW9uIGhhbmRsZUxpa2VDYXJkKGNhcmREYXRhKSB7XG4gIGRhdGFBcGkuaGFuZGxlVG9nZ2xlTGlrZUFwaShjYXJkRGF0YSlcbiAgICAudGhlbihkYXRhID0+IHtcbiAgICAgIGNhcmREYXRhLnNldExpa2UoZGF0YSk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBoYW5kbGVDYXJkRGVsZXRlKGNhcmQpIHtcbiAgcG9wdXBDb25maXJtRGVsZXRlLm9wZW4oKTtcbiAgcG9wdXBDb25maXJtRGVsZXRlLnNldEV2ZW50TGlzdGVuZXJzKGNhcmQpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDb25maXJtQ2FyZERlbGV0ZShjYXJkKSB7XG4gIHBvcHVwQ29uZmlybURlbGV0ZS5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICBkYXRhQXBpLmRlbGV0ZUNhcmQoYCR7Y2FyZD8uX2lkQ2FyZCB8fCBjYXJkPy5faXRlbT8uX2lkfWApXG4gICAgLnRoZW4oKCkgPT4gY2FyZC5kZWxldGVDYXJkKCkpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBDb25maXJtRGVsZXRlLmNsb3NlKCk7XG4gICAgICBwb3B1cENvbmZpcm1EZWxldGUucmVuZGVyTG9hZGluZyhmYWxzZSlcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpOyAvLyDQstGL0LLQtdC00LXQvCDQvtGI0LjQsdC60YMg0LIg0LrQvtC90YHQvtC70YxcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gb3BlbkltYWdlKGl0ZW0pIHtcbiAgcG9wVXBXaXRoSW1hZ2Uub3BlbihpdGVtLmxpbmssIGl0ZW0ubmFtZSk7XG59XG5cbmZ1bmN0aW9uIGdldERhdGFBbGxQcm9taXNlKCkge1xuICBkYXRhQXBpLmdldEFsbFByb21pc2UoKVxuICAgIC50aGVuKChbZGF0YSwgZGF0YUNhcmRzXSkgPT4ge1xuICAgICAgcHJvZmlsZUluZm8uc2V0VXNlckluZm8oZGF0YSk7XG4gICAgICB1c2VySUQgPSBkYXRhLl9pZDtcbiAgICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKGRhdGFDYXJkcyk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KVxufVxuZ2V0RGF0YUFsbFByb21pc2UoKTtcblxuYnV0dG9uQWRkTmV3Q2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgYWRkQ2FyZFBvcFVwLm9wZW4oKTtcbiAgY2FyZFZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbn0pO1xuXG5wcm9maWxlQnV0dG9uRWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgY29uc3QgdXNlckluZm8gPSBwcm9maWxlSW5mby5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlUG9wVXAuc2V0SW5wdXRWYWx1ZXModXNlckluZm8pO1xuICBwcm9maWxlVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwcm9maWxlUG9wVXAub3BlbigpO1xufSk7XG5cbnVzZXJBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGF2YXRhclBvcFVwLm9wZW4oKTtcbiAgYXZhdGFyUHJvZmlsZVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKVxufSlcbmF2YXRhclBvcFVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5hZGRDYXJkUG9wVXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnByb2ZpbGVQb3BVcC5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBDb25maXJtRGVsZXRlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3BVcFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xuIl0sIm5hbWVzIjpbInNlbGVjdG9yc1VzZXIiLCJuYW1lIiwiYWJvdXQiLCJhdmF0YXIiLCJhdmF0YXJXcmFwcGVyIiwidXNlck5hbWVJbnB1dCIsImpvYklucHV0TmFtZSIsImF2YXRhcklucHV0TmFtZSIsInNlbGVjdG9ycyIsInNlbGVjdG9yc1BvcHVwIiwic2VsZWN0b3JzQ2FyZHMiLCJzZWxlY3RvcnNWYWxpZGF0aW9uIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJBcGkiLCJvcHRpb25zIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsInRoaXMiLCJ1cmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJfY2hlY2tSZXNwb25zZUVycm9yIiwidXNlckRhdGEiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImRhdGEiLCJsaW5rIiwiaWRDYXJkRGVsZXRlIiwiZGF0YUNhcmQiLCJfaXRlbSIsImlkQ2FyZCIsIl9pZCIsImlzTGlrZWQiLCJhbGwiLCJnZXRVc2VySW5mb0FwaSIsImdldEluaXRpYWxDYXJkcyIsIkNhcmQiLCJpdGVtIiwic2VsZWN0b3JUZW1wbGF0ZSIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUNhcmREZWxldGUiLCJoYW5kbGVMaWtlQ2FyZCIsInVzZXJJRCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIl9zZWxlY3RvclRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2J1dHRvbkxpa2VDYXJkIiwiX2J1dHRvbkRlbGV0ZUNhcmQiLCJfY291bnRlckxpa2UiLCJfaW1nQ2FyZCIsInRleHRDb250ZW50IiwiX3RpdGxlIiwiYWx0Iiwic3JjIiwiX3NyYyIsIl91cGRhdGVMaWtlU3RhdGUiLCJfY2hlY2tJc0NhcmRVc2VyIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2lkT3duZXIiLCJfdXNlcklkIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVDYXJkRGVsZXRlIiwiX2hhbmRsZUxpa2VDYXJkIiwiX2hhbmRsZUNhcmRDbGljayIsIl9hbHQiLCJpZE93bmVyIiwiX2lkQ2FyZCIsIl9saWtlcyIsImxpa2VzIiwic29tZSIsInJlbW92ZSIsImhhbmRsZUxpa2UiLCJsZW5ndGgiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJldmVudCIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJfcG9wdXAiLCJfY2xvc2VJY29uIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVDbGlja0ljb25DbG9zZSIsIlBvcHVwV2l0aEZvcm0iLCJzZWxlY3Rvck5hbWUiLCJzdWJtaXRIYW5kbGVyIiwiZm9ybSIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2lucHV0TmFtZSIsIl9pbnB1dFVzZXJJbmZvIiwiX3BvcFVwQnV0dG9uU2F2ZSIsIl9wb3BVcEJ1dHRvblRleHRDb250ZW50IiwicmVzZXQiLCJfZm9ybVZhbHVlcyIsImZvckVhY2giLCJpbnB1dCIsInZhbHVlIiwidmFsdWVzIiwiaXNMb2FkaW5nIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJnZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aEltYWdlIiwic2VsZWN0b3IiLCJfcG9wdXBJbWFnZSIsIl9pbWFnZU5hbWUiLCJTZWN0aW9uIiwicmVuZGVyZXIiLCJjb250YWluZXJTZWxlY3RvciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJjYXJkIiwiYXBwZW5kIiwicHJlcGVuZCIsImlubmVySFRNTCIsImNhcmRzIiwiY2xlYXIiLCJVc2VySW5mbyIsIl9uYW1lSW5wdXROYW1lIiwiX3VzZXJOYW1lIiwiX2pvYklucHV0TmFtZSIsIl91c2VySm9iIiwiX3VzZXJBdmF0YXIiLCJfYXZhdGFySW5wdXROYW1lIiwiX3NlbGVjdG9yc1VzZXIiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRFbGVtZW50IiwiX3NlbGVjdG9ycyIsIl9lcnJvckVsZW1lbnQiLCJfZXJyb3JNZXNzYWdlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsIl9idXR0b25FbGVtZW50Iiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9lbmFibGVTdWJtaXRCdXR0b24iLCJfZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9mb3JtRWxlbWVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2lzVmFsaWQiLCJBcnJheSIsImZyb20iLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJ1c2VyQXZhdGFyIiwicHJvZmlsZUJ1dHRvbkVkaXQiLCJidXR0b25BZGROZXdDYXJkIiwiZm9ybUVkaXRQcm9maWxlIiwiZm9ybUFkZENhcmQiLCJmb3JtRWRpdEF2YXRhciIsInByb2ZpbGVWYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwiY2FyZFZhbGlkYXRvciIsImF2YXRhclByb2ZpbGVWYWxpZGF0b3IiLCJwcm9maWxlSW5mbyIsImRhdGFBcGkiLCJhdXRob3JpemF0aW9uIiwiY2FyZExpc3QiLCJuZXdDYXJkQXBpIiwiY3JlYXRlQ2FyZCIsIm93bmVyIiwiYWRkSXRlbSIsIm9wZW5JbWFnZSIsImdlbmVyYXRlQ2FyZCIsInBvcHVwQ29uZmlybURlbGV0ZSIsImNhcmREYXRhIiwicmVuZGVyTG9hZGluZyIsImRlbGV0ZUNhcmQiLCJmaW5hbGx5IiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwicG9wVXBXaXRoSW1hZ2UiLCJnZXRQb3B1cFdpdGhGb3JtIiwicG9wVXAiLCJhcGlNZXRob2QiLCJ1c2VyTWV0aG9kIiwiaW5wdXRWYWx1ZXMiLCJwcm9maWxlUG9wVXAiLCJhdmF0YXJQb3BVcCIsImFkZENhcmRQb3BVcCIsIm5ld0RhdGEiLCJhZGRDYXJkIiwicHJlcGVuZEl0ZW0iLCJoYW5kbGVUb2dnbGVMaWtlQXBpIiwic2V0TGlrZSIsIm9wZW4iLCJzZXRFdmVudExpc3RlbmVycyIsImdldEFsbFByb21pc2UiLCJkYXRhQ2FyZHMiLCJzZXRVc2VySW5mbyIsInJlbmRlckl0ZW1zIiwicmVzZXRWYWxpZGF0aW9uIiwidXNlckluZm8iLCJnZXRVc2VySW5mbyIsInNldElucHV0VmFsdWVzIl0sInNvdXJjZVJvb3QiOiIifQ==