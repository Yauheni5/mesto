(()=>{"use strict";var e={name:".profile__user",about:".profile__user-job",avatar:".profile__avatar",avatarWrapper:".profile__img-wrapper",userNameInput:"name-input",jobInputName:"job-input",avatarInputName:"url-avatar-input"},t=".pop-up__form",n=".pop-up__button-save",r="pop-up_active",o="card__button-like_active",i={formSelector:".pop-up__form",inputSelector:".pop-up__input",submitButtonSelector:".pop-up__button",inactiveButtonClass:"pop-up__button_inactive",inputErrorClass:"pop-up__input_type_error",errorClass:"pop-up__error_visible"};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))},(n="_checkResponseError")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this.url=t.url,this._headers=t.headers}var t,n;return t=e,(n=[{key:"getUserInfoApi",value:function(){return fetch("".concat(this.url,"/users/me"),{method:"GET",headers:this._headers}).then(this._checkResponseError)}},{key:"getInitialCards",value:function(){return fetch("".concat(this.url,"/cards"),{method:"GET",headers:this._headers}).then(this._checkResponseError)}},{key:"setUserInfoApi",value:function(e){return fetch("".concat(this.url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e["name-input"],about:e["job-input"]})}).then(this._checkResponseError)}},{key:"setUserAvatarApi",value:function(e){return fetch("".concat(this.url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e["url-avatar-input"]})}).then(this._checkResponseError)}},{key:"addCard",value:function(e){return fetch("".concat(this.url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkResponseError)}},{key:"deleteCard",value:function(e){return fetch("".concat(this.url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponseError)}},{key:"handleToggleLikeApi",value:function(e){return console.log(e),fetch("".concat(this.url,"/cards/").concat(e._item.id,"/likes"),{method:e.isLiked()?"DELETE":"PUT",headers:this._headers}).then(this._checkResponseError)}},{key:"getAllPromise",value:function(){return Promise.all([this.getUserInfoApi(),this.getInitialCards()])}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){function e(t){var n=this,r=t.item,o=t.selectorTemplate,i=t.handleCardClick,a=t.handleCardDelete,u=t.handleLikeCard,c=t.userID;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"_getTemplate",(function(){return document.querySelector(n._selectorTemplate).content.querySelector(".card").cloneNode(!0)})),s(this,"generateCard",(function(){return n._element=n._getTemplate(),n._buttonLikeCard=n._element.querySelector(".card__button-like"),n._buttonDeleteCard=n._element.querySelector(".card__button-delete"),n._counterLike=n._element.querySelector(".card__like-counter"),n._imgCard=n._element.querySelector(".card__image"),n._element.querySelector(".card__title").textContent=n._title,n._imgCard.alt=n._title,n._imgCard.src=n._src,n._updateLikeState(n.isLiked()),n._checkIsCardUser(),n._setEventListeners(),n._element})),s(this,"_checkIsCardUser",(function(){n._idOwner&&n._idOwner!==n._userId&&n._buttonDeleteCard.classList.add("card__button-delete_inactive")})),s(this,"_setEventListeners",(function(){n._buttonDeleteCard.addEventListener("click",(function(){return n._handleCardDelete(n)})),n._buttonLikeCard.addEventListener("click",(function(){return n._handleLikeCard(n)})),n._imgCard.addEventListener("click",(function(){return n._handleCardClick(n._item)}))})),this._item=r,this._title=this._item.name,this._alt=this._item.name,this._src=this._item.link,this._idOwner=this._item.idOwner,this._idCard=this._item.idCard,this._likes=this._item.likes,this._selectorTemplate=o,this._handleCardClick=i,this._handleCardDelete=a,this._handleLikeCard=u,this._userId=c}var t,n;return t=e,(n=[{key:"isLiked",value:function(){var e=this;return this._likes.some((function(t){return e._userId===t._id}))}},{key:"setLike",value:function(e){this._likes=e.likes,this._updateLikeState(this.isLiked())}},{key:"deleteCard",value:function(){this._element.remove()}},{key:"_updateLikeState",value:function(e){e?this._buttonLikeCard.classList.add(o):this._buttonLikeCard.classList.remove(o),this._counterLike.textContent=this._likes.length}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),f(this,"_handleClickIconClose",(function(e){(e.target.classList.contains("pop-up")||e.target.classList.contains("pop-up__close-icon"))&&n.close()})),this._popup=document.querySelector("".concat(t)),this._closeIcon=this._popup.querySelector(".pop-up__close-icon")}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add(r),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove(r),document.removeEventListener("keyup",this._handleEscClose)}},{key:"setEventListeners",value:function(){this._popup.addEventListener("click",this._handleClickIconClose)}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=m(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},y.apply(this,arguments)}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function v(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(c,e);var r,o,i,a,u=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(i);if(a){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function c(e,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(o=u.call(this,e)).submitHandler=r,o.form=o._popup.querySelector(t),o._inputList=o._popup.querySelectorAll(".pop-up__input"),o._inputName=o._popup.querySelector(".pop-up__input_user-name"),o._inputUserInfo=o._popup.querySelector(".pop-up__input_user-job"),o._popUpButtonSave=o._popup.querySelector(n),o._popUpButtonTextContent=o._popUpButtonSave.textContent,o}return r=c,(o=[{key:"close",value:function(){this.form.reset(),y(g(c.prototype),"close",this).call(this)}},{key:"getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"renderLoading",value:function(e){this._popUpButtonSave.textContent=e?"Сохранение...":this._popUpButtonTextContent}},{key:"setEventListeners",value:function(){var e=this;y(g(c.prototype),"setEventListeners",this).call(this),this.form.addEventListener("submit",(function(t){t.preventDefault(),e.submitHandler(e.getInputValues())}))}}])&&_(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),c}(d);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=O(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},C.apply(this,arguments)}function O(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function L(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(r);if(o){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return L(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._popupImage=t._popup.querySelector(".pop-up__view-img"),t._imageName=t._popup.querySelector(".pop-up__title-view-img"),t}return t=a,(n=[{key:"open",value:function(e,t){this._popupImage.src=e,this._popupImage.alt=t,this._imageName.textContent=t,C(j(a.prototype),"open",this).call(this)}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d);function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T=function(){function e(t){var n=t.renderer,r=t.containerSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=n,this._container=document.querySelector(r)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"prependItem",value:function(e){this._container.prepend(e)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(e){var t=this;this.clear(),e.forEach((function(e){return t._renderer(e)}))}}])&&P(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t,n){return t&&U(e.prototype,t),n&&U(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=R((function e(t){var n=this,r=t.selectorsUser;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),q(this,"getUserInfo",(function(){var e;return q(e={},n._nameInputName,n._userName.textContent),q(e,n._jobInputName,n._userJob.textContent),e})),q(this,"setUserInfo",(function(e){n._userName.textContent=e[n._nameInputName]||e.name,n._userJob.textContent=e[n._jobInputName]||e.about,n._userAvatar.src=e.avatar||e[n._avatarInputName]})),this._selectorsUser=r,this._userName=document.querySelector(this._selectorsUser.name),this._userJob=document.querySelector(this._selectorsUser.about),this._userAvatar=document.querySelector(this._selectorsUser.avatar),this._nameInputName=this._selectorsUser.userNameInput,this._jobInputName=this._selectorsUser.jobInputName,this._avatarInputName=this._selectorsUser.avatarInputName}));function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),x(this,"_showInputError",(function(){r._inputElement.classList.add(r._selectors.inputErrorClass),r._errorElement.textContent=r._errorMessage,r._errorElement.classList.add(r._selectors.errorClass)})),x(this,"_hideInputError",(function(){r._inputElement.classList.remove(r._selectors.inputErrorClass),r._errorElement.classList.remove(r._selectors.errorClass),r._errorElement.textContent=""})),x(this,"_isValid",(function(){r._inputElement.validity.valid?r._hideInputError():r._showInputError()})),x(this,"_hasInvalidInput",(function(){return r._inputList.some((function(e){return!e.validity.valid}))})),x(this,"_enableSubmitButton",(function(){r._buttonElement.classList.add(r._selectors.inactiveButtonClass),r._buttonElement.setAttribute("disabled","disabled")})),x(this,"_disableSubmitButton",(function(){r._buttonElement.classList.remove(r._selectors.inactiveButtonClass),r._buttonElement.removeAttribute("disabled")})),x(this,"_toggleButtonState",(function(){r._hasInvalidInput()?r._enableSubmitButton():r._disableSubmitButton()})),x(this,"_setEventListeners",(function(){r._toggleButtonState(),r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._inputElement=e,r._errorElement=r._formElement.querySelector(".".concat(r._inputElement.name,"-error")),r._errorMessage=r._inputElement.validationMessage,r._isValid(),r._toggleButtonState()}))}))})),x(this,"enableValidation",(function(){r._setEventListeners()})),this._formElement=t,this._selectors=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._selectors.inputSelector)),this._buttonElement=this._formElement.querySelector(n.submitButtonSelector)}var t,n;return t=e,(n=[{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._inputElement=t,e._errorElement=e._formElement.querySelector(".".concat(e._inputElement.name,"-error")),e._hideInputError()}))}}])&&A(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(){return H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=J(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},H.apply(this,arguments)}function J(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=W(e)););return e}function M(e,t){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},M(e,t)}function G(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(c,e);var r,o,i,a,u=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=W(i);if(a){var n=W(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return G(this,e)});function c(e,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(o=u.call(this,e)).form=o._popup.querySelector(t),o._popUpButtonSave=o._popup.querySelector(n),o._popUpButtonTextContent=o._popUpButtonSave.textContent,o.submitHandler=r,o}return r=c,(o=[{key:"renderLoading",value:function(e){this._popUpButtonSave.textContent=e?"Сохранение...":this._popUpButtonTextContent}},{key:"setEventListeners",value:function(e){var t=this;H(W(c.prototype),"setEventListeners",this).call(this),this.form.addEventListener("submit",(function(n){n.preventDefault(),t.submitHandler(e)}))}}])&&V(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),c}(d);function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F=document.querySelector(e.avatarWrapper),K=document.querySelector(".profile__button_edit"),Q=document.querySelector(".profile__button_add"),X=document.querySelector(".pop-up__form-edit-profile"),Y=document.querySelector(".pop-up__form-add-card"),Z=document.querySelector(".pop-up__form-edit-avatar"),ee=null,te=new N(X,i);te.enableValidation();var ne=new N(Y,i);ne.enableValidation();var re=new N(Z,i);re.enableValidation();var oe=new B({selectorsUser:e}),ie=new u({url:"https://mesto.nomoreparties.co/v1/cohort-51",headers:{authorization:"d4c4166d-7da1-41e5-9c12-6ada905232af","Content-Type":"application/json"}}),ae=new T({renderer:function(e){var t=ue({name:e.name,link:e.link,idOwner:e.owner._id,id:e._id,likes:e.likes});ae.addItem(t)},containerSelector:".cards"});function ue(e){return new l({item:e,selectorTemplate:"#template-card",handleCardClick:ye,handleCardDelete:_e,handleLikeCard:he,userID:ee}).generateCard()}var ce=new z(".pop-up_delete-card",(function(e){var t;t=e,ce.renderLoading(!0),ie.deleteCard(t._item.id).then((function(){return t.deleteCard()})).finally((function(){ce.close(),ce.renderLoading(!1)})).catch((function(e){console.log(e)}))})),se=new I(".pop-up_view-card");function le(e,t,n,r){return t=new k(e,(function(e){t.renderLoading(!0),ie[n](e).then((function(e){oe[r](e)})).catch((function(e){console.log(e)})).finally((function(){t.close(),t.renderLoading(!1)}))}))}var pe=le(".pop-up_edit-profile",pe,"setUserInfoApi","setUserInfo"),fe=le(".pop-up_edit-avatar",fe,"setUserAvatarApi","setUserInfo"),de=new k(".pop-up_add-card",(function(e){de.renderLoading(!0);var t={name:e["name-card-input"],link:e["url-input"]};ie.addCard(t).then((function(e){console.log(e),ae.prependItem(ue(e))})).catch((function(e){console.log(e)})).finally((function(){de.close(),de.renderLoading(!1)}))}));function he(e){ie.handleToggleLikeApi(e).then((function(t){e.setLike(t)})).catch((function(e){console.log(e)}))}function _e(e){console.log(),ce.open(),ce.setEventListeners(e)}function ye(e){se.open(e.link,e.name)}ie.getAllPromise().then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];console.log(o,i),oe.setUserInfo(o),ee=o._id,ae.renderItems(i)})).catch((function(e){console.log(e)})),Q.addEventListener("click",(function(){de.open(),ne.resetValidation()})),K.addEventListener("click",(function(){var e=oe.getUserInfo();pe.setInputValues(e),te.resetValidation(),pe.open()})),F.addEventListener("click",(function(){fe.open(),re.resetValidation()})),fe.setEventListeners(),de.setEventListeners(),pe.setEventListeners(),ce.setEventListeners(),se.setEventListeners()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBckJNLEVBQXFCLEtBQWZvTCxFQUFlLEtBQzNCaEwsUUFBUUMsSUFBSUwsRUFBTW9MLEdBQ2xCbEMsR0FBWW1DLFlBQVlyTCxHQUN4QmtCLEdBQVNsQixFQUFLcUQsSUFDZGdHLEdBQVNpQyxZQUFZRixFQUN0QixJQUNBcEIsT0FBTSxTQUFDQyxHQUNON0osUUFBUUMsSUFBSTRKLEVBQ2IsSUFJTHZCLEVBQWlCaEcsaUJBQWlCLFNBQVMsV0FDekNnSSxHQUFhTyxPQUNiakMsR0FBY3VDLGlCQUNmLElBRUQ5QyxFQUFrQi9GLGlCQUFpQixTQUFTLFdBQzFDLElBQU04SSxFQUFXdEMsR0FBWXVDLGNBQzdCakIsR0FBYWtCLGVBQWVGLEdBQzVCMUMsR0FBaUJ5QyxrQkFDakJmLEdBQWFTLE1BQ2QsSUFFRHpDLEVBQVc5RixpQkFBaUIsU0FBUyxXQUNuQytILEdBQVlRLE9BQ1poQyxHQUF1QnNDLGlCQUN4QixJQUNEZCxHQUFZUyxvQkFDWlIsR0FBYVEsb0JBQ2JWLEdBQWFVLG9CQUNidEIsR0FBbUJzQixvQkFDbkJoQixHQUFlZ0IsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIndXNlIHN0cmljdCdcblxuaW1wb3J0IGJyZXN0SW1nIGZyb20gJy4uL2ltYWdlcy9icmVzdC5qcGcnO1xuaW1wb3J0IHZpdGVic2tJbWcgZnJvbSAnLi4vaW1hZ2VzL3ZpdGVic2suanBnJztcbmltcG9ydCBob21lbEltZyBmcm9tICcuLi9pbWFnZXMvZ29tZWwuanBnJztcbmltcG9ydCBocm9kbm9JbWcgZnJvbSAnLi4vaW1hZ2VzL2hyb2Ruby5qcGcnO1xuaW1wb3J0IG1vZ2lsZXZJbWcgZnJvbSAnLi4vaW1hZ2VzL21vZ2lsZXYuanBnJztcbmltcG9ydCBtaW5za0ltZyBmcm9tICcuLi9pbWFnZXMvbWluc2suanBnJztcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFt7XG4gICAgbmFtZTogJ9CR0YDQtdGB0YInLFxuICAgIGxpbms6IGJyZXN0SW1nXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JLQuNGC0LXQsdGB0LonLFxuICAgIGxpbms6IHZpdGVic2tJbWdcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQk9C+0LzQtdC70YwnLFxuICAgIGxpbms6IGhvbWVsSW1nXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JPRgNC+0LTQvdC+JyxcbiAgICBsaW5rOiBocm9kbm9JbWdcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQnNC+0LPQuNC70LXQsicsXG4gICAgbGluazogbW9naWxldkltZ1xuICB9LFxuICB7XG4gICAgbmFtZTogJ9Cc0LjQvdGB0LonLFxuICAgIGxpbms6IG1pbnNrSW1nXG4gIH1cbl07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RvcnNVc2VyID0ge1xuICBuYW1lOiAnLnByb2ZpbGVfX3VzZXInLFxuICBhYm91dDogJy5wcm9maWxlX191c2VyLWpvYicsXG4gIGF2YXRhcjogJy5wcm9maWxlX19hdmF0YXInLFxuICBhdmF0YXJXcmFwcGVyOiAnLnByb2ZpbGVfX2ltZy13cmFwcGVyJyxcbiAgdXNlck5hbWVJbnB1dDogJ25hbWUtaW5wdXQnLFxuICBqb2JJbnB1dE5hbWU6ICdqb2ItaW5wdXQnLFxuICBhdmF0YXJJbnB1dE5hbWU6ICd1cmwtYXZhdGFyLWlucHV0J1xufVxuXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xuICBidXR0b25BZGROZXdDYXJkOiAnLnByb2ZpbGVfX2J1dHRvbl9hZGQnLFxuICBwb3BVcEVkaXRQcm9maWxlOiAnLnBvcC11cF9lZGl0LXByb2ZpbGUnLFxuICBmb3JtRWRpdFByb2ZpbGU6ICcucG9wLXVwX19mb3JtLWVkaXQtcHJvZmlsZScsXG4gIGZvcm1BZGRDYXJkOiAnLnBvcC11cF9fZm9ybS1hZGQtY2FyZCcsXG4gIHByb2ZpbGVCdXR0b25FZGl0OiAnLnByb2ZpbGVfX2J1dHRvbl9lZGl0JyxcbiAgcG9wVXBBZGRDYXJkOiAnLnBvcC11cF9hZGQtY2FyZCcsXG4gIHBvcFVwRm9ybTogJy5wb3AtdXBfX2Zvcm0nLFxuICBwb3BVcEJ1dHRvblNhdmU6ICcucG9wLXVwX19idXR0b24tc2F2ZScsXG4gIHBvcFVwSW5wdXQ6ICcucG9wLXVwX19pbnB1dCcsXG4gIHBvcFVwSW5wdXRVc2VyTmFtZTogJy5wb3AtdXBfX2lucHV0X3VzZXItbmFtZScsXG4gIHBvcFVwSW5wdXRVc2VySW5mbzogJy5wb3AtdXBfX2lucHV0X3VzZXItam9iJyxcbiAgdXNlck5hbWVJbnB1dDogJ25hbWUtaW5wdXQnLFxuICB1c2VySW5mb0lucHV0OiAnam9iLWlucHV0JyxcbiAgY2FyZE5hbWVJbnB1dDogJ25hbWUtY2FyZC1pbnB1dCcsXG4gIGNhcmRMaW5rSW5wdXQ6ICd1cmwtaW5wdXQnLFxuICBwb3BVcEF2YXRhcjogJy5wb3AtdXBfZWRpdC1hdmF0YXInLFxuICBmb3JtQXZhdGFyUHJvZmlsZTogJy5wb3AtdXBfX2Zvcm0tZWRpdC1hdmF0YXInLFxuICBwb3B1cENvbmZpcm06ICcucG9wLXVwX2RlbGV0ZS1jYXJkJ1xufVxuXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzUG9wdXAgPSB7XG4gIHBvcHVwQWN0aXZlOiAncG9wLXVwX2FjdGl2ZScsXG4gIHBvcHVwOiAncG9wLXVwJyxcbiAgcG9wVXBDbG9zZUljb246ICdwb3AtdXBfX2Nsb3NlLWljb24nLFxufVxuXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzQ2FyZHMgPSB7XG4gIHRlbXBsYXRlQ2FyZDogJyN0ZW1wbGF0ZS1jYXJkJyxcbiAgYXJ0aWNsZUNhcmQ6ICcuY2FyZCcsXG4gIHNlY3Rpb25DYXJkczogJy5jYXJkcycsXG4gIGltZ0NhcmQ6ICcuY2FyZF9faW1hZ2UnLFxuICB0aXRsZUNhcmQ6ICcuY2FyZF9fdGl0bGUnLFxuICBidXR0b25EZWxldGVDYXJkOiAnLmNhcmRfX2J1dHRvbi1kZWxldGUnLFxuICBidXR0b25EZWxldGVDYXJkSW5hY3RpdmU6ICdjYXJkX19idXR0b24tZGVsZXRlX2luYWN0aXZlJyxcbiAgYnV0dG9uTGlrZUNhcmQ6ICcuY2FyZF9fYnV0dG9uLWxpa2UnLFxuICBjb3VudGVyTGlrZTogJy5jYXJkX19saWtlLWNvdW50ZXInLFxuICBidXR0b25MaWtlQWN0aXZlQ2FyZDogJ2NhcmRfX2J1dHRvbi1saWtlX2FjdGl2ZScsXG4gIGZvcm1BZGRDYXJkOiAnLnBvcC11cF9fZm9ybS1hZGQtY2FyZCcsXG4gIHBvcFVwVmlld0NhcmQ6ICcucG9wLXVwX3ZpZXctY2FyZCcsXG4gIHBvcFVwVmlld0ltZzogJy5wb3AtdXBfX3ZpZXctaW1nJyxcbiAgcG9wVXBWaWV3Q2FyZFRpdGxlOiAnLnBvcC11cF9fdGl0bGUtdmlldy1pbWcnLFxuICBwb3BVcENsb3NlSWNvbnM6ICcucG9wLXVwX19jbG9zZS1pY29uJyxcbiAgaW5wdXROYW1lQ2FyZDogJy5wb3AtdXBfX2lucHV0X2NhcmQtbmFtZScsXG4gIGlucHV0VXJsQ2FyZDogJy5wb3AtdXBfX2lucHV0X2NhcmQtdXJsJyxcbn1cblxuZXhwb3J0IGNvbnN0IHNlbGVjdG9yc1ZhbGlkYXRpb24gPSB7XG4gIGZvcm1TZWxlY3RvcjogJy5wb3AtdXBfX2Zvcm0nLFxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcC11cF9faW5wdXQnLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3AtdXBfX2J1dHRvbicsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3AtdXBfX2J1dHRvbl9pbmFjdGl2ZScsXG4gIGlucHV0RXJyb3JDbGFzczogJ3BvcC11cF9faW5wdXRfdHlwZV9lcnJvcicsXG4gIGVycm9yQ2xhc3M6ICdwb3AtdXBfX2Vycm9yX3Zpc2libGUnXG59XG4iLCJleHBvcnQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMudXJsID0gb3B0aW9ucy51cmw7XG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcbiAgfVxuXG4gIF9jaGVja1Jlc3BvbnNlRXJyb3IgPSAocmVzKSA9PiB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gIH1cblxuICBnZXRVc2VySW5mb0FwaSgpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L3VzZXJzL21lYCwge1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2VFcnJvcilcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L2NhcmRzYCwge1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgICB9KVxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZUVycm9yKVxuICB9XG5cbiAgc2V0VXNlckluZm9BcGkodXNlckRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L3VzZXJzL21lYCwge1xuICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBuYW1lOiB1c2VyRGF0YVsnbmFtZS1pbnB1dCddLFxuICAgICAgICAgIGFib3V0OiB1c2VyRGF0YVsnam9iLWlucHV0J11cbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlRXJyb3IpXG4gIH1cblxuICBzZXRVc2VyQXZhdGFyQXBpKHVzZXJEYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGF2YXRhcjogdXNlckRhdGFbJ3VybC1hdmF0YXItaW5wdXQnXVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2VFcnJvcilcbiAgfVxuXG4gIGFkZENhcmQoZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnVybH0vY2FyZHNgLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICAgIGxpbms6IGRhdGEubGlua1xuICAgICAgICB9KVxuICAgICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2VFcnJvcilcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoaWRDYXJkRGVsZXRlKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS9jYXJkcy8ke2lkQ2FyZERlbGV0ZX1gLCB7XG4gICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICB9KVxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZUVycm9yKVxuICB9XG5cbiAgaGFuZGxlVG9nZ2xlTGlrZUFwaShkYXRhQ2FyZCkge1xuICAgIGNvbnNvbGUubG9nKGRhdGFDYXJkKVxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnVybH0vY2FyZHMvJHtkYXRhQ2FyZC5faXRlbS5pZH0vbGlrZXNgLCB7XG4gICAgICAgIG1ldGhvZDogZGF0YUNhcmQuaXNMaWtlZCgpID8gXCJERUxFVEVcIiA6IFwiUFVUXCIsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICB9KVxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZUVycm9yKVxuICB9XG4gIC8qXG4gICAgbGlrZXNDYXJkKGlkQ2FyZCkge1xuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS9jYXJkcy8ke2lkQ2FyZH0vbGlrZXNgLCB7XG4gICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlRXJyb3IpXG4gICAgfVxuXG4gICAgZGlzbGlrZXNDYXJkKGlkQ2FyZCkge1xuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS9jYXJkcy8ke2lkQ2FyZH0vbGlrZXNgLCB7XG4gICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlRXJyb3IpXG4gICAgfSAqL1xuICBnZXRBbGxQcm9taXNlKCkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5nZXRVc2VySW5mb0FwaSgpLCB0aGlzLmdldEluaXRpYWxDYXJkcygpXSlcbiAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnXG5cbmltcG9ydCB7XG4gIHNlbGVjdG9yc0NhcmRzXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuZXhwb3J0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgaXRlbSxcbiAgICBzZWxlY3RvclRlbXBsYXRlLFxuICAgIGhhbmRsZUNhcmRDbGljayxcbiAgICBoYW5kbGVDYXJkRGVsZXRlLFxuICAgIGhhbmRsZUxpa2VDYXJkLFxuICAgIHVzZXJJRFxuICB9KSB7XG4gICAgdGhpcy5faXRlbSA9IGl0ZW07XG4gICAgdGhpcy5fdGl0bGUgPSB0aGlzLl9pdGVtLm5hbWU7XG4gICAgdGhpcy5fYWx0ID0gdGhpcy5faXRlbS5uYW1lO1xuICAgIHRoaXMuX3NyYyA9IHRoaXMuX2l0ZW0ubGluaztcbiAgICB0aGlzLl9pZE93bmVyID0gdGhpcy5faXRlbS5pZE93bmVyO1xuICAgIHRoaXMuX2lkQ2FyZCA9IHRoaXMuX2l0ZW0uaWRDYXJkXG4gICAgdGhpcy5fbGlrZXMgPSB0aGlzLl9pdGVtLmxpa2VzO1xuICAgIHRoaXMuX3NlbGVjdG9yVGVtcGxhdGUgPSBzZWxlY3RvclRlbXBsYXRlO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlID0gaGFuZGxlQ2FyZERlbGV0ZTtcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2FyZCA9IGhhbmRsZUxpa2VDYXJkO1xuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJRDtcbiAgfVxuICBfZ2V0VGVtcGxhdGUgPSAoKSA9PiB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9yVGVtcGxhdGUpLmNvbnRlbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnNDYXJkcy5hcnRpY2xlQ2FyZCkuY2xvbmVOb2RlKHRydWUpO1xuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuICBnZW5lcmF0ZUNhcmQgPSAoKSA9PiB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fYnV0dG9uTGlrZUNhcmQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzQ2FyZHMuYnV0dG9uTGlrZUNhcmQpO1xuICAgIHRoaXMuX2J1dHRvbkRlbGV0ZUNhcmQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzQ2FyZHMuYnV0dG9uRGVsZXRlQ2FyZCk7XG4gICAgdGhpcy5fY291bnRlckxpa2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzQ2FyZHMuY291bnRlckxpa2UpO1xuICAgIHRoaXMuX2ltZ0NhcmQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzQ2FyZHMuaW1nQ2FyZCk7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yc0NhcmRzLnRpdGxlQ2FyZCkudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcbiAgICB0aGlzLl9pbWdDYXJkLmFsdCA9IHRoaXMuX3RpdGxlO1xuICAgIHRoaXMuX2ltZ0NhcmQuc3JjID0gdGhpcy5fc3JjO1xuICAgIHRoaXMuX3VwZGF0ZUxpa2VTdGF0ZSh0aGlzLmlzTGlrZWQoKSk7XG4gICAgdGhpcy5fY2hlY2tJc0NhcmRVc2VyKCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuXG4gIF9jaGVja0lzQ2FyZFVzZXIgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuX2lkT3duZXIgJiYgKHRoaXMuX2lkT3duZXIgIT09IHRoaXMuX3VzZXJJZCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkRlbGV0ZUNhcmQuY2xhc3NMaXN0LmFkZChzZWxlY3RvcnNDYXJkcy5idXR0b25EZWxldGVDYXJkSW5hY3RpdmUpXG4gICAgfVxuICB9XG5cbiAgaXNMaWtlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fbGlrZXMuc29tZSgoaXRlbSkgPT4ge1xuICAgICAgcmV0dXJuICh0aGlzLl91c2VySWQgPT09IGl0ZW0uX2lkKVxuICAgIH0pXG4gIH1cblxuICBzZXRMaWtlKGRhdGEpIHtcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XG4gICAgdGhpcy5fdXBkYXRlTGlrZVN0YXRlKHRoaXMuaXNMaWtlZCgpKTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgfVxuXG4gIF91cGRhdGVMaWtlU3RhdGUoaGFuZGxlTGlrZSkge1xuICAgIGlmIChoYW5kbGVMaWtlKSB7XG4gICAgICB0aGlzLl9idXR0b25MaWtlQ2FyZC5jbGFzc0xpc3QuYWRkKHNlbGVjdG9yc0NhcmRzLmJ1dHRvbkxpa2VBY3RpdmVDYXJkKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25MaWtlQ2FyZC5jbGFzc0xpc3QucmVtb3ZlKHNlbGVjdG9yc0NhcmRzLmJ1dHRvbkxpa2VBY3RpdmVDYXJkKVxuICAgIH1cbiAgICB0aGlzLl9jb3VudGVyTGlrZS50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICB0aGlzLl9idXR0b25EZWxldGVDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlQ2FyZERlbGV0ZSh0aGlzKSk7XG4gICAgdGhpcy5fYnV0dG9uTGlrZUNhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVMaWtlQ2FyZCh0aGlzKSk7XG4gICAgdGhpcy5faW1nQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9pdGVtKSk7XG4gIH1cbn1cbiIsIid1c2Ugc3RyaWN0J1xuaW1wb3J0IHtcbiAgc2VsZWN0b3JzQ2FyZHMsXG4gIHNlbGVjdG9yc1BvcHVwXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgJHtwb3B1cFNlbGVjdG9yfWApO1xuICAgIHRoaXMuX2Nsb3NlSWNvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzQ2FyZHMucG9wVXBDbG9zZUljb25zKTtcbiAgfVxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoc2VsZWN0b3JzUG9wdXAucG9wdXBBY3RpdmUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoc2VsZWN0b3JzUG9wdXAucG9wdXBBY3RpdmUpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG4gIF9oYW5kbGVDbGlja0ljb25DbG9zZSA9IChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKHNlbGVjdG9yc1BvcHVwLnBvcHVwKSB8fCBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKHNlbGVjdG9yc1BvcHVwLnBvcFVwQ2xvc2VJY29uKSkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH07XG5cbiAgfVxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNsaWNrSWNvbkNsb3NlKTtcbiAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnXG5cbmltcG9ydCB7XG4gIFBvcHVwXG59IGZyb20gXCIuL1BvcHVwLmpzXCI7XG5pbXBvcnQge1xuICBzZWxlY3RvcnNcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3JOYW1lLCBzdWJtaXRIYW5kbGVyKSB7XG4gICAgc3VwZXIoc2VsZWN0b3JOYW1lKTtcbiAgICB0aGlzLnN1Ym1pdEhhbmRsZXIgPSBzdWJtaXRIYW5kbGVyO1xuICAgIHRoaXMuZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvcFVwRm9ybSk7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcnMucG9wVXBJbnB1dCk7XG4gICAgdGhpcy5faW5wdXROYW1lID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMucG9wVXBJbnB1dFVzZXJOYW1lKTtcbiAgICB0aGlzLl9pbnB1dFVzZXJJbmZvID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMucG9wVXBJbnB1dFVzZXJJbmZvKTtcblxuICAgIHRoaXMuX3BvcFVwQnV0dG9uU2F2ZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvcFVwQnV0dG9uU2F2ZSk7XG4gICAgdGhpcy5fcG9wVXBCdXR0b25UZXh0Q29udGVudCA9IHRoaXMuX3BvcFVwQnV0dG9uU2F2ZS50ZXh0Q29udGVudDtcblxuICB9XG4gIGNsb3NlKCkge1xuICAgIHRoaXMuZm9ybS5yZXNldCgpO1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cbiAgZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcbiAgfVxuICBzZXRJbnB1dFZhbHVlcyh2YWx1ZXMpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIC8vINGC0YPRgiDQstGB0YLQsNCy0LvRj9C10Lwg0LIgYHZhbHVlYCDQuNC90L/Rg9GC0LAg0LTQsNC90L3Ri9C1INC40Lcg0L7QsdGK0LXQutGC0LAg0L/QviDQsNGC0YDQuNCx0YPRgtGDIGBuYW1lYCDRjdGC0L7Qs9C+INC40L3Qv9GD0YLQsFxuICAgICAgaW5wdXQudmFsdWUgPSB2YWx1ZXNbaW5wdXQubmFtZV07XG4gICAgfSk7XG4gIH1cblxuXG5cbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9wb3BVcEJ1dHRvblNhdmUudGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9wb3BVcEJ1dHRvblNhdmUudGV4dENvbnRlbnQgPSB0aGlzLl9wb3BVcEJ1dHRvblRleHRDb250ZW50O1xuICAgIH1cbiAgfVxuXG5cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuc3VibWl0SGFuZGxlcih0aGlzLmdldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICB9XG5cbn1cbiIsIid1c2Ugc3RyaWN0J1xuXG5pbXBvcnQge1xuICBQb3B1cFxufSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuaW1wb3J0IHtcbiAgc2VsZWN0b3JzQ2FyZHNcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yKSB7XG4gICAgc3VwZXIoc2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yc0NhcmRzLnBvcFVwVmlld0ltZyk7XG4gICAgdGhpcy5faW1hZ2VOYW1lID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihzZWxlY3RvcnNDYXJkcy5wb3BVcFZpZXdDYXJkVGl0bGUpO1xuICB9XG5cbiAgb3BlbihsaW5rLCBuYW1lKSB7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gbmFtZTtcbiAgICB0aGlzLl9pbWFnZU5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKVxuICB9XG59XG4iLCIndXNlIHN0cmljdCdcblxuZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgcmVuZGVyZXIsXG4gICAgY29udGFpbmVyU2VsZWN0b3JcbiAgfSkge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICBhZGRJdGVtKGNhcmQpIHtcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGNhcmQpO1xuICB9XG5cbiAgcHJlcGVuZEl0ZW0oY2FyZCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGNhcmQpO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoY2FyZHMpIHtcbiAgICB0aGlzLmNsZWFyKCk7XG4gICAgY2FyZHMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnXG5leHBvcnQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgc2VsZWN0b3JzVXNlclxuICB9KSB7XG4gICAgdGhpcy5fc2VsZWN0b3JzVXNlciA9IHNlbGVjdG9yc1VzZXI7XG4gICAgdGhpcy5fdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9yc1VzZXIubmFtZSk7XG4gICAgdGhpcy5fdXNlckpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3JzVXNlci5hYm91dCk7XG4gICAgdGhpcy5fdXNlckF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3JzVXNlci5hdmF0YXIpO1xuICAgIHRoaXMuX25hbWVJbnB1dE5hbWUgPSB0aGlzLl9zZWxlY3RvcnNVc2VyLnVzZXJOYW1lSW5wdXQ7XG4gICAgdGhpcy5fam9iSW5wdXROYW1lID0gdGhpcy5fc2VsZWN0b3JzVXNlci5qb2JJbnB1dE5hbWU7XG4gICAgdGhpcy5fYXZhdGFySW5wdXROYW1lID0gdGhpcy5fc2VsZWN0b3JzVXNlci5hdmF0YXJJbnB1dE5hbWU7XG4gIH1cbiAgZ2V0VXNlckluZm8gPSAoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIFt0aGlzLl9uYW1lSW5wdXROYW1lXTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXG4gICAgICBbdGhpcy5fam9iSW5wdXROYW1lXTogdGhpcy5fdXNlckpvYi50ZXh0Q29udGVudFxuICAgIH1cbiAgfVxuXG4gIHNldFVzZXJJbmZvID0gKHZhbHVlcykgPT4ge1xuICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gdmFsdWVzW3RoaXMuX25hbWVJbnB1dE5hbWVdIHx8IHZhbHVlc1snbmFtZSddO1xuICAgIHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnQgPSB2YWx1ZXNbdGhpcy5fam9iSW5wdXROYW1lXSB8fCB2YWx1ZXNbJ2Fib3V0J107XG4gICAgdGhpcy5fdXNlckF2YXRhci5zcmMgPSB2YWx1ZXMuYXZhdGFyIHx8IHZhbHVlc1t0aGlzLl9hdmF0YXJJbnB1dE5hbWVdO1xuICB9XG59XG4iLCIndXNlIHN0cmljdCdcblxuZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihmb3JtRWxlbWVudCwgc2VsZWN0b3JzKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9zZWxlY3RvcnMgPSBzZWxlY3RvcnM7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NlbGVjdG9ycy5pbnB1dFNlbGVjdG9yKSk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuICBfc2hvd0lucHV0RXJyb3IgPSAoKSA9PiB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2VsZWN0b3JzLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fZXJyb3JNZXNzYWdlO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NlbGVjdG9ycy5lcnJvckNsYXNzKTtcbiAgfTtcbiAgX2hpZGVJbnB1dEVycm9yID0gKCkgPT4ge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NlbGVjdG9ycy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NlbGVjdG9ycy5lcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgfTtcbiAgX2lzVmFsaWQgPSAoKSA9PiB7XG4gICAgaWYgKCF0aGlzLl9pbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKCk7XG4gICAgfVxuICB9O1xuICBfaGFzSW52YWxpZElucHV0ID0gKCkgPT4ge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfTtcbiAgX2VuYWJsZVN1Ym1pdEJ1dHRvbiA9ICgpID0+IHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2VsZWN0b3JzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICB9XG4gIF9kaXNhYmxlU3VibWl0QnV0dG9uID0gKCkgPT4ge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZWxlY3RvcnMuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gIH1cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fZW5hYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2Rpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgICB9XG4gIH1cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faW5wdXRFbGVtZW50ID0gaW5wdXRFbGVtZW50O1xuICAgICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7dGhpcy5faW5wdXRFbGVtZW50Lm5hbWV9LWVycm9yYCk7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcigpO1xuICAgIH0pO1xuICB9XG4gIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5faW5wdXRFbGVtZW50ID0gaW5wdXRFbGVtZW50O1xuICAgICAgICB0aGlzLl9lcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLl9pbnB1dEVsZW1lbnQubmFtZX0tZXJyb3JgKTtcbiAgICAgICAgdGhpcy5fZXJyb3JNZXNzYWdlID0gdGhpcy5faW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgICAgICB0aGlzLl9pc1ZhbGlkKCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KVxuICB9O1xuICBlbmFibGVWYWxpZGF0aW9uID0gKCkgPT4ge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsIid1c2Ugc3RyaWN0J1xuXG5pbXBvcnQge1xuICBQb3B1cFxufSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuaW1wb3J0IHtcbiAgc2VsZWN0b3JzXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3JOYW1lLCBzdWJtaXRIYW5kbGVyKSB7XG4gICAgc3VwZXIoc2VsZWN0b3JOYW1lKTtcbiAgICB0aGlzLmZvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wb3BVcEZvcm0pO1xuICAgIHRoaXMuX3BvcFVwQnV0dG9uU2F2ZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvcFVwQnV0dG9uU2F2ZSk7XG4gICAgdGhpcy5fcG9wVXBCdXR0b25UZXh0Q29udGVudCA9IHRoaXMuX3BvcFVwQnV0dG9uU2F2ZS50ZXh0Q29udGVudDtcbiAgICB0aGlzLnN1Ym1pdEhhbmRsZXIgPSBzdWJtaXRIYW5kbGVyO1xuICB9XG5cbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9wb3BVcEJ1dHRvblNhdmUudGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9wb3BVcEJ1dHRvblNhdmUudGV4dENvbnRlbnQgPSB0aGlzLl9wb3BVcEJ1dHRvblRleHRDb250ZW50O1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKGlkQ2FyZERlbGV0ZSkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5zdWJtaXRIYW5kbGVyKGlkQ2FyZERlbGV0ZSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIHNlbGVjdG9ycyxcbiAgc2VsZWN0b3JzQ2FyZHMsXG4gIHNlbGVjdG9yc1VzZXIsXG4gIHNlbGVjdG9yc1ZhbGlkYXRpb25cbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcbmltcG9ydCB7XG4gIEFwaVxufSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XG5pbXBvcnQge1xuICBDYXJkXG59IGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQge1xuICBQb3B1cFdpdGhGb3JtXG59IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQge1xuICBQb3B1cFdpdGhJbWFnZVxufSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCB7XG4gIFNlY3Rpb25cbn0gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCB7XG4gIFVzZXJJbmZvXG59IGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xuaW1wb3J0IHtcbiAgRm9ybVZhbGlkYXRvclxufSBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xuaW1wb3J0IHtcbiAgUG9wdXBXaXRoQ29uZmlybWF0aW9uXG59IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzJztcblxuaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5cbmNvbnN0IHVzZXJBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yc1VzZXIuYXZhdGFyV3JhcHBlcik7XG5jb25zdCBwcm9maWxlQnV0dG9uRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnByb2ZpbGVCdXR0b25FZGl0KTtcbmNvbnN0IGJ1dHRvbkFkZE5ld0NhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5idXR0b25BZGROZXdDYXJkKTtcbmNvbnN0IGZvcm1FZGl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmZvcm1FZGl0UHJvZmlsZSk7XG5jb25zdCBmb3JtQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmZvcm1BZGRDYXJkKTtcbmNvbnN0IGZvcm1FZGl0QXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuZm9ybUF2YXRhclByb2ZpbGUpO1xuXG5jb25zdCBvcHRpb25zID0ge1xuICB1cmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTUxJyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICdkNGM0MTY2ZC03ZGExLTQxZTUtOWMxMi02YWRhOTA1MjMyYWYnLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgfVxufVxuXG5sZXQgdXNlcklEID0gbnVsbDtcblxuY29uc3QgcHJvZmlsZVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1FZGl0UHJvZmlsZSwgc2VsZWN0b3JzVmFsaWRhdGlvbik7XG5wcm9maWxlVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgY2FyZFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1BZGRDYXJkLCBzZWxlY3RvcnNWYWxpZGF0aW9uKTtcbmNhcmRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBhdmF0YXJQcm9maWxlVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUVkaXRBdmF0YXIsIHNlbGVjdG9yc1ZhbGlkYXRpb24pO1xuYXZhdGFyUHJvZmlsZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IHByb2ZpbGVJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgc2VsZWN0b3JzVXNlclxufSk7XG5cbmNvbnN0IGRhdGFBcGkgPSBuZXcgQXBpKG9wdGlvbnMpO1xuXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcbiAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgY29uc3QgbmV3Q2FyZEFwaSA9IGNyZWF0ZUNhcmQoe1xuICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgbGluazogaXRlbS5saW5rLFxuICAgICAgaWRPd25lcjogaXRlbS5vd25lci5faWQsXG4gICAgICBpZDogaXRlbS5faWQsXG4gICAgICBsaWtlczogaXRlbS5saWtlc1xuICAgIH0pO1xuICAgIGNhcmRMaXN0LmFkZEl0ZW0obmV3Q2FyZEFwaSk7XG4gIH0sXG4gIGNvbnRhaW5lclNlbGVjdG9yOiBzZWxlY3RvcnNDYXJkcy5zZWN0aW9uQ2FyZHNcbn0pO1xuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGRhdGFDYXJkKSB7XG4gIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZCh7XG4gICAgaXRlbTogZGF0YUNhcmQsXG4gICAgc2VsZWN0b3JUZW1wbGF0ZTogc2VsZWN0b3JzQ2FyZHMudGVtcGxhdGVDYXJkLFxuICAgIGhhbmRsZUNhcmRDbGljazogb3BlbkltYWdlLFxuICAgIGhhbmRsZUNhcmREZWxldGU6IGhhbmRsZUNhcmREZWxldGUsXG4gICAgaGFuZGxlTGlrZUNhcmQ6IGhhbmRsZUxpa2VDYXJkLFxuICAgIHVzZXJJRDogdXNlcklEXG4gIH0pXG4gIHJldHVybiBuZXdDYXJkLmdlbmVyYXRlQ2FyZCgpO1xufVxuXG5jb25zdCBwb3B1cENvbmZpcm1EZWxldGUgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKHNlbGVjdG9ycy5wb3B1cENvbmZpcm0sIChpZENhcmREZWxldGUpID0+IHtcbiAgaGFuZGxlQ29uZmlybUNhcmREZWxldGUoaWRDYXJkRGVsZXRlKVxufSk7XG5cbmNvbnN0IHBvcFVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKHNlbGVjdG9yc0NhcmRzLnBvcFVwVmlld0NhcmQpO1xuXG5mdW5jdGlvbiBnZXRQb3B1cFdpdGhGb3JtKHNlbGVjdG9ycywgcG9wVXAsIGFwaU1ldGhvZCwgdXNlck1ldGhvZCkge1xuICByZXR1cm4gcG9wVXAgPSBuZXcgUG9wdXBXaXRoRm9ybShzZWxlY3RvcnMsIChpbnB1dFZhbHVlcykgPT4ge1xuICAgIHBvcFVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gICAgZGF0YUFwaVthcGlNZXRob2RdKGlucHV0VmFsdWVzKVxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgcHJvZmlsZUluZm9bdXNlck1ldGhvZF0oZGF0YSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8g0LLRi9Cy0LXQtNC10Lwg0L7RiNC40LHQutGDINCyINC60L7QvdGB0L7Qu9GMXG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBwb3BVcC5jbG9zZSgpO1xuICAgICAgICBwb3BVcC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0pO1xuICB9KTtcbn1cbmNvbnN0IHByb2ZpbGVQb3BVcCA9IGdldFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JzLnBvcFVwRWRpdFByb2ZpbGUsIHByb2ZpbGVQb3BVcCwgJ3NldFVzZXJJbmZvQXBpJywgJ3NldFVzZXJJbmZvJyk7XG5jb25zdCBhdmF0YXJQb3BVcCA9IGdldFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JzLnBvcFVwQXZhdGFyLCBhdmF0YXJQb3BVcCwgJ3NldFVzZXJBdmF0YXJBcGknLCAnc2V0VXNlckluZm8nKTtcbmNvbnN0IGFkZENhcmRQb3BVcCA9IG5ldyBQb3B1cFdpdGhGb3JtKHNlbGVjdG9ycy5wb3BVcEFkZENhcmQsIChkYXRhKSA9PiB7XG4gIGFkZENhcmRQb3BVcC5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICBjb25zdCBuZXdEYXRhID0ge1xuICAgIG5hbWU6IGRhdGFbc2VsZWN0b3JzLmNhcmROYW1lSW5wdXRdLFxuICAgIGxpbms6IGRhdGFbc2VsZWN0b3JzLmNhcmRMaW5rSW5wdXRdXG4gIH07XG4gIGRhdGFBcGkuYWRkQ2FyZChuZXdEYXRhKVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIGNhcmRMaXN0LnByZXBlbmRJdGVtKGNyZWF0ZUNhcmQocmVzKSk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8g0LLRi9Cy0LXQtNC10Lwg0L7RiNC40LHQutGDINCyINC60L7QvdGB0L7Qu9GMXG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBhZGRDYXJkUG9wVXAuY2xvc2UoKVxuICAgICAgYWRkQ2FyZFBvcFVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgIH0pO1xufSk7XG5cbmZ1bmN0aW9uIGhhbmRsZUxpa2VDYXJkKGNhcmREYXRhKSB7XG5cbiAgZGF0YUFwaS5oYW5kbGVUb2dnbGVMaWtlQXBpKGNhcmREYXRhKVxuICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgY2FyZERhdGEuc2V0TGlrZShkYXRhKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pXG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmREZWxldGUoY2FyZCkge1xuICBjb25zb2xlLmxvZygpXG4gIHBvcHVwQ29uZmlybURlbGV0ZS5vcGVuKCk7XG4gIHBvcHVwQ29uZmlybURlbGV0ZS5zZXRFdmVudExpc3RlbmVycyhjYXJkKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQ29uZmlybUNhcmREZWxldGUoY2FyZCkge1xuICBwb3B1cENvbmZpcm1EZWxldGUucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgZGF0YUFwaS5kZWxldGVDYXJkKGNhcmQuX2l0ZW0uaWQpXG4gICAgLnRoZW4oKCkgPT4gY2FyZC5kZWxldGVDYXJkKCkpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBDb25maXJtRGVsZXRlLmNsb3NlKCk7XG4gICAgICBwb3B1cENvbmZpcm1EZWxldGUucmVuZGVyTG9hZGluZyhmYWxzZSlcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpOyAvLyDQstGL0LLQtdC00LXQvCDQvtGI0LjQsdC60YMg0LIg0LrQvtC90YHQvtC70YxcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gb3BlbkltYWdlKGl0ZW0pIHtcbiAgcG9wVXBXaXRoSW1hZ2Uub3BlbihpdGVtLmxpbmssIGl0ZW0ubmFtZSk7XG59XG5cbmZ1bmN0aW9uIGdldERhdGFBbGxQcm9taXNlKCkge1xuICBkYXRhQXBpLmdldEFsbFByb21pc2UoKVxuICAgIC50aGVuKChbZGF0YSwgZGF0YUNhcmRzXSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coZGF0YSwgZGF0YUNhcmRzKVxuICAgICAgcHJvZmlsZUluZm8uc2V0VXNlckluZm8oZGF0YSk7XG4gICAgICB1c2VySUQgPSBkYXRhLl9pZDtcbiAgICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKGRhdGFDYXJkcyk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KVxufVxuZ2V0RGF0YUFsbFByb21pc2UoKTtcblxuYnV0dG9uQWRkTmV3Q2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgYWRkQ2FyZFBvcFVwLm9wZW4oKTtcbiAgY2FyZFZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbn0pO1xuXG5wcm9maWxlQnV0dG9uRWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgY29uc3QgdXNlckluZm8gPSBwcm9maWxlSW5mby5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlUG9wVXAuc2V0SW5wdXRWYWx1ZXModXNlckluZm8pO1xuICBwcm9maWxlVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwcm9maWxlUG9wVXAub3BlbigpO1xufSk7XG5cbnVzZXJBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGF2YXRhclBvcFVwLm9wZW4oKTtcbiAgYXZhdGFyUHJvZmlsZVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKVxufSlcbmF2YXRhclBvcFVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5hZGRDYXJkUG9wVXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnByb2ZpbGVQb3BVcC5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBDb25maXJtRGVsZXRlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3BVcFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xuIl0sIm5hbWVzIjpbInNlbGVjdG9yc1VzZXIiLCJuYW1lIiwiYWJvdXQiLCJhdmF0YXIiLCJhdmF0YXJXcmFwcGVyIiwidXNlck5hbWVJbnB1dCIsImpvYklucHV0TmFtZSIsImF2YXRhcklucHV0TmFtZSIsInNlbGVjdG9ycyIsInNlbGVjdG9yc1BvcHVwIiwic2VsZWN0b3JzQ2FyZHMiLCJzZWxlY3RvcnNWYWxpZGF0aW9uIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJBcGkiLCJvcHRpb25zIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsInRoaXMiLCJ1cmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJfY2hlY2tSZXNwb25zZUVycm9yIiwidXNlckRhdGEiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImRhdGEiLCJsaW5rIiwiaWRDYXJkRGVsZXRlIiwiZGF0YUNhcmQiLCJjb25zb2xlIiwibG9nIiwiX2l0ZW0iLCJpZCIsImlzTGlrZWQiLCJhbGwiLCJnZXRVc2VySW5mb0FwaSIsImdldEluaXRpYWxDYXJkcyIsIkNhcmQiLCJpdGVtIiwic2VsZWN0b3JUZW1wbGF0ZSIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUNhcmREZWxldGUiLCJoYW5kbGVMaWtlQ2FyZCIsInVzZXJJRCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIl9zZWxlY3RvclRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2J1dHRvbkxpa2VDYXJkIiwiX2J1dHRvbkRlbGV0ZUNhcmQiLCJfY291bnRlckxpa2UiLCJfaW1nQ2FyZCIsInRleHRDb250ZW50IiwiX3RpdGxlIiwiYWx0Iiwic3JjIiwiX3NyYyIsIl91cGRhdGVMaWtlU3RhdGUiLCJfY2hlY2tJc0NhcmRVc2VyIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2lkT3duZXIiLCJfdXNlcklkIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVDYXJkRGVsZXRlIiwiX2hhbmRsZUxpa2VDYXJkIiwiX2hhbmRsZUNhcmRDbGljayIsIl9hbHQiLCJpZE93bmVyIiwiX2lkQ2FyZCIsImlkQ2FyZCIsIl9saWtlcyIsImxpa2VzIiwic29tZSIsIl9pZCIsInJlbW92ZSIsImhhbmRsZUxpa2UiLCJsZW5ndGgiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJldmVudCIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJfcG9wdXAiLCJfY2xvc2VJY29uIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVDbGlja0ljb25DbG9zZSIsIlBvcHVwV2l0aEZvcm0iLCJzZWxlY3Rvck5hbWUiLCJzdWJtaXRIYW5kbGVyIiwiZm9ybSIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2lucHV0TmFtZSIsIl9pbnB1dFVzZXJJbmZvIiwiX3BvcFVwQnV0dG9uU2F2ZSIsIl9wb3BVcEJ1dHRvblRleHRDb250ZW50IiwicmVzZXQiLCJfZm9ybVZhbHVlcyIsImZvckVhY2giLCJpbnB1dCIsInZhbHVlIiwidmFsdWVzIiwiaXNMb2FkaW5nIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJnZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aEltYWdlIiwic2VsZWN0b3IiLCJfcG9wdXBJbWFnZSIsIl9pbWFnZU5hbWUiLCJTZWN0aW9uIiwicmVuZGVyZXIiLCJjb250YWluZXJTZWxlY3RvciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJjYXJkIiwiYXBwZW5kIiwicHJlcGVuZCIsImlubmVySFRNTCIsImNhcmRzIiwiY2xlYXIiLCJVc2VySW5mbyIsIl9uYW1lSW5wdXROYW1lIiwiX3VzZXJOYW1lIiwiX2pvYklucHV0TmFtZSIsIl91c2VySm9iIiwiX3VzZXJBdmF0YXIiLCJfYXZhdGFySW5wdXROYW1lIiwiX3NlbGVjdG9yc1VzZXIiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRFbGVtZW50IiwiX3NlbGVjdG9ycyIsIl9lcnJvckVsZW1lbnQiLCJfZXJyb3JNZXNzYWdlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsIl9idXR0b25FbGVtZW50Iiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9lbmFibGVTdWJtaXRCdXR0b24iLCJfZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9mb3JtRWxlbWVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2lzVmFsaWQiLCJBcnJheSIsImZyb20iLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJ1c2VyQXZhdGFyIiwicHJvZmlsZUJ1dHRvbkVkaXQiLCJidXR0b25BZGROZXdDYXJkIiwiZm9ybUVkaXRQcm9maWxlIiwiZm9ybUFkZENhcmQiLCJmb3JtRWRpdEF2YXRhciIsInByb2ZpbGVWYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwiY2FyZFZhbGlkYXRvciIsImF2YXRhclByb2ZpbGVWYWxpZGF0b3IiLCJwcm9maWxlSW5mbyIsImRhdGFBcGkiLCJhdXRob3JpemF0aW9uIiwiY2FyZExpc3QiLCJuZXdDYXJkQXBpIiwiY3JlYXRlQ2FyZCIsIm93bmVyIiwiYWRkSXRlbSIsIm9wZW5JbWFnZSIsImdlbmVyYXRlQ2FyZCIsInBvcHVwQ29uZmlybURlbGV0ZSIsInJlbmRlckxvYWRpbmciLCJkZWxldGVDYXJkIiwiZmluYWxseSIsImNhdGNoIiwiZXJyIiwicG9wVXBXaXRoSW1hZ2UiLCJnZXRQb3B1cFdpdGhGb3JtIiwicG9wVXAiLCJhcGlNZXRob2QiLCJ1c2VyTWV0aG9kIiwiaW5wdXRWYWx1ZXMiLCJwcm9maWxlUG9wVXAiLCJhdmF0YXJQb3BVcCIsImFkZENhcmRQb3BVcCIsIm5ld0RhdGEiLCJhZGRDYXJkIiwicHJlcGVuZEl0ZW0iLCJjYXJkRGF0YSIsImhhbmRsZVRvZ2dsZUxpa2VBcGkiLCJzZXRMaWtlIiwib3BlbiIsInNldEV2ZW50TGlzdGVuZXJzIiwiZ2V0QWxsUHJvbWlzZSIsImRhdGFDYXJkcyIsInNldFVzZXJJbmZvIiwicmVuZGVySXRlbXMiLCJyZXNldFZhbGlkYXRpb24iLCJ1c2VySW5mbyIsImdldFVzZXJJbmZvIiwic2V0SW5wdXRWYWx1ZXMiXSwic291cmNlUm9vdCI6IiJ9